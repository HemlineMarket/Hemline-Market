<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Hemline â€” Listings</title>
  <style>
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; margin: 24px; }
    .wrap { max-width: 900px; margin: auto; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    img { width: 100%; border-radius: 12px; border: 1px solid #e5e7eb; object-fit: cover; }
    .card { border: 1px solid #e2e8f0; border-radius: 12px; padding: 12px; }
    .title { font-weight: 600; margin-top: 8px; }
    .price { font-size: 18px; font-weight: 700; color: #111827; }
  </style>
  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const supabaseUrl = "https://clkizksbvxjkoatdajgd.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNsa2l6a3Nidnhqa29hdGRhamdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2ODAyMDUsImV4cCI6MjA3MDI1NjIwNX0.m3wd6UAuqxa7BpcQof9mmzd8zdsmadwGDO0x7-nyBjI";
    const supabase = createClient(supabaseUrl, supabaseKey);

    async function loadListings() {
      const { data, error } = await supabase.from("listings").select("*").order("id", { ascending: false });
      if (error) {
        console.error(error);
        return;
      }
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      data.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${item.image_url}" alt="Listing image">
          <div class="title">${item.title}</div>
          <div class="price">$${item.price}</div>
        `;
        grid.appendChild(card);
      });
    }

    loadListings();
  </script>
</head>
<body>
  <div class="wrap">
    <h1>Fabric Listings</h1>
    <div id="grid" class="grid"></div>
  </div>
</body>
</html>
