<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Add Test Item — Hemline Market</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:24px}
    button{
      background:#991b1b;color:#fff;border:1px solid #991b1b;border-radius:10px;
      padding:10px 16px;cursor:pointer;font-weight:700
    }
    .note{margin-top:10px;color:#374151}
    .muted{color:#6b7280}
  </style>
</head>
<body>
  <h1>Add a test item to your cart</h1>
  <p class="muted">This page is just for quick testing. Click the button to add a demo fabric, then you’ll be taken to your cart.</p>

  <button id="add">Add Test Fabric (6 yd @ $18.50/yd)</button>
  <div class="note">This will create an item with <strong>perYd</strong>, <strong>yards</strong>, and <strong>amount</strong> (in cents) so shipping and totals calculate correctly.</div>

  <script>
    (function () {
      const KEY = 'hm_cart'; // ✅ matches cart/checkout

      document.getElementById('add').onclick = () => {
        // read current cart
        const cart = JSON.parse(localStorage.getItem(KEY) || '[]');

        // demo item (6 yards → shipping tier should be $8)
        const perYd = 18.50;                // price per yard in dollars (for display)
        const yards = 6;                    // number of yards (drives shipping)
        const unitAmountCents = Math.round(perYd * 100); // amount per unit in cents

        cart.push({
          id: 'test-' + Date.now(),
          name: 'Cotton Sateen — Navy',
          qty: 1,                           // quantity of the line item
          perYd: perYd,                     // used for rendering/backup yard math
          yards: yards,                     // used for shipping tiers
          amount: unitAmountCents,          // used by cart: line = amount * qty
          photo: 'https://via.placeholder.com/600x400?text=Fabric'
          // optional seller grouping, if you want to test multi-seller shipping:
          // sellerId: 'seller-abc',
          // sellerName: 'FabricFolio'
        });

        // persist & go to cart
        localStorage.setItem(KEY, JSON.stringify(cart));
        window.location.href = 'cart.html';
      };
    })();
  </script>
</body>
</html>
