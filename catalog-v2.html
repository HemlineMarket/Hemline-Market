<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>hemlinemarket — Search</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#0f172a;--muted:#6b7280;--bg:#ffffff;--chip:#f3f4f6;--chipText:#111827;--chipActive:#111827;--chipActiveText:#ffffff;
      --ring:#11182722;--card:#ffffff;--border:#e5e7eb;--brand:#0b132b;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--ink);background:#fafafa}
    header{position:sticky;top:0;z-index:50;background:var(--bg);border-bottom:1px solid var(--border)}
    .container{max-width:1080px;margin:0 auto;padding:16px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .brand{font-weight:700}
    .pillbar{display:flex;gap:10px;align-items:center}
    .pill{padding:8px 12px;border-radius:999px;background:#f8fafc;border:1px solid var(--border);font-size:14px}
    .pill strong{font-weight:600}
    h1{margin:12px 0 8px 0;font-size:28px}
    .searchbox{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:10px;font-size:14px}
    .filters{margin-top:8px;background:var(--bg);border:1px solid var(--border);border-radius:14px;padding:14px}
    .grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .grid3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    select,input[type="number"],input[type="text"]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;font-size:14px;background:#fff}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:var(--chip);color:var(--chipText);cursor:pointer;font-size:13px}
    .chip[data-active="1"]{background:var(--chipActive);color:var(--chipActiveText);border-color:var(--chipActive)}
    .swatches{display:flex;gap:10px;flex-wrap:wrap}
    .swatch{width:28px;height:28px;border-radius:999px;border:2px solid #ffffff;outline:1px solid var(--border);cursor:pointer;display:inline-block}
    .swatch[data-active="1"]{outline:2px solid var(--ink)}
    .swatch.gold{background: linear-gradient(135deg,#f9e79f 0%, #f1c40f 50%, #b7950b 100%)}
    .swatch.silver{background: linear-gradient(135deg,#f8fbfd 0%, #cfd8dc 50%, #90a4ae 100%)}
    .swatch.black{background:#000}
    .swatch.gray{background:#9ca3af}
    .swatch.white{background:#fff}
    .swatch.ivory{background:#f7f3e8}
    .swatch.brown{background:#8b5e3c}
    .swatch.pink{background:#f9a8d4}
    .swatch.red{background:#ef4444}
    .swatch.orange{background:#fb923c}
    .swatch.yellow{background:#facc15}
    .swatch.green{background:#22c55e}
    .swatch.blue{background:#3b82f6}
    .swatch.purple{background:#8b5cf6}
    .actions{display:flex;gap:10px;margin-top:10px}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#0f172a;color:#fff;cursor:pointer}
    .btn.secondary{background:#fff;color:#111;border:1px solid var(--border)}
    .subbar{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .catalog{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px;margin:14px 0 40px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .thumb{height:160px;background:repeating-linear-gradient(45deg,#eef2ff,#eef2ff 8px,#e5e7eb 8px,#e5e7eb 16px);display:flex;align-items:center;justify-content:center;color:#94a3b8;font-size:12px}
    .meta{padding:12px}
    .title{font-weight:600;margin-bottom:4px}
    .subtle{color:var(--muted);font-size:12px}
    .priceRow{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .price{font-weight:700}
    .badge{font-size:11px;background:#f3f4f6;border:1px solid var(--border);padding:4px 8px;border-radius:999px}
    @media (max-width:960px){
      .catalog{grid-template-columns:repeat(2,minmax(0,1fr))}
      .grid3{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    @media (max-width:640px){
      .catalog{grid-template-columns:1fr}
      .grid3,.grid2{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="container row" style="justify-content:space-between;align-items:center">
      <div class="brand">hemlinemarket</div>
      <nav class="pillbar">
        <a class="pill" href="/likes.html">Likes</a>
        <a class="pill" href="/atelier.html">My Atelier</a>
        <a class="pill" href="/new.html">New arrivals</a>
        <a class="pill" href="/profile.html">Profile</a>
        <a class="pill" href="/list.html"><strong>List an item</strong></a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>Search</h1>
    <input id="q" class="searchbox" placeholder="Search fabrics… e.g. silk crepe, red, Liberty" />

    <section class="filters">
      <div class="grid3">
        <div>
          <label>Fabric content</label>
          <select id="content"></select>
        </div>
        <div>
          <label>Fabric type</label>
          <select id="type"></select>
        </div>
        <div>
          <label>Fabric category</label>
          <select id="category"></select>
        </div>

        <div>
          <label>Condition</label>
          <select id="condition">
            <option value="">Any</option>
            <option>New</option>
            <option>Washed (pre-shrunk)</option>
            <option>Used</option>
          </select>
        </div>

        <div>
          <label>Weight (gsm) — min</label>
          <input id="gsmMin" type="number" inputmode="numeric" placeholder="min">
        </div>
        <div>
          <label>Weight (gsm) — max</label>
          <input id="gsmMax" type="number" inputmode="numeric" placeholder="max">
        </div>

        <div>
          <label>Width (in) — min</label>
          <input id="wMin" type="number" inputmode="numeric" placeholder="min">
        </div>
        <div>
          <label>Width (in) — max</label>
          <input id="wMax" type="number" inputmode="numeric" placeholder="max">
        </div>
        <div>
          <label>Price (USD) — min</label>
          <input id="pMin" type="number" inputmode="numeric" placeholder="min">
        </div>

        <div>
          <label>Price (USD) — max</label>
          <input id="pMax" type="number" inputmode="numeric" placeholder="max">
        </div>
        <div>
          <label>Country of origin</label>
          <select id="origin">
            <option value="">Any</option>
            <option>China</option>
            <option>France</option>
            <option>India</option>
            <option>Italy</option>
            <option>Japan</option>
            <option>USA</option>
          </select>
        </div>
        <div>
          <label>Designer</label>
          <input id="designer" type="text" placeholder="Enter designer name">
        </div>

        <div>
          <label>Yards available (min)</label>
          <input id="yardsMin" type="number" inputmode="numeric" placeholder="min yards">
        </div>
        <div style="grid-column: span 2;">
          <label>Color family</label>
          <div id="colors" class="swatches" aria-label="Color family">
            <span class="swatch black"   data-color="black"   title="Black"></span>
            <span class="swatch gray"    data-color="gray"    title="Gray"></span>
            <span class="swatch white"   data-color="white"   title="White"></span>
            <span class="swatch ivory"   data-color="ivory"   title="Ivory"></span>
            <span class="swatch brown"   data-color="brown"   title="Brown"></span>
            <span class="swatch pink"    data-color="pink"    title="Pink"></span>
            <span class="swatch red"     data-color="red"     title="Red"></span>
            <span class="swatch orange"  data-color="orange"  title="Orange"></span>
            <span class="swatch yellow"  data-color="yellow"  title="Yellow"></span>
            <span class="swatch green"   data-color="green"   title="Green"></span>
            <span class="swatch blue"    data-color="blue"    title="Blue"></span>
            <span class="swatch purple"  data-color="purple"  title="Purple"></span>
            <span class="swatch silver"  data-color="silver"  title="Silver"></span>
            <span class="swatch gold"    data-color="gold"    title="Gold"></span>
          </div>
        </div>

        <div style="grid-column: 1 / -1;">
          <label>Pattern</label>
          <div id="pattern" class="chips" role="group" aria-label="Pattern">
            <button class="chip" data-val="">Any</button>
            <button class="chip" data-val="solid">Solid</button>
            <button class="chip" data-val="print">Print</button>
          </div>
        </div>
      </div>

      <div class="actions">
        <button id="apply" class="btn">Apply Filters</button>
        <button id="clear" class="btn secondary">Clear Filters</button>
      </div>
    </section>

    <div class="subbar">
      <div id="status" class="subtle">Showing 0 fabrics</div>
      <div>
        <label class="subtle" for="sort">Sort</label>
        <select id="sort">
          <option value="newest">Newest</option>
          <option value="price_low">Price: low to high</option>
          <option value="price_high">Price: high to low</option>
          <option value="width">Width</option>
          <option value="yards">Yards available</option>
        </select>
      </div>
    </div>

    <section id="catalog" class="catalog"></section>
  </main>

  <script>
    // ----- Data (demo)
    // NOTE: color tokens in items must match swatch data-color values.
    const ITEMS = [
      { id:1,title:"Silk Crepe",   price:45,  yd:5,  content:"Silk",     type:"Crepe",   category:"Natural",  condition:"New",                 gsm:90,  width:54,  origin:"China", designer:"Liberty", colors:["red","ivory","pink"],   pattern:"solid" },
      { id:2,title:"Wool Dobby",   price:60,  yd:8,  content:"Wool",     type:"Dobby",   category:"Natural",  condition:"Used",                gsm:240, width:58,  origin:"Italy", designer:"Mood",    colors:["black","gray"],        pattern:"solid" },
      { id:3,title:"Cotton Sateen",price:28,  yd:12, content:"Cotton",   type:"Sateen",  category:"Natural",  condition:"Washed (pre-shrunk)", gsm:150, width:55,  origin:"Japan", designer:"Joann",   colors:["blue"],                 pattern:"print" },
      { id:4,title:"Linen Twill",  price:35,  yd:6,  content:"Linen",    type:"Twill",   category:"Natural",  condition:"New",                 gsm:175, width:55,  origin:"Turkey",designer:"Liberty", colors:["ivory","brown"],       pattern:"solid" },
      { id:5,title:"Poly Jersey",  price:12,  yd:10, content:"Polyester",type:"Jersey",  category:"Synthetic",condition:"Used",                gsm:180, width:60,  origin:"USA",   designer:"Mood",    colors:["gray","black"],        pattern:"solid" },
      { id:6,title:"Wool-Silk Crepe Blend",price:70,yd:7,content:"Blend",type:"Crepe",   category:"Blend",    condition:"New",                 gsm:160, width:57,  origin:"France",designer:"Joann",   colors:["gold","black"],        pattern:"print" }
    ];

    // ----- Select option sources (alphabetical)
    const CONTENTS = [
      "Acrylic","Alpaca","Cashmere","Cotton","Hemp","Linen","Modal","Mohair","Nylon","Polyester",
      "Ramie","Rayon","Silk","Spandex","Tencel","Viscose","Wool","Blend","Wool-Silk"
    ];
    const TYPES = ["Canvas","Chiffon","Crepe","Denim","Jersey","Lace","Lyocell","Modal","Nylon","Other","Polyester","Rayon","Satin","Silk","Tencel","Twill","Velvet","Viscose","Wool"].sort((a,b)=>a.localeCompare(b));
    const CATS = ["All","Natural","Synthetic","Blend"];

    // Simple synonyms (search box only)
    const SYNONYMS = { elastane:"spandex", lycra:"spandex" };

    // ----- DOM helpers
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    function optfill(sel, list, withAll=true){
      const el=$(sel); el.innerHTML="";
      if(withAll){ const o=document.createElement("option"); o.value=""; o.textContent="All"; el.appendChild(o); }
      list.slice().sort((a,b)=>a.localeCompare(b)).forEach(v=>{
        const o=document.createElement("option"); o.value=v; o.textContent=v; el.appendChild(o);
      });
    }

    // Init selects
    optfill("#content", CONTENTS);
    optfill("#type", TYPES);
    optfill("#category", ["Natural","Synthetic","Blend"], true);

    // Pattern chips
    const patternChips = $$("#pattern .chip");
    function setChip(val){
      patternChips.forEach(c=>c.dataset.active = (c.dataset.val===val?"1":"0"));
      $("#pattern").dataset.value = val || "";
    }
    patternChips.forEach(c=>c.addEventListener("click",()=>setChip(c.dataset.val)));
    setChip("");

    // Color swatches
    const activeColors = new Set();
    $$("#colors .swatch").forEach(sw=>{
      sw.addEventListener("click",()=>{
        const c = sw.dataset.color;
        if(activeColors.has(c)){ activeColors.delete(c); sw.dataset.active=""; }
        else { activeColors.add(c); sw.dataset.active="1"; }
      });
    });

    // Render cards
    function cardHTML(it){
      return `
      <article class="card" data-id="${it.id}">
        <div class="thumb">No image</div>
        <div class="meta">
          <div class="title">${it.title}</div>
          <div class="subtle">${it.content} • ${it.type} • ${it.width}" • ${it.gsm} gsm</div>
          <div class="priceRow">
            <div class="price">$${it.price.toFixed(2)} / yd</div>
            <span class="badge">${it.yd} yd</span>
          </div>
        </div>
      </article>`;
    }

    function matches(it, want){
      // search text with simple synonyms
      const q = (want.q || "").trim().toLowerCase();
      if(q){
        const norm = q.split(/\s+/).map(w=>SYNONYMS[w]||w).join(" ");
        const hay = [it.title,it.content,it.type,it.category,it.designer].join(" ").toLowerCase();
        if(!hay.includes(norm)) return false;
      }
      if(want.content && it.content!==want.content) return false;
      if(want.type && it.type!==want.type) return false;
      if(want.category && it.category!==want.category) return false;
      if(want.condition && it.condition!==want.condition) return false;
      if(want.origin && it.origin!==want.origin) return false;
      if(want.designer && !it.designer.toLowerCase().includes(want.designer.toLowerCase())) return false;
      if(want.pattern && it.pattern!==want.pattern) return false;
      if(want.gsmMin!=null && it.gsm < want.gsmMin) return false;
      if(want.gsmMax!=null && it.gsm > want.gsmMax) return false;
      if(want.wMin!=null && it.width < want.wMin) return false;
      if(want.wMax!=null && it.width > want.wMax) return false;
      if(want.pMin!=null && it.price < want.pMin) return false;
      if(want.pMax!=null && it.price > want.pMax) return false;
      if(want.yardsMin!=null && it.yd < want.yardsMin) return false;
      if(want.colors && want.colors.size){
        const has = it.colors.some(c=>want.colors.has(c));
        if(!has) return false;
      }
      return true;
    }

    function valNum(id){
      const v = $(id).value.trim(); return v===""?null:Number(v);
    }

    function apply(){
      const want = {
        q: $("#q").value,
        content: $("#content").value,
        type: $("#type").value,
        category: $("#category").value,
        condition: $("#condition").value,
        origin: $("#origin").value,
        designer: $("#designer").value.trim(),
        pattern: $("#pattern").dataset.value || "",
        gsmMin: valNum("#gsmMin"),
        gsmMax: valNum("#gsmMax"),
        wMin:   valNum("#wMin"),
        wMax:   valNum("#wMax"),
        pMin:   valNum("#pMin"),
        pMax:   valNum("#pMax"),
        yardsMin: valNum("#yardsMin"),
        colors: activeColors
      };

      let out = ITEMS.filter(it=>matches(it,want));

      const sort = $("#sort").value;
      if(sort==="price_low") out.sort((a,b)=>a.price-b.price);
      else if(sort==="price_high") out.sort((a,b)=>b.price-a.price);
      else if(sort==="width") out.sort((a,b)=>b.width-a.width);
      else if(sort==="yards") out.sort((a,b)=>b.yd-a.yd);
      else out.sort((a,b)=>b.id-a.id); // newest (by id)

      $("#catalog").innerHTML = out.map(cardHTML).join("");
      $("#status").textContent = `Showing ${out.length} fabric${out.length===1?"":"s"}`;
    }

    function clearAll(){
      $("#q").value="";
      ["#content","#type","#category","#condition","#origin","#sort"].forEach(s=>$(s).value="");
      ["#gsmMin","#gsmMax","#wMin","#wMax","#pMin","#pMax","#designer","#yardsMin"].forEach(s=>$(s).value="");
      setChip("");
      activeColors.clear(); $$("#colors .swatch").forEach(sw=>sw.dataset.active="");
      apply();
    }

    $("#apply").addEventListener("click",apply);
    $("#clear").addEventListener("click",clearAll);
    $("#sort").addEventListener("change",apply);
    ["#q","#content","#type","#category","#condition","#origin"].forEach(s=>$(s).addEventListener("change",apply));

    // Initial render
    apply();
  </script>
</body>
</html>
