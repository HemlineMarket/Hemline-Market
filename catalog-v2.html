<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>hemlinemarket — Catalog</title>
  <link href="components.css" rel="stylesheet" />
  <style>
    :root { --ink:#0f172a; --muted:#6b7280; --pill:#f3f4f6; --pillOn:#111827; --pillOnFg:#fff; --ring:#111827; }
    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;color:var(--ink);background:#fff;}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;}
    header .brand{font-weight:800;letter-spacing:.2px;}
    header .nav{display:flex;gap:10px;}
    .chip{display:inline-flex;align-items:center;gap:8px;border-radius:999px;padding:8px 14px;background:#f8fafc;border:1px solid #e5e7eb;cursor:pointer;font-weight:600}
    .chip.dark{background:#0f172a;color:#fff;border-color:#0f172a}
    h1{font-weight:800;margin:12px 0 20px 0;font-size:28px}
    .filters{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin:8px 0 22px}
    .filters .field{grid-column:span 3}
    .filters .field.sm{grid-column:span 2}
    .filters label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    .filters input,.filters select{width:100%;padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .pills{display:flex;gap:8px;flex-wrap:wrap}
    .pill{border:1px solid #e5e7eb;background:var(--pill);color:#111827;border-radius:999px;padding:7px 12px;cursor:pointer;font-weight:600}
    .pill.on{background:var(--pillOn);color:var(--pillOnFg);border-color:var(--pillOn)}
    .bar{display:flex;gap:12px;margin:8px 0 22px}
    .btn{background:#0f172a;color:#fff;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:14px}
    .card{border:1px solid #e5e7eb;border-radius:16px;background:#fff;overflow:hidden}
    .thumb{height:140px;background:repeating-linear-gradient(45deg,#f3f4f6,#f3f4f6 10px,#eef2ff 10px,#eef2ff 20px)}
    .card .body{padding:14px}
    .title{font-weight:800;margin-bottom:6px}
    .sub{font-size:13px;color:var(--muted)}
    .priceRow{display:flex;align-items:center;justify-content:space-between;margin-top:10px}
    .badge{font-size:12px;border-radius:999px;background:#f3f4f6;border:1px solid #e5e7eb;padding:4px 8px}
    .sortRow{display:flex;justify-content:flex-end;margin-top:6px}
    @media (max-width:900px){ .filters .field{grid-column:span 6} .filters .field.sm{grid-column:span 6} .grid{grid-template-columns:1fr} header .nav{display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">hemlinemarket</div>
      <nav class="nav">
        <a class="chip" href="likes.html">Likes</a>
        <a class="chip" href="atelier.html">My Atelier</a>
        <a class="chip" href="new.html">New arrivals</a>
        <a class="chip" href="profile.html">Profile</a>
        <a class="chip dark" href="list.html">List an item</a>
      </nav>
    </header>

    <h1>Catalog</h1>

    <div class="row" style="margin-bottom:10px">
      <input id="q" class="search" placeholder="Search fabrics… e.g. silk crepe, red, Liberty" style="flex:1;padding:12px 14px;border:1px solid #e5e7eb;border-radius:10px" />
    </div>

    <div class="filters">
      <div class="field">
        <label>Fabric content</label>
        <select id="content">
          <option value="">All</option>
          <!-- alphabetical -->
          <option>Acrylic</option><option>Alpaca</option><option>Cashmere</option><option>Cotton</option>
          <option>Hemp</option><option>Linen</option><option>Lyocell</option><option>Modal</option>
          <option>Nylon</option><option>Polyester</option><option>Ramie</option><option>Rayon</option>
          <option>Silk</option><option>Spandex</option><option>Tencel</option><option>Triacetate</option>
          <option>Viscose</option><option>Wool</option><option>Wool-Silk</option>
        </select>
      </div>

      <div class="field">
        <label>Fabric type</label>
        <select id="type">
          <option value="">All</option>
          <!-- alphabetical -->
          <option>Canvas</option><option>Chiffon</option><option>Cotton lawn</option><option>Crepe</option>
          <option>Dobby</option><option>Denim</option><option>Jersey</option><option>Lace</option>
          <option>Linen</option><option>Modal</option><option>Nylon</option><option>Rayon challis</option>
          <option>Sateen</option><option>Satin</option><option>Silk charmeuse</option><option>Tencel twill</option>
          <option>Twill</option><option>Velvet</option><option>Wool crepe</option>
        </select>
      </div>

      <div class="field">
        <label>Fabric category</label>
        <select id="category">
          <option value="">All</option>
          <option>Natural</option>
          <option>Synthetic</option>
          <option>Blend</option>
        </select>
      </div>

      <div class="field">
        <label>Condition</label>
        <select id="condition">
          <option value="">Any</option>
          <option>New</option>
          <option>Like New</option>
          <option>Used</option>
        </select>
      </div>

      <div class="field sm">
        <label>Weight (gsm) — min</label>
        <input id="gsmMin" type="number" min="0" placeholder="min"/>
      </div>
      <div class="field sm">
        <label>Weight (gsm) — max</label>
        <input id="gsmMax" type="number" min="0" placeholder="max"/>
      </div>
      <div class="field sm">
        <label>Width (in) — min</label>
        <input id="wMin" type="number" min="0" placeholder="min"/>
      </div>
      <div class="field sm">
        <label>Width (in) — max</label>
        <input id="wMax" type="number" min="0" placeholder="max"/>
      </div>

      <div class="field sm">
        <label>Price (USD) — min</label>
        <input id="pMin" type="number" min="0" placeholder="min"/>
      </div>
      <div class="field sm">
        <label>Price (USD) — max</label>
        <input id="pMax" type="number" min="0" placeholder="max"/>
      </div>

      <div class="field">
        <label>Country of origin</label>
        <select id="country">
          <option value="">Any</option>
          <option>China</option><option>France</option><option>India</option><option>Italy</option>
          <option>Japan</option><option>Korea</option><option>Pakistan</option><option>Turkey</option>
          <option>UK</option><option>USA</option><option>Vietnam</option><option>Other/Unknown</option>
        </select>
      </div>

      <div class="field">
        <label>Designer</label>
        <input id="designer" placeholder="Enter designer name"/>
      </div>

      <div class="field sm">
        <label>Yards available (min)</label>
        <input id="yardsMin" type="number" min="0" placeholder="min yards"/>
      </div>

      <div class="field sm">
        <label>Pattern</label>
        <div class="pills" id="patternPills" role="group" aria-label="Pattern">
          <button class="pill on" data-value="">Any</button>
          <button class="pill" data-value="Solid">Solid</button>
          <button class="pill" data-value="Print">Print</button>
        </div>
      </div>

      <div class="field" style="grid-column:span 6">
        <label>Color family</label>
        <div class="pills" id="colorPills">
          <!-- 12 basic hues -->
          <button class="pill on" data-value="">Any</button>
          <button class="pill" data-value="black">Black</button>
          <button class="pill" data-value="gray">Gray</button>
          <button class="pill" data-value="white">White</button>
          <button class="pill" data-value="beige">Beige</button>
          <button class="pill" data-value="brown">Brown</button>
          <button class="pill" data-value="pink">Pink</button>
          <button class="pill" data-value="red">Red</button>
          <button class="pill" data-value="orange">Orange</button>
          <button class="pill" data-value="yellow">Yellow</button>
          <button class="pill" data-value="green">Green</button>
          <button class="pill" data-value="blue">Blue</button>
          <button class="pill" data-value="purple">Purple</button>
        </div>
      </div>
    </div>

    <div class="bar">
      <button id="apply" class="btn">Apply Filters</button>
      <button id="clear" class="btn" style="background:#e5e7eb;color:#111827">Clear Filters</button>
      <div class="sortRow" style="margin-left:auto">
        <label class="muted" style="margin-right:8px">Sort</label>
        <select id="sort">
          <option value="newest">Newest</option>
          <option value="priceAsc">Price: Low to High</option>
          <option value="priceDesc">Price: High to Low</option>
          <option value="widthDesc">Width: Wide to Narrow</option>
          <option value="gsmDesc">GSM: Heavy to Light</option>
        </select>
      </div>
    </div>

    <div id="status" class="muted" style="margin-bottom:8px">Showing 6 fabrics</div>

    <div id="grid" class="grid"></div>
  </div>

  <script>
    // --- Data (same 6 items used throughout) ---
    const ITEMS = [
      { id:'silk-crepe',     title:'Silk Crepe',          price:45,  date:'2025-08-25', content:'Silk',      type:'Crepe',       category:'Natural',  gsm:90,  width:54,  yards:5,  country:'China',  designer:'Liberty', colors:['red','pink'],    pattern:'Solid', use:'Fashion', condition:'New' },
      { id:'wool-dobby',     title:'Wool Dobby',          price:60,  date:'2025-08-25', content:'Wool',      type:'Dobby',       category:'Natural',  gsm:240, width:58,  yards:8,  country:'Italy',  designer:'Mood',    colors:['black','gray'], pattern:'Solid', use:'Fashion', condition:'Used' },
      { id:'cotton-sateen',  title:'Cotton Sateen',       price:28,  date:'2025-08-25', content:'Cotton',    type:'Sateen',      category:'Natural',  gsm:150, width:55,  yards:12, country:'Japan',  designer:'Joann',   colors:['white','blue'], pattern:'Print', use:'Fashion', condition:'Like New' },
      { id:'linen-twill',    title:'Linen Twill',         price:35,  date:'2025-08-25', content:'Linen',     type:'Twill',       category:'Natural',  gsm:175, width:55,  yards:6,  country:'Turkey', designer:'Liberty', colors:['beige','brown'], pattern:'Solid', use:'Fashion', condition:'New' },
      { id:'poly-jersey',    title:'Poly Jersey',         price:12,  date:'2025-08-25', content:'Polyester', type:'Jersey',      category:'Synthetic',gsm:180, width:60,  yards:10, country:'USA',   designer:'Mood',    colors:['gray','black'], pattern:'Solid', use:'Activewear', condition:'Used' },
      { id:'wool-silk-crepe',title:'Wool-Silk Crepe Blend',price:70, date:'2025-08-25', content:'Wool-Silk', type:'Crepe',       category:'Blend',    gsm:160, width:57,  yards:7,  country:'France', designer:'Joann',   colors:['gold','beige'],  pattern:'Print', use:'Fashion', condition:'Like New' },
    ];

    // synonym support: "elastane" maps to spandex
    const SYNONYMS = { 'elastane':'spandex', 'spandex':'spandex' };

    // --- DOM helpers ---
    const $ = sel => document.querySelector(sel);
    const grid = $('#grid'), status = $('#status');

    // build one card (compact: title, meta row, price + yards badge)
    function cardHTML(i){
      return `
        <article class="card" data-id="${i.id}">
          <div class="thumb"></div>
          <div class="body">
            <div class="title">${i.title}</div>
            <div class="sub">${i.content} • ${i.type} • ${i.width}" • ${i.gsm} gsm</div>
            <div class="priceRow"><div><strong>$${i.price.toFixed(2)}</strong> / yd</div><span class="badge">${i.yards} yd</span></div>
          </div>
        </article>`;
    }

    function render(list){
      grid.innerHTML = list.map(cardHTML).join('');
      status.textContent = `Showing ${list.length} fabric${list.length===1?'':'s'}`;
    }

    function num(v){ const n=Number(v); return Number.isFinite(n)?n:null; }

    function activePill(groupId){
      const on = [...document.querySelectorAll(`#${groupId} .pill.on`)];
      return on.length?on[0].dataset.value:'';
    }

    function setSinglePill(group, target){
      [...group.querySelectorAll('.pill')].forEach(p=>p.classList.remove('on'));
      target.classList.add('on');
    }

    // pill listeners
    $('#patternPills').addEventListener('click', e=>{
      if(e.target.classList.contains('pill')) setSinglePill($('#patternPills'), e.target);
    });
    $('#colorPills').addEventListener('click', e=>{
      if(e.target.classList.contains('pill')) setSinglePill($('#colorPills'), e.target);
    });

    function matches(i){
      const q = $('#q').value.trim().toLowerCase();
      const content = $('#content').value;
      const type = $('#type').value;
      const category = $('#category').value;
      const condition = $('#condition').value;
      const gsmMin = num($('#gsmMin').value), gsmMax = num($('#gsmMax').value);
      const wMin = num($('#wMin').value), wMax = num($('#wMax').value);
      const pMin = num($('#pMin').value), pMax = num($('#pMax').value);
      const country = $('#country').value;
      const designer = $('#designer').value.trim().toLowerCase();
      const yardsMin = num($('#yardsMin').value);
      const pattern = activePill('patternPills');
      const color = activePill('colorPills');

      // search text with synonym support
      if(q){
        const qq = q.replace(/\belastane\b/g,'spandex');
        const hay = `${i.title} ${i.content} ${i.type} ${i.designer} ${i.colors.join(' ')}`.toLowerCase();
        if(!hay.includes(qq)) return false;
      }

      if(content && i.content!==content) return false;
      if(type && i.type!==type) return false;
      if(category && i.category!==category) return false;
      if(condition && i.condition!==condition) return false;

      if(gsmMin!=null && i.gsm<gsmMin) return false;
      if(gsmMax!=null && i.gsm>gsmMax) return false;
      if(wMin!=null && i.width<wMin) return false;
      if(wMax!=null && i.width>wMax) return false;
      if(pMin!=null && i.price<pMin) return false;
      if(pMax!=null && i.price>pMax) return false;

      if(country && i.country!==country) return false;
      if(designer && !i.designer.toLowerCase().includes(designer)) return false;
      if(yardsMin!=null && i.yards<yardsMin) return false;

      if(pattern && i.pattern!==pattern) return false;
      if(color && !i.colors.includes(color)) return false;

      return true;
    }

    function apply(){
      let list = ITEMS.filter(matches);
      const sort = $('#sort').value;
      if(sort==='priceAsc') list.sort((a,b)=>a.price-b.price);
      else if(sort==='priceDesc') list.sort((a,b)=>b.price-a.price);
      else if(sort==='widthDesc') list.sort((a,b)=>b.width-a.width);
      else if(sort==='gsmDesc') list.sort((a,b)=>b.gsm-a.gsm);
      else list.sort((a,b)=> (a.date<b.date?1:-1)); // newest
      render(list);
    }

    function clearAll(){
      ['content','type','category','condition','gsmMin','gsmMax','wMin','wMax','pMin','pMax','country','designer','yardsMin','q'].forEach(id=>{
        const el = document.getElementById(id); if(!el) return;
        if(el.tagName==='SELECT') el.value = '';
        else el.value = '';
      });
      // reset pills
      ['patternPills','colorPills'].forEach(g=>{
        const grp = document.getElementById(g);
        setSinglePill(grp, grp.querySelector('.pill'));
      });
      apply();
    }

    document.getElementById('apply').addEventListener('click', apply);
    document.getElementById('clear').addEventListener('click', clearAll);
    document.getElementById('sort').addEventListener('change', apply);
    document.getElementById('q').addEventListener('keydown', e=>{ if(e.key==='Enter'){ apply(); } });

    // initial render
    render(ITEMS);
  </script>
</body>
</html>
