<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>ThreadTalk — Hemline Market</title>

  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>

  <!-- Shared site styles -->
  <link rel="stylesheet" href="styles/hm-modern.css"/>
  <link rel="stylesheet" href="styles/hm-header.css"/>
  <link rel="stylesheet" href="styles/hm-typography.css"/>
  <link rel="stylesheet" href="styles/hm-footer.css"/>

  <style>
    :root{
      --hm-accent:#991b1b;
      --hm-text:#111827;
      --hm-muted:#6b7280;
      --hm-border:#e5e7eb;
      --hm-bg-card:#ffffff;
      --hm-brand:#991b1b;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      background:#f8f8f8;
      color:#111827;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      -webkit-font-smoothing:antialiased;
    }

    /* ========================================
       LAYOUT
       ======================================== */
    .tt-wrap{
      max-width:720px;
      margin:0 auto;
      padding:16px 12px 60px;
    }

    /* ========================================
       HERO - Compact header
       ======================================== */
    .tt-hero{
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:16px;
      margin-bottom:16px;
    }

    .tt-hero-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }

    .tt-hero h1{
      font-size:24px;
      font-weight:800;
      margin:0;
      color:#111827;
    }

    .tt-hero .sub{
      display:none;
    }

    .tt-search{
      display:flex;
      align-items:center;
      gap:6px;
      background:#f3f4f6;
      border-radius:8px;
      padding:8px 12px;
      flex:0 0 200px;
    }

    .tt-search-label{display:none}

    .tt-search-input{
      flex:1;
      border:none;
      outline:none;
      font-size:14px;
      background:transparent;
      color:#111827;
      width:100%;
    }

    .tt-search-input::placeholder{color:#9ca3af}

    /* ========================================
       COMPOSER - Clean and minimal
       ======================================== */
    .composer{
      background:#f9fafb;
      border:1px solid #e5e7eb;
      border-radius:10px;
      padding:12px;
    }

    .composer .row{
      display:flex;
      gap:10px;
      margin-bottom:10px;
    }

    #composeCategory{
      flex:0 0 180px;
      padding:10px;
      border:1px solid #e5e7eb;
      border-radius:8px;
      font-size:13px;
      background:#fff;
      color:#374151;
    }

    .composer-main{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .composer-title-label{
      font-size:11px;
      color:#6b7280;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.5px;
    }

    .composer-title{
      padding:10px;
      border:1px solid #e5e7eb;
      border-radius:8px;
      font-size:14px;
      background:#fff;
    }

    #composeText{
      padding:10px;
      border:1px solid #e5e7eb;
      border-radius:8px;
      font-size:14px;
      min-height:80px;
      resize:vertical;
      background:#fff;
    }

    .composer .actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .left-actions{
      display:flex;
      gap:6px;
    }

    .icon-btn{
      width:36px;
      height:36px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:1px solid #e5e7eb;
      border-radius:8px;
      background:#fff;
      cursor:pointer;
    }

    .icon-btn svg{width:18px;height:18px}
    .icon-photo{color:#991b1b}
    .icon-video{color:#2563eb}

    .tt-post{
      padding:10px 20px;
      background:#991b1b;
      color:#fff;
      border:none;
      border-radius:8px;
      font-size:14px;
      font-weight:700;
      cursor:pointer;
    }

    .tt-post:hover{background:#7f1d1d}
    .tt-post:disabled{opacity:0.5;cursor:not-allowed}

    .preview-wrap{
      display:flex;
      gap:8px;
      margin-top:10px;
    }

    .preview-wrap img,
    .preview-wrap video{
      max-width:100px;
      max-height:80px;
      border-radius:6px;
      border:1px solid #e5e7eb;
    }

    /* ========================================
       TOPICS - Horizontal scrollable pills
       ======================================== */
    .topics{
      margin-bottom:20px;
    }

    .topics-grid{
      display:flex;
      gap:8px;
      overflow-x:auto;
      padding:4px 0;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }

    .topics-grid::-webkit-scrollbar{display:none}

    .topic{
      flex:0 0 auto;
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:10px 16px;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:8px;
      text-decoration:none;
      color:#374151;
      font-size:13px;
      font-weight:600;
      white-space:nowrap;
      transition:all 0.15s;
    }

    .topic:hover{
      border-color:#991b1b;
      color:#991b1b;
      background:#fef2f2;
    }

    .topic::before{display:none}
    .topic .title{font-weight:600}
    .tile-art{display:none}

    /* ========================================
       FEED HEADER
       ======================================== */
    .feed{margin-top:0}

    .feed h2{
      font-size:14px;
      font-weight:700;
      color:#6b7280;
      text-transform:uppercase;
      letter-spacing:0.5px;
      margin:0 0 12px 0;
    }

    /* ========================================
       POST CARDS - Professional and clean
       ======================================== */
    .cards{
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .card{
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:10px;
      overflow:hidden;
    }

    /* Post header */
    .tt-head{
      padding:12px 16px;
      border-bottom:1px solid #f3f4f6;
    }

    .tt-line1{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:6px;
    }

    /* Category pill - PROMINENT */
    .cat{
      display:inline-block;
      padding:4px 10px;
      background:#991b1b;
      color:#fff !important;
      font-size:10px;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:0.5px;
      border-radius:4px;
      text-decoration:none;
    }

    /* Post title */
    .tt-title{
      font-size:15px;
      font-weight:700;
      color:#111827;
      flex:1;
    }

    .tt-share-chip{
      padding:4px 10px;
      background:#f3f4f6;
      border:none;
      border-radius:6px;
      font-size:11px;
      font-weight:600;
      color:#6b7280;
      cursor:pointer;
    }

    .tt-share-chip:hover{
      background:#e5e7eb;
      color:#374151;
    }

    /* Author line */
    .tt-line2{
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-size:12px;
      color:#6b7280;
    }

    .tt-line2-main{
      display:flex;
      align-items:center;
      gap:6px;
    }

    .tt-line2-main a,
    .tt-line2-main .author{
      font-weight:600;
      color:#374151;
      text-decoration:none;
    }

    .tt-line2-main a:hover{color:#991b1b}

    /* Post body */
    .preview{
      padding:12px 16px;
      font-size:14px;
      line-height:1.6;
      color:#374151;
      white-space:pre-wrap;
    }

    .preview a{color:#991b1b}

    /* Post media */
    .post-img,
    .post-video{
      width:100%;
      max-height:400px;
      object-fit:cover;
      display:block;
      border:none;
      border-radius:0;
      margin:0;
    }

    /* Link preview */
    .tt-link-card{
      margin:0 16px 12px;
      border:1px solid #e5e7eb;
      border-radius:8px;
      overflow:hidden;
      background:#f9fafb;
    }

    .tt-link-card img{
      width:100%;
      max-height:180px;
      object-fit:cover;
    }

    .tt-link-card-body{
      padding:10px 12px;
    }

    .tt-link-card-title{
      font-size:13px;
      font-weight:600;
      color:#111827;
      margin-bottom:2px;
    }

    .tt-link-card-domain{
      font-size:11px;
      color:#9ca3af;
    }

    /* ========================================
       ACTION BAR - Minimal
       ======================================== */
    .tt-actions-row{
      display:flex;
      align-items:center;
      gap:4px;
      padding:8px 16px;
      border-top:1px solid #f3f4f6;
      background:#fafafa;
    }

    .tt-like-wrapper{
      position:relative;
    }

    .tt-like-btn,
    .tt-reply-link{
      padding:6px 12px;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:6px;
      font-size:12px;
      font-weight:600;
      color:#6b7280;
      cursor:pointer;
    }

    .tt-like-btn:hover,
    .tt-reply-link:hover{
      background:#f3f4f6;
      color:#374151;
    }

    .tt-like-btn.tt-like-active{
      background:#fef2f2;
      border-color:#fecaca;
      color:#991b1b;
    }

    /* Reaction picker */
    .tt-picker,
    .tt-react-picker{
      position:absolute;
      bottom:100%;
      left:0;
      margin-bottom:6px;
      display:flex;
      gap:2px;
      padding:6px 8px;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:20px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      z-index:100;
    }

    .tt-picker-btn,
    .tt-react-pill{
      width:32px;
      height:32px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:none;
      background:transparent;
      border-radius:50%;
      font-size:18px;
      cursor:pointer;
    }

    .tt-picker-btn:hover,
    .tt-react-pill:hover{
      background:#fef2f2;
    }

    /* Reaction summary */
    .tt-react-summary{
      padding:4px 16px 8px;
      display:flex;
      gap:6px;
      flex-wrap:wrap;
    }

    .tt-react-chip{
      display:inline-flex;
      align-items:center;
      gap:3px;
      padding:2px 8px;
      background:#fef3f2;
      border-radius:999px;
      font-size:12px;
    }

    .tt-react-count{
      font-weight:600;
      color:#991b1b;
    }

    /* ========================================
       COMMENTS SECTION
       ======================================== */
    .tt-comments{
      border-top:1px solid #e5e7eb;
      background:#f9fafb;
    }

    .tt-comments-list{
      padding:0;
    }

    /* Individual comment */
    .tt-comment{
      padding:10px 16px;
      background:#fff;
      border-bottom:1px solid #f3f4f6;
    }

    .tt-comment:last-child{
      border-bottom:none;
    }

    /* Nested comments */
    .tt-comment-child{
      margin-left:20px;
      padding-left:12px;
      border-left:2px solid #991b1b;
      background:#fafafa;
    }

    .tt-comment-head-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:4px;
    }

    .tt-comment-meta{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      color:#6b7280;
    }

    .tt-comment-author,
    .tt-author-link{
      font-weight:700;
      color:#111827;
      text-decoration:none;
    }

    .tt-comment-dot{color:#d1d5db}

    .tt-comment-time{
      color:#9ca3af;
      font-size:11px;
    }

    .tt-comment-body{
      font-size:13px;
      line-height:1.5;
      color:#374151;
    }

    .tt-comment-body a{color:#991b1b}

    /* Comment image */
    .tt-comment-media img{
      max-width:200px;
      max-height:150px;
      border-radius:6px;
      margin-top:6px;
    }

    /* Comment actions */
    .tt-comment-actions{
      display:flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
    }

    .tt-comment-actions button,
    .tt-comment-actions .tt-like-btn{
      background:none;
      border:none;
      padding:2px 6px;
      font-size:11px;
      font-weight:600;
      color:#6b7280;
      cursor:pointer;
      border-radius:4px;
    }

    .tt-comment-actions button:hover,
    .tt-comment-actions .tt-like-btn:hover{
      background:#f3f4f6;
      color:#991b1b;
    }

    .tt-comment-actions .tt-like-btn.tt-like-active{
      color:#991b1b;
    }

    /* Comment reaction summary */
    .tt-react-summary-comment{
      padding:4px 0;
      margin-top:4px;
    }

    /* View more replies button */
    .tt-hidden-toggle{
      display:block;
      width:100%;
      padding:10px 16px;
      background:#f3f4f6;
      border:none;
      font-size:12px;
      font-weight:600;
      color:#6b7280;
      cursor:pointer;
      text-align:left;
    }

    .tt-hidden-toggle:hover{
      background:#e5e7eb;
      color:#374151;
    }

    /* Reply input - HIDDEN by default, shown via JS */
    .tt-comment-new{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 16px;
      background:#fff;
      border-top:1px solid #e5e7eb;
    }

    .tt-comment-photo{
      width:32px;
      height:32px;
      padding:0;
      border:1px solid #e5e7eb;
      border-radius:6px;
      cursor:pointer;
      font-size:0;
      background:#fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236b7280' viewBox='0 0 24 24'%3E%3Cpath d='M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm8 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z'/%3E%3C/svg%3E") center no-repeat;
    }

    .tt-comment-input{
      flex:1;
      padding:8px 12px;
      border:1px solid #e5e7eb;
      border-radius:20px;
      font-size:13px;
      background:#f9fafb;
    }

    .tt-comment-input:focus{
      outline:none;
      border-color:#991b1b;
      background:#fff;
    }

    .tt-comment-send{
      padding:8px 16px;
      background:#991b1b;
      color:#fff;
      border:none;
      border-radius:20px;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
    }

    .tt-comment-send:hover{
      background:#7f1d1d;
    }

    /* ========================================
       MENU
       ======================================== */
    .tt-menu{
      position:relative;
    }

    .tt-menu-btn{
      padding:4px 8px;
      background:transparent;
      border:none;
      color:#9ca3af;
      cursor:pointer;
      font-size:14px;
    }

    .tt-menu-btn:hover{
      color:#6b7280;
    }

    .tt-menu-pop{
      position:absolute;
      right:0;
      top:100%;
      margin-top:4px;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:8px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      overflow:hidden;
      z-index:100;
      min-width:100px;
    }

    .tt-menu-item{
      display:block;
      width:100%;
      padding:10px 14px;
      background:#fff;
      border:none;
      text-align:left;
      font-size:13px;
      color:#374151;
      cursor:pointer;
    }

    .tt-menu-item:hover{
      background:#f9fafb;
    }

    .tt-menu-item.danger{
      color:#dc2626;
    }

    .tt-menu-item.danger:hover{
      background:#fef2f2;
    }

    /* ========================================
       EDIT MODE
       ======================================== */
    .tt-edit-area{
      width:100%;
      min-height:80px;
      padding:10px;
      border:1px solid #e5e7eb;
      border-radius:8px;
      font-size:14px;
      resize:vertical;
    }

    .tt-edit-area:focus{
      outline:none;
      border-color:#991b1b;
    }

    .tt-edit-actions{
      display:flex;
      gap:8px;
      margin-top:10px;
    }

    .tt-edit-save,
    .tt-edit-cancel{
      padding:8px 16px;
      border-radius:6px;
      font-size:13px;
      font-weight:600;
      cursor:pointer;
    }

    .tt-edit-cancel{
      background:#fff;
      border:1px solid #e5e7eb;
      color:#6b7280;
    }

    .tt-edit-save{
      background:#991b1b;
      border:none;
      color:#fff;
    }

    /* ========================================
       EMPTY STATE
       ======================================== */
    #emptyState{
      text-align:center;
      padding:40px 20px;
      background:#fff;
      border:1px dashed #e5e7eb;
      border-radius:10px;
      color:#9ca3af;
      font-size:14px;
    }

    /* ========================================
       TOAST
       ======================================== */
    .toast{
      position:fixed;
      left:50%;
      bottom:20px;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 16px;
      border-radius:8px;
      font-size:14px;
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
      opacity:0;
      pointer-events:none;
      transition:opacity 0.2s;
      z-index:200;
    }

    .toast.show{opacity:1}

    .sr-only{
      position:absolute !important;
      width:1px;height:1px;padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }

    /* ========================================
       MOBILE
       ======================================== */
    @media (max-width:640px){
      .tt-wrap{
        padding:10px 10px 60px;
      }

      .tt-hero{
        padding:12px;
        border-radius:10px;
      }

      .tt-hero-header{
        flex-direction:column;
        align-items:stretch;
        gap:10px;
      }

      .tt-hero h1{
        font-size:20px;
      }

      .tt-search{
        flex:1;
      }

      .composer .row{
        flex-direction:column;
      }

      #composeCategory{
        flex:1;
        width:100%;
        font-size:16px;
      }

      #composeText{
        font-size:16px;
        min-height:100px;
      }

      .tt-post{
        width:100%;
      }

      .topics-grid{
        gap:6px;
      }

      .topic{
        padding:8px 12px;
        font-size:12px;
      }

      .card{
        border-radius:8px;
      }

      .tt-head{
        padding:10px 14px;
      }

      .cat{
        font-size:9px;
        padding:3px 8px;
      }

      .tt-title{
        font-size:14px;
      }

      .preview{
        padding:10px 14px;
        font-size:13px;
      }

      .tt-actions-row{
        padding:6px 14px;
      }

      .tt-comment{
        padding:8px 14px;
      }

      .tt-comment-new{
        padding:8px 14px;
      }

      .tt-comment-input{
        font-size:16px;
      }

      .tt-comment-child{
        margin-left:14px;
        padding-left:10px;
      }
    }

    /* ========================================
       ACCESSIBILITY
       ======================================== */
    a:focus-visible,
    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible{
      outline:2px solid #991b1b;
      outline-offset:2px;
    }

    @media (prefers-reduced-motion:reduce){
      *{transition:none !important}
    }
  </style>
</head>
<body>

  <div id="hm-shell-header"></div>

  <main class="tt-wrap" role="main">
    <!-- HERO -->
    <section class="tt-hero" aria-labelledby="tt-title">
      <div class="tt-hero-header">
        <h1 id="tt-title">ThreadTalk</h1>
        <form class="tt-search" role="search">
          <label class="sr-only" for="threadSearch">Search</label>
          <input
            id="threadSearch"
            class="tt-search-input"
            type="search"
            placeholder="Search posts…"
            autocomplete="off"
          />
        </form>
      </div>

      <form class="composer" id="composer" aria-label="Create a thread">
        <div class="row">
          <select id="composeCategory" aria-label="Category">
            <option value="">Category</option>
            <option value="showcase">Showcase</option>
            <option value="tailoring">Tailoring</option>
            <option value="stitch-school">Stitch School</option>
            <option value="fabric-sos">Fabric SOS</option>
            <option value="before-after">Before &amp; After</option>
            <option value="pattern-hacks">Pattern Hacks</option>
            <option value="stash-confessions">Stash Confessions</option>
            <option value="loose-threads">Loose Threads</option>
          </select>

          <div class="composer-main">
            <label class="composer-title-label" for="composeTitle">Title</label>
            <input id="composeTitle" class="composer-title" type="text" maxlength="120" placeholder="Give your post a title"/>
            <textarea id="composeText" placeholder="What's on your mind?"></textarea>
          </div>
        </div>

        <div class="preview-wrap" id="mediaPreview" hidden></div>

        <div class="actions">
          <div class="left-actions">
            <label class="icon-btn" id="photoBtn" title="Add photo">
              <input type="file" id="photoInput" accept="image/*" hidden>
              <svg class="icon-photo" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm8 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/>
              </svg>
            </label>
            <label class="icon-btn" id="videoBtn" title="Add video">
              <input type="file" id="videoInput" accept="video/*" hidden>
              <svg class="icon-video" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15 10.5v-2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-2l5 3v-9l-5 3z"/>
              </svg>
            </label>
          </div>
          <button type="submit" class="tt-post" id="postBtn">Post</button>
        </div>
      </form>
    </section>

    <!-- TOPICS - Horizontal pills -->
    <section class="topics" id="topics" aria-label="Topics">
      <div class="topics-grid">
        <a class="topic" href="showcase.html"><span class="title">Showcase</span></a>
        <a class="topic" href="tailoring.html"><span class="title">Tailoring</span></a>
        <a class="topic" href="stitch-school.html"><span class="title">Stitch School</span></a>
        <a class="topic" href="fabric-sos.html"><span class="title">Fabric SOS</span></a>
        <a class="topic" href="before-after.html"><span class="title">Before &amp; After</span></a>
        <a class="topic" href="pattern-hacks.html"><span class="title">Pattern Hacks</span></a>
        <a class="topic" href="stash-confessions.html"><span class="title">Stash Confessions</span></a>
        <a class="topic" href="loose-threads.html"><span class="title">Loose Threads</span></a>
      </div>
    </section>

    <!-- FEED -->
    <section class="feed" id="feed" aria-labelledby="feed-title">
      <h2 id="feed-title">Latest Threads</h2>
      <div class="cards" id="cards" aria-live="polite"></div>
      <div id="emptyState">No threads yet. Be the first to post!</div>
    </section>
  </main>

  <div id="hm-shell-footer"></div>

  <div id="toast" class="toast" role="status" aria-live="polite">Posted</div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="scripts/hm-shell.js"></script>

  <script>
    window.HM && window.HM.renderShell({ currentPage: "threadtalk" });
  </script>

  <script src="scripts/threadtalk.js"></script>
</body>
</html>
