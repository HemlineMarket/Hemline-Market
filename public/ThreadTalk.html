<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>ThreadTalk — Hemline Market</title>

  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>

  <!-- Shared site styles (same stack as index.html) -->
  <link rel="stylesheet" href="styles/hm-modern.css"/>
  <link rel="stylesheet" href="styles/hm-header.css"/>
  <link rel="stylesheet" href="styles/hm-typography.css"/>
  <link rel="stylesheet" href="styles/hm-footer.css"/>
  <!-- ThreadTalk-specific styles -->
  <link rel="stylesheet" href="styles/threadtalk.css"/>
</head>
<body>

  <!-- UNIVERSAL HEADER injected by hm-shell.js -->
  <div id="hm-shell-header"></div>

  <main class="tt-wrap" role="main">
    <!-- HERO + search + Composer -->
    <section class="tt-hero" aria-labelledby="tt-title">
      <div class="tt-hero-header">
        <div class="tt-hero-left">
          <h1 id="tt-title">ThreadTalk</h1>
          <p class="sub">Chat fabric, fit, and everything in between.</p>
        </div>

        <div class="tt-hero-right">
          <form class="tt-search" role="search">
            <span class="tt-search-label">ThreadTalk search</span>
            <label class="sr-only" for="threadSearch">Search ThreadTalk</label>
            <input
              id="threadSearch"
              class="tt-search-input"
              type="search"
              placeholder="Search titles &amp; posts…"
              autocomplete="off"
            />
          </form>
        </div>
      </div>

      <form class="composer" id="composer" aria-label="Create a thread">
        <div class="row">
          <select id="composeCategory" aria-label="Category">
            <option value="">Category (optional) — blank defaults to Loose Threads</option>
            <option value="showcase">Showcase</option>
            <option value="tailoring">Tailoring</option>
            <option value="stitch-school">Stitch School</option>
            <option value="fabric-sos">Fabric SOS</option>
            <option value="before-after">Before &amp; After</option>
            <option value="pattern-hacks">Pattern Hacks</option>
            <option value="stash-confessions">Stash Confessions</option>
            <option value="loose-threads">Loose Threads</option>
          </select>

          <div class="composer-main">
            <label class="composer-title-label" for="composeTitle">Post title</label>
            <input id="composeTitle" class="composer-title" type="text" maxlength="120"/>
            <textarea id="composeText" placeholder="Share what you’re working on, stuck on, or proud of. Add #hashtags if you want."></textarea>
          </div>
        </div>

        <div class="preview-wrap" id="mediaPreview" hidden></div>

        <div class="actions">
          <div class="left-actions">
            <label class="icon-btn" id="photoBtn" title="Add photo">
              <input type="file" id="photoInput" accept="image/*" hidden>
              <svg class="icon-photo" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm8 3a4 4 0 1 0 .001 8.001A4 4 0 0 0 12 8z"/>
              </svg>
            </label>
            <label class="icon-btn" id="videoBtn" title="Add video">
              <input type="file" id="videoInput" accept="video/*" hidden>
              <svg class="icon-video" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M15 10.5v-2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-2l5 3v-9l-5 3z"/>
              </svg>
            </label>
          </div>
          <div class="right-actions">
            <button type="submit" class="tt-post" id="postBtn">Post</button>
          </div>
        </div>
      </form>
    </section>

    <!-- TOPICS -->
    <section class="topics" id="topics" aria-label="Popular topics">
      <div class="topics-grid">
        <a class="topic" href="showcase.html" aria-label="Showcase">
          <strong class="title">Showcase</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M28 10c4 0 8 3 8 7s-4 7-8 7-8-3-8-7 4-7 8-7zM24 25c-2 8 16 8 14 0M28 10v-4M28 32v14M22 46h12M26 46v8M32 46v8"/>
          </svg>
        </a>

        <a class="topic" href="tailoring.html" aria-label="Tailoring">
          <strong class="title">Tailoring</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M10 46c12-10 22-10 34 0" />
            <path d="M14 50h24M14 54h18" />
            <circle cx="46" cy="46" r="6"/>
          </svg>
        </a>

        <a class="topic" href="stitch-school.html" aria-label="Stitch School">
          <strong class="title">Stitch School</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M18 14c20 8 28 18 28 36" />
            <path d="M36 12l-8 40" />
            <circle cx="36" cy="12" r="2"/>
          </svg>
        </a>

        <a class="topic" href="fabric-sos.html" aria-label="Fabric SOS">
          <strong class="title">Fabric SOS</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <rect x="14" y="14" width="28" height="18" rx="2"/>
            <rect x="18" y="18" width="28" height="18" rx="2"/>
          </svg>
        </a>

        <a class="topic" href="before-after.html" aria-label="Before & After">
          <strong class="title">Before &amp; After</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <rect x="12" y="14" width="40" height="28" rx="2"/>
            <path d="M32 14v28M20 20l6 6M38 34l6 6"/>
          </svg>
        </a>

        <a class="topic" href="pattern-hacks.html" aria-label="Pattern Hacks">
          <strong class="title">Pattern Hacks</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M18 40l10-10M18 20l10 10M34 30l12-8M34 30l12 8"/>
            <path d="M46 18l2 2M50 22l2 2M46 26l2 2"/>
          </svg>
        </a>

        <a class="topic" href="stash-confessions.html" aria-label="Stash Confessions">
          <strong class="title">Stash Confessions</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M12 44h40M12 30h40M12 16h40"/>
            <rect x="14" y="18" width="8" height="8" rx="1"/>
            <rect x="24" y="18" width="10" height="8" rx="1"/>
            <rect x="36" y="18" width="14" height="8" rx="1"/>
          </svg>
        </a>

        <a class="topic" href="loose-threads.html" aria-label="Loose Threads">
          <strong class="title">Loose Threads</strong>
          <svg class="tile-art" viewBox="0 0 64 64" aria-hidden="true">
            <path d="M16 44h14a8 8 0 0 1-8 8h-6zM18 36v8h10v-8" />
            <rect x="38" y="36" width="6" height="12" rx="1"/>
            <rect x="46" y="36" width="6" height="12" rx="1"/>
          </svg>
        </a>
      </div>
    </section>

    <!-- FEED -->
    <section class="feed" id="feed" aria-labelledby="feed-title">
      <h2 id="feed-title">Latest Threads</h2>
      <div class="cards" id="cards" aria-live="polite"></div>
      <div id="emptyState" style="color:#7a6e68;font-size:14px;margin:12px 4px">
        No threads yet. Be the first to post!
      </div>
    </section>
  </main>

  <!-- UNIVERSAL FOOTER injected by hm-shell.js -->
  <div id="hm-shell-footer"></div>

  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true">Posted</div>

  <!-- Supabase JS (same as index.html) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Shared shell: universal header/footer + menu + header session + HM.supabase -->
  <script src="scripts/hm-shell.js"></script>

  <script>
    // Render shared header + footer FIRST (this also sets window.HM.supabase)
    window.HM && window.HM.renderShell({ currentPage: "threadtalk" });
  </script>

  <!-- ThreadTalk logic (Supabase threads + reactions/comments/edit/search) -->
  <script src="scripts/threadtalk.js"></script>
</body>
</html>
