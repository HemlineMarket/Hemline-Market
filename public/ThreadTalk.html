<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ThreadTalk — Hemline Market</title>
<link rel="icon" href="/favicon.ico"/>

<link rel="stylesheet" href="styles/hm-modern.css"/>
<link rel="stylesheet" href="styles/hem-header.css"/>
<link rel="stylesheet" href="styles/hm-typography.css"/>
<link rel="stylesheet" href="styles/hm-footer.css"/>

<style>
  :root{--ink:#3f2f2a;--border:#e8e0d9;--card:#fff;--bg:#fdfbf9;--brand:#991b1b}
  body{background:
      radial-gradient(1200px 420px at 50% -240px, rgba(153,27,27,.06) 0%, rgba(253,251,249,0) 60%),
      linear-gradient(180deg,var(--bg) 0%, #fff 100%);
    color:var(--ink)}
  .wrap-1200{max-width:1200px;margin:0 auto;padding:0 16px}
  .hm-header{min-height:56px;background:#fff;border-bottom:1px solid var(--border)}
  .hm-footer{background:#fff;border-top:1px solid var(--border);margin-top:28px}

  /* Hero */
  .hero{border:1px solid var(--border);border-radius:20px;box-shadow:0 10px 20px rgba(50,38,31,.07);
        background:radial-gradient(120% 150% at 50% 0%, #fff 0%, rgba(153,27,27,.05) 55%, #fff 100%);
        padding:20px}
  .hero h1{font-family:ui-serif,"Cormorant Garamond",Georgia,serif;font-size:clamp(30px,4.5vw,48px);text-align:center;margin:6px 0 8px}
  .sub{color:#7a6e68;text-align:center;margin:0 0 14px}

  /* Composer bar */
  .bar{display:flex;gap:10px;align-items:center;max-width:980px;margin:0 auto}
  .bar select,.bar input[type="text"]{
    border:1px solid var(--border);background:#fff;border-radius:14px;height:44px;padding:0 12px;font:inherit;color:var(--ink)}
  .bar select{padding-right:28px}
  .bar input[type="text"]{flex:1;min-width:0}
  .icon-btn{display:inline-grid;place-items:center;width:44px;height:44px;border:1px solid var(--border);
    border-radius:14px;background:#fff;cursor:pointer}
  .icon-btn svg{width:20px;height:20px}
  .post{height:44px;border-radius:14px;border:1px solid #2d2d2d;background:#2d2d2d;color:#fff;padding:0 16px;font-weight:700}
  .back{display:inline-block;margin:10px auto 0;padding:8px 12px;border-radius:10px;border:1px solid #1e293b;background:#1e293b;color:#fff}

  /* Topics grid */
  .topics{margin-top:22px}
  .topics-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
  .topic{display:block;text-decoration:none;color:var(--ink);background:#fff;border:1px solid var(--border);border-radius:16px;
         padding:18px 20px;box-shadow:0 10px 16px rgba(50,38,31,.06)}
  .topic strong{font-weight:800}

  /* Feed */
  .feed{margin-top:26px}
  .cards{display:flex;flex-direction:column;gap:14px;max-width:980px;margin:0 auto}
  .card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px 16px}
  .meta{display:flex;gap:8px;align-items:center;color:#7a6e68;font-size:13px;margin-bottom:4px}
  .avatar{width:26px;height:26px;border-radius:50%;border:1px solid var(--border);display:inline-grid;place-items:center;font-size:12px;font-weight:700}
  .cat{color:#991b1b;font-weight:800;text-decoration:none;margin-right:.35rem}
  .post-img,.post-video{width:100%;height:auto;border-radius:12px;margin:8px 0;border:1px solid var(--border)}
</style>
</head>
<body>

<header class="hm-header">
  <div class="wrap-1200" style="display:flex;align-items:center;justify-content:space-between;padding:0 12px">
    <div class="left" style="display:flex;align-items:center;gap:10px">
      <button id="openMenu" aria-label="Open menu" style="display:inline-grid;place-items:center;width:36px;height:36px;border:1px solid var(--border);border-radius:10px;background:#fff">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
      </button>
      <a class="hm-brand" href="index.html" style="font-size:24px;font-weight:800;text-decoration:none;color:#991b1b">Hemline Market</a>
    </div>
    <div class="right" style="display:flex;align-items:center;gap:14px">
      <a class="hm-icon" href="browse.html" aria-label="Browse">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="26" height="26" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.3-4.3"/></svg>
      </a>
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="26" height="26" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/></svg>
      </a>
      <a class="hm-icon" href="cart.html" aria-label="Cart">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="26" height="26" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="18" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
      </a>
      <a class="hm-btn-primary" href="sell.html" style="text-decoration:none;background:#2d2d2d;color:#fff;padding:8px 12px;border-radius:10px;border:1px solid #2d2d2d">Sell</a>
    </div>
  </div>
</header>

<main class="wrap-1200" style="margin:22px auto 44px">
  <section class="hero" aria-labelledby="tt-title">
    <h1 id="tt-title">ThreadTalk</h1>
    <p class="sub">Where makers gather to talk fabric, fit, and everything in between.</p>

    <form id="composer" class="bar" aria-label="Create a thread">
      <select id="composeCat" aria-label="Category">
        <option value="">Select…</option>
        <option value="Showcase">Showcase</option>
        <option value="Tailoring">Tailoring</option>
        <option value="Stitch School">Stitch School</option>
        <option value="Fabric SOS">Fabric SOS</option>
        <option value="Before &amp; After">Before &amp; After</option>
        <option value="Pattern Hacks">Pattern Hacks</option>
        <option value="Stash Confessions">Stash Confessions</option>
        <option value="Loose Threads">Loose Threads</option>
      </select>
      <input id="composeText" type="text" placeholder="What's on your mind?" autocomplete="off"/>
      <label class="icon-btn" title="Add photo">
        <input type="file" id="photoInput" accept="image/*" hidden>
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm8 3a4 4 0 1 0 .001 8.001A4 4 0 0 0 12 8z"/></svg>
      </label>
      <label class="icon-btn" title="Add video">
        <input type="file" id="videoInput" accept="video/*" hidden>
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15 10.5v-2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-2l5 3v-9l-5 3z"/></svg>
      </label>
      <button id="postBtn" class="post" type="submit">Post</button>
    </form>
  </section>

  <section class="topics" aria-label="Categories">
    <div class="topics-grid">
      <a class="topic" href="showcase.html"><strong>Showcase</strong></a>
      <a class="topic" href="tailoring.html"><strong>Tailoring</strong></a>
      <a class="topic" href="stitch-school.html"><strong>Stitch School</strong></a>
      <a class="topic" href="fabric-sos.html"><strong>Fabric SOS</strong></a>
      <a class="topic" href="before-after.html"><strong>Before &amp; After</strong></a>
      <a class="topic" href="pattern-hacks.html"><strong>Pattern Hacks</strong></a>
      <a class="topic" href="stash-confessions.html"><strong>Stash Confessions</strong></a>
      <a class="topic" href="loose-threads.html"><strong>Loose Threads</strong></a>
    </div>
  </section>

  <section class="feed" aria-labelledby="feed-title">
    <h2 id="feed-title" style="font-size:18px;margin:10px 0 12px 2px;color:#5a463d">Latest Threads</h2>
    <div id="cards" class="cards" aria-live="polite"></div>
    <div id="empty" style="color:#7a6e68;font-size:14px;text-align:left;max-width:980px;margin:6px auto 0">No threads yet. Be the first to post!</div>
  </section>
</main>

<footer class="hm-footer">
  <div class="wrap-1200" style="display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;padding:12px 16px">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a><a href="faq.html">FAQ</a><a href="contact.html">Contact</a><a href="terms.html">Terms</a><a href="privacy.html">Privacy</a>
    </nav>
  </div>
</footer>

<script>
(function(){
  // simple feed store
  const KEY = 'tt_posts_v1'; // all-thread feed
  const cards = document.getElementById('cards');
  const empty = document.getElementById('empty');
  const sel = document.getElementById('composeCat');
  const txt = document.getElementById('composeText');
  const photo = document.getElementById('photoInput');
  const video = document.getElementById('videoInput');

  function initials(name){ return (name||'AA').slice(0,2).toUpperCase(); }
  function render(p, toTop){
    const el = document.createElement('article');
    el.className = 'card';
    let media = '';
    if(p.media && p.media.type==='image'){ media = '<img class="post-img" alt="" src="'+p.media.url+'">'; }
    if(p.media && p.media.type==='video'){ media = '<video class="post-video" controls src="'+p.media.url+'"></video>'; }
    el.innerHTML =
      '<div class="meta"><div class="avatar">'+initials(p.user)+'</div><span>'+(p.user||'You')+'</span> • <a class="cat" href="#">['+p.category+']</a></div>'+
      '<div class="preview" style="white-space:pre-wrap">'+p.text+'</div>'+ media;
    if(toTop && cards.firstChild){ cards.insertBefore(el, cards.firstChild); } else { cards.appendChild(el); }
  }
  function load(){
    try{
      const arr = JSON.parse(localStorage.getItem(KEY)||'[]');
      if(arr.length){ empty.style.display='none'; arr.forEach(p=>render(p,false)); }
    }catch(e){}
  }
  function save(p){
    try{
      const arr = JSON.parse(localStorage.getItem(KEY)||'[]');
      arr.unshift(p);
      localStorage.setItem(KEY, JSON.stringify(arr));
    }catch(e){}
  }

  document.getElementById('composer').addEventListener('submit', function(e){
    e.preventDefault();
    const cat = sel.value || 'Loose Threads';
    const text = (txt.value||'').trim();
    if(!text) { txt.focus(); return; }
    let media = null;
    if(photo.files && photo.files[0]) media = {type:'image', url: URL.createObjectURL(photo.files[0])};
    if(video.files && video.files[0]) media = {type:'video', url: URL.createObjectURL(video.files[0])};
    const post = {category:cat, text, user:localStorage.getItem('tt_user')||'You', ts:Date.now(), media};
    empty.style.display='none';
    render(post, true);
    save(post);
    txt.value=''; photo.value=''; video.value='';
  });

  load();
})();
</script>
</body>
</html>
