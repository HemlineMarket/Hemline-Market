<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hemline Market — Browse</title>
<meta name="theme-color" content="#333333"/>
<style>
  :root{
    --hm-charcoal:#333333; --hm-rosewood:#65000b; --hm-hunter:#355e3b; --hm-black:#000;
    --hm-text:var(--hm-charcoal); --hm-muted:#6b7280; --hm-surface:#fff;
    --hm-border:1px solid rgba(0,0,0,.1); --hm-shadow:0 6px 16px rgba(0,0,0,.08);
    --gap:16px; --radius:14px; --header-h:88px;
  }
  *{box-sizing:border-box} html,body{margin:0;color:var(--hm-text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  a{text-decoration:none;color:#000} a:hover{color:var(--hm-rosewood)} img{max-width:100%;display:block}

  /* Header */
  .header{position:sticky;top:0;z-index:40;background:#fff;border-bottom:var(--hm-border);backdrop-filter:saturate(120%) blur(6px)}
  .header-inner{max-width:1200px;margin:0 auto;height:var(--header-h);display:flex;align-items:center;justify-content:space-between;padding:0 16px;gap:16px}
  .logo img{height:64px}
  .nav{display:flex;gap:22px;align-items:center}
  .nav a{font-weight:700}
  .list-btn{background:#65000b;color:#fff;border:1px solid #000;padding:10px 16px;border-radius:999px;font-weight:900}

  /* Layout */
  .wrap{max-width:1200px;margin:0 auto;padding:18px 16px;display:grid;grid-template-columns:320px 1fr;gap:20px}
  @media (max-width:980px){.wrap{grid-template-columns:1fr}}

  /* Filters panel */
  .panel{background:var(--hm-surface);border:var(--hm-border);border-radius:18px;box-shadow:var(--hm-shadow);padding:14px}
  .search-top{margin-bottom:10px}
  .input{width:100%;padding:12px 14px;border-radius:12px;border:var(--hm-border)}
  details{border-bottom:var(--hm-border);padding:6px 0}
  details:last-of-type{border-bottom:0}
  summary{list-style:none;cursor:pointer;font-weight:800;display:flex;align-items:center;justify-content:space-between;padding:8px 2px}
  .body{padding:8px 2px 12px;display:grid;gap:8px}
  .checklist{display:grid;gap:6px;max-height:230px;overflow:auto}
  .row{display:flex;align-items:center;gap:10px}
  .row input[type=checkbox], .row input[type=radio]{width:16px;height:16px}

  /* Color swatches grid */
  .swatches{display:grid;grid-template-columns:repeat(4, minmax(0,1fr));gap:10px}
  @media (max-width:360px){.swatches{grid-template-columns:repeat(3,1fr)}}
  .swatch{display:flex;align-items:center;gap:10px;cursor:pointer;border:var(--hm-border);border-radius:12px;padding:8px 10px}
  .swatch .dot{width:18px;height:18px;border-radius:999px;border:1px solid rgba(0,0,0,.2)}
  .swatch input{appearance:none;width:16px;height:16px;border-radius:4px;border:1px solid rgba(0,0,0,.25)}
  .swatch input:checked{background:#111;border-color:#111}

  /* Active chips */
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin:2px 0 10px}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#f6f6f6;border:var(--hm-border);font-size:12px}
  .chip button{border:0;background:transparent;cursor:pointer}

  /* Results */
  .toolbar{display:flex;justify-content:flex-end;margin-bottom:8px}
  .select{padding:10px 12px;border:var(--hm-border);border-radius:10px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
  @media (max-width:1100px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:640px){.grid{grid-template-columns:1fr}}
  .card{border:var(--hm-border);border-radius:12px;overflow:hidden;background:#fff}
  .thumb{height:180px;background:linear-gradient(0deg,#e9e9e9,#f5f5f5)}
  .body-card{padding:12px}
  .title{font-weight:700;margin:0 0 6px}
  .meta{color:var(--hm-muted);font-size:13px;margin:0 0 4px}
  .price{font-weight:800}
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <a class="logo" href="/"><img src="/logo.png" alt="Hemline Market logo"></a>
    <nav class="nav" aria-label="Primary">
      <a href="/new">New Arrivals</a>
      <a href="/atelier">My Atelier</a>
      <a href="/favorites">❤ Favorites</a>
      <a href="/account">My Account</a>
      <a class="list-btn" href="/list">List Item</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- Filters -->
  <aside class="panel" aria-label="Filters">
    <div class="search-top"><input id="q" class="input" type="search" placeholder="Search fabrics…"></div>

    <!-- Fabric Content (alphabetized) -->
    <details open>
      <summary>Fabric Content</summary>
      <div class="body checklist" id="contentList">
        <!-- injected -->
      </div>
    </details>

    <!-- Fabric Type -->
    <details open>
      <summary>Fabric Type</summary>
      <div class="body checklist" id="typeList">
        <!-- injected -->
      </div>
    </details>

    <!-- Color (swatch grid) -->
    <details>
      <summary>Color</summary>
      <div class="body swatches" id="colorList">
        <!-- injected -->
      </div>
    </details>

    <!-- Pattern -->
    <details>
      <summary>Pattern</summary>
      <div class="body checklist" id="patternList">
        <label class="row"><input type="radio" name="pattern" value="" checked><span>Any</span></label>
        <label class="row"><input type="radio" name="pattern" value="solid"><span>Solid</span></label>
        <label class="row"><input type="radio" name="pattern" value="print"><span>Print</span></label>
      </div>
    </details>
  </aside>

  <!-- Results -->
  <section>
    <div class="toolbar">
      <select id="sort" class="select" aria-label="Sort">
        <option value="">Featured</option>
        <option value="newest">Newest</option>
        <option value="price_asc">Price (Low → High)</option>
        <option value="price_desc">Price (High → Low)</option>
      </select>
    </div>
    <div id="chips" class="chips"></div>
    <div id="grid" class="grid"></div>
  </section>
</main>

<script>
(function(){
  /* ----------------- DATA LISTS (UI only; hook to your backend later) ----------------- */
  const FABRIC_CONTENT = [
    'Acetate','Acrylic','Alpaca','Bamboo','Cashmere','Cotton','Cupro','Elastane/Spandex',
    'Hemp','Leather','Linen','Modal','Mohair','Nylon','Polyamide','Polyester','Polyurethane',
    'Rayon/Viscose','Silk','Tencel/Lyocell','Triacetate','Wool'
  ].sort((a,b)=>a.localeCompare(b));

  const FABRIC_TYPE = [
    'Bouclé','Canvas','Chiffon','Corduroy','Crepe','Denim','Gabardine','Georgette',
    'Jersey','Lace','Leather','Organza','Poplin','Sateen','Satin','Tulle','Tweed','Twill',
    'Velvet','Voile'
  ].sort((a,b)=>a.localeCompare(b));

  const COLORS = [
    ['Black','#000'],['White','#fff'],['Ivory','#fbf6e8'],['Grey','#bdbdbd'],
    ['Brown','#8b5a2b'],['Pink','#f3a4b7'],['Red','#e11'],['Orange','#ff9800'],
    ['Yellow','#ffd600'],['Green','#0d6a2f'],['Blue','#1246ff'],['Purple','#6a1b9a'],
    ['Gold','linear-gradient(135deg,#d0a84f,#ffe49b)'],['Silver','linear-gradient(135deg,#d7d7d7,#f4f4f4)']
  ];

  /* Demo results */
  const DATA = [
    { id:'w1', title:'Italian Wool Crepe', price:45, yards:12, width:58, content:['Wool'], type:['Crepe'], color:'Black', pattern:'solid' },
    { id:'s1', title:'Silk Satin', price:60, yards:8, width:54, content:['Silk'], type:['Satin'], color:'Red', pattern:'print' },
    { id:'c1', title:'Cotton Poplin', price:18, yards:20, width:44, content:['Cotton'], type:['Poplin'], color:'Blue', pattern:'solid' }
  ];

  /* ----------------- DOM helpers ----------------- */
  const $ = (s, r=document)=>r.querySelector(s);
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));

  const qEl = $('#q'), sortEl = $('#sort'), chipsEl = $('#chips'), gridEl = $('#grid');

  /* Build filter UIs */
  const contentList = $('#contentList');
  FABRIC_CONTENT.forEach(name=>{
    const lab = document.createElement('label'); lab.className='row';
    lab.innerHTML = `<input type="checkbox" name="content" value="${name}"><span>${name}</span>`;
    contentList.appendChild(lab);
  });

  const typeList = $('#typeList');
  FABRIC_TYPE.forEach(name=>{
    const lab = document.createElement('label'); lab.className='row';
    lab.innerHTML = `<input type="checkbox" name="type" value="${name}"><span>${name}</span>`;
    typeList.appendChild(lab);
  });

  const colorList = $('#colorList');
  COLORS.forEach(([name,fill])=>{
    const lab = document.createElement('label'); lab.className='swatch';
    lab.innerHTML = `
      <input type="checkbox" name="color" value="${name}">
      <span class="dot" style="background:${fill}"></span>
      <span>${name}</span>`;
    colorList.appendChild(lab);
  });

  /* Chips */
  function setChip(key, label, clearFn){
    chipsEl.querySelectorAll(`[data-key="${key}"]`).forEach(n=>n.remove());
    if(!label) return;
    const el=document.createElement('span');
    el.className='chip'; el.dataset.key=key;
    el.innerHTML=`<span>${label}</span><button type="button" aria-label="Clear ${label}">✕</button>`;
    el.querySelector('button').onclick=()=>{ clearFn(); el.remove(); apply(); };
    chipsEl.appendChild(el);
  }

  function collect(){
    const query = { q:qEl.value.trim(), sort:sortEl.value };
    ['content','type','color'].forEach(name=>{
      const vals = $$(`input[name="${name}"]:checked`).map(i=>i.value);
      if(vals.length) query[name]=vals;
    });
    const pat = $(`input[name="pattern"]:checked`)?.value||'';
    if(pat) query.pattern = pat;
    return query;
  }

  function updateChips(q){
    setChip('q', q.q ? `Search: ${q.q}` : '', ()=>{ qEl.value=''; });
    setChip('content', q.content?.length? `Content: ${q.content.join(', ')}`:'', ()=>{ $$('input[name="content"]').forEach(i=>i.checked=false); });
    setChip('type', q.type?.length? `Type: ${q.type.join(', ')}`:'', ()=>{ $$('input[name="type"]').forEach(i=>i.checked=false); });
    setChip('color', q.color?.length? `Color: ${q.color.join(', ')}`:'', ()=>{ $$('input[name="color"]').forEach(i=>i.checked=false); });
    setChip('pattern', q.pattern? `Pattern: ${q.pattern}`:'', ()=>{ $('input[name="pattern"][value=""]').checked=true; });
  }

  function filterRows(q){
    let rows = DATA.slice();
    if(q.q){
      const t = q.q.toLowerCase();
      rows = rows.filter(r=>{
        const hay = [r.title, ...(r.content||[]), ...(r.type||[])].join(' ').toLowerCase();
        return hay.includes(t);
      });
    }
    if(q.content) rows = rows.filter(r => (r.content||[]).some(v => q.content.includes(v)));
    if(q.type) rows = rows.filter(r => (r.type||[]).some(v => q.type.includes(v)));
    if(q.color) rows = rows.filter(r => q.color.includes(r.color));
    if(q.pattern) rows = rows.filter(r => r.pattern===q.pattern);

    switch(q.sort){
      case 'price_asc': rows.sort((a,b)=>a.price-b.price); break;
      case 'price_desc': rows.sort((a,b)=>b.price-a.price); break;
      case 'newest': rows.sort((a,b)=> (b.id > a.id ? 1 : -1)); break; // demo
      default: break;
    }
    return rows;
  }

  function render(rows){
    gridEl.innerHTML = rows.map(r=>`
      <article class="card">
        <div class="thumb" role="img" aria-label="${r.title} swatch"></div>
        <div class="body-card">
          <p class="title">${r.title}</p>
          <p class="meta">${r.yards} yd • ${r.width}″</p>
          <p class="price">$${r.price} / yd</p>
        </div>
      </article>`).join('');
  }

  function apply(){
    const q = collect();
    updateChips(q);
    const rows = filterRows(q);
    render(rows);
  }

  // Wire events
  [qEl, sortEl].forEach(el=> el.addEventListener('input', apply));
  ['content','type','color','pattern'].forEach(name=>{
    document.addEventListener('change', e=>{
      if(e.target && e.target.name===name) apply();
    });
  });

  // Initial paint
  apply();
})();
</script>
</body>
</html>
