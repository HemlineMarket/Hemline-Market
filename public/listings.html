<script>
async function loadListings() {
  const { data, error } = await window.supa
    .from("listings")
    .select("id, title, price, image_url");

  if (error) {
    console.error("Error loading listings:", error);
    return;
  }

  const grid = document.querySelector(".grid");
  grid.innerHTML = "";

  data.forEach(item => {
    grid.innerHTML += `
      <div class="relative border rounded-lg overflow-hidden shadow">
        <img src="${item.image_url}" alt="${item.title}" class="w-full h-48 object-cover">
        <div class="p-3">
          <div class="font-semibold">${item.title}</div>
          <div class="text-pink-600 font-bold">$${item.price ?? ""}</div>
        </div>
        <div class="fav" onclick="toggleFav(this)">â™¥</div>
      </div>
    `;
  });
}
loadListings();
</script>
