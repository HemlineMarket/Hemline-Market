<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hemline Market — Catalog</title>
  <script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <link rel="icon" href="/favicon.ico">
  <style>
    :root { --gap: 14px; --radius: 14px; --border: #e5e7eb; }
    body { font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; color:#111827; }
    header { position:sticky; top:0; background:#fff; border-bottom:1px solid var(--border); padding:12px 16px; z-index:10; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .filters { display:grid; grid-template-columns: repeat(6, 1fr); gap: var(--gap); }
    .filters > * { border:1px solid var(--border); border-radius: var(--radius); padding:8px 10px; background:#fff; }
    .filters label { display:block; font-size:12px; color:#6b7280; margin-bottom:6px; }
    .row { display:flex; gap: var(--gap); align-items:center; }
    .row input[type="number"] { width:100%; }
    .catalog { display:grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-top:18px; }
    .card { border:1px solid var(--border); border-radius:16px; overflow:hidden; background:#fff; display:flex; flex-direction:column; }
    .card img { width:100%; height:180px; object-fit:cover; background:#f3f4f6; }
    .card .info { padding:10px 12px; display:flex; flex-direction:column; gap:6px; }
    .pill { font-size:11px; padding:2px 8px; border:1px solid var(--border); border-radius:999px; color:#374151; width:max-content; }
    .toolbar { display:flex; gap:12px; align-items:center; margin-top:14px; }
    select, input, button { border:1px solid var(--border); border-radius:12px; padding:8px 10px; background:#fff; }
    button { cursor:pointer; }
    @media (max-width: 980px) {
      .filters { grid-template-columns: repeat(2, 1fr); }
      .catalog { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 600px) {
      .filters { grid-template-columns: 1fr; }
      .catalog { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="toolbar">
        <input id="q" type="search" placeholder="Search fabrics (content, title)…" />
        <select id="sort">
          <option value="newest">Newest</option>
          <option value="price_asc">Price: Low → High</option>
          <option value="price_desc">Price: High → Low</option>
        </select>
        <button id="reset">Reset</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="filters" id="filters">
      <div>
        <label>Fabric Content</label>
        <input id="fabric_content" type="text" placeholder="e.g., 70% viscose" />
      </div>
      <div>
        <label>Color Category</label>
        <select id="color_category">
          <option value="">Any</option>
          <option>black</option><option>white</option><option>ivory</option><option>beige</option>
          <option>brown</option><option>camel</option><option>grey</option><option>navy</option>
          <option>blue</option><option>green</option><option>olive</option><option>yellow</option>
          <option>orange</option><option>red</option><option>pink</option><option>burgundy</option>
          <option>purple</option><option>multi</option>
        </select>
      </div>
      <div>
        <label>Stretch</label>
        <select id="stretch">
          <option value="">Any</option>
          <option value="true">Stretch</option>
          <option value="false">No Stretch</option>
        </select>
      </div>
      <div>
        <label>Weight (GSM min)</label>
        <input id="weight_min" type="number" min="0" placeholder="e.g., 150" />
      </div>
      <div>
        <label>Weight (GSM max)</label>
        <input id="weight_max" type="number" min="0" placeholder="e.g., 350" />
      </div>
      <div>
        <label>Texture</label>
        <select id="texture">
          <option value="">Any</option>
          <option>smooth</option><option>twill</option><option>sateen</option>
          <option>crepe</option><option>bouclé</option><option>woolen</option>
          <option>poplin</option><option>denim</option><option>jersey</option>
        </select>
      </div>
      <div>
        <label>Drapiness</label>
        <select id="drapiness">
          <option value="">Any</option>
          <option>fluid</option><option>moderate</option><option>structured</option>
        </select>
      </div>
      <div>
        <label>Width (inches) ≥</label>
        <input id="width_min" type="number" min="0" step="0.5" placeholder="e.g., 44" />
      </div>
      <div>
        <label>Fiber Type</label>
        <select id="fiber_type">
          <option value="">Any</option>
          <option value="natural">natural</option>
          <option value="modified_natural">modified_natural</option>
          <option value="synthetic">synthetic</option>
          <option value="blend">blend</option>
        </select>
      </div>
      <div>
        <label>Country of Origin</label>
        <input id="country_of_origin" type="text" placeholder="e.g., Italy" />
      </div>
      <div>
        <label>Yards Available ≥</label>
        <input id="yards_min" type="number" min="0" step="0.25" placeholder="e.g., 1.0" />
      </div>
      <div>
        <label>Seller</label>
        <input id="seller" type="text" placeholder="seller id or name" />
      </div>
    </section>

    <section class="toolbar" style="justify-content: flex-end;">
      <button id="apply">Apply Filters</button>
    </section>

    <section id="results" class="catalog" aria-live="polite"></section>
  </main>

  <script>
    const SUPABASE_URL = window.ENV_SUPABASE_URL || localStorage.getItem('SUPABASE_URL');
    const SUPABASE_ANON_KEY = window.ENV_SUPABASE_ANON_KEY || localStorage.getItem('SUPABASE_ANON_KEY');
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth: { persistSession: false } });
  </script>
</body>
</html>
