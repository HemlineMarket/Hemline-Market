<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Auth — Hemline Market</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <!-- HEADER (no CSS; SVGs sized & colored explicitly) -->
  <header>
    <button id="openMenu" aria-label="Open menu">☰</button>
    <a href="index.html">Hemline Market</a>
    |
    <a href="browse.html" aria-label="Browse & search" title="Browse">
      <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#333" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.3-4.3"></path>
      </svg>
    </a>
    <a href="favorites.html" aria-label="Favorites" title="Favorites">
      <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#333" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
    </a>
    <a href="notifications.html" aria-label="Notifications" title="Notifications">
      <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#333" stroke-width="2">
        <path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
      </svg>
    </a>
    <a href="cart.html" aria-label="Cart" title="Cart">
      <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#333" stroke-width="2">
        <circle cx="9" cy="21" r="1"></circle><circle cx="18" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
    </a>
    <a id="avatar" href="dashboard.html" title="Account">AA</a>
    <a href="sell.html" title="Sell">Sell</a>
  </header>

  <!-- SIMPLE HAMBURGER SHEET (no CSS) -->
  <aside id="menuSheet" hidden>
    <button id="closeMenu" aria-label="Close menu">✕</button>
    <ul>
      <li><a href="browse.html">Browse</a></li>
      <li><a href="sell.html">Sell Fabric</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="how-it-works.html">How It Works</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <hr/>
  </aside>

  <main>
    <h1>Sign up / Log in</h1>
    <div id="status">Not logged in.</div>

    <h2>Sign Up</h2>
    <form id="signup">
      <input type="email" id="su-email" placeholder="Email" required>
      <input type="password" id="su-pass" placeholder="Password" required>
      <button>Sign Up</button>
    </form>

    <h2>Log In</h2>
    <form id="login">
      <input type="email" id="li-email" placeholder="Email" required>
      <input type="password" id="li-pass" placeholder="Password" required>
      <button>Log In</button>
    </form>

    <p><button id="logout">Log Out</button></p>
  </main>

  <!-- FOOTER (plain, no CSS) -->
  <footer>
    <p>© 2025 Hemline Market —
      <a href="about.html">About</a> ·
      <a href="faq.html">FAQ</a> ·
      <a href="contact.html">Contact</a> ·
      <a href="terms.html">Terms</a> ·
      <a href="privacy.html">Privacy</a>
    </p>
  </footer>

  <script>
    // Menu toggle (no CSS)
    const sheet = document.getElementById('menuSheet');
    document.getElementById('openMenu')?.addEventListener('click', () => sheet.hidden = false);
    document.getElementById('closeMenu')?.addEventListener('click', () => sheet.hidden = true);

    // Supabase client
    const supabase = window.supabase.createClient(
      "https://clkizksbvxjkoatdajgd.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNsa2l6a3Nidnhqa29hdGRhamdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2ODAyMDUsImV4cCI6MjA3MDI1NjIwNX0.m3wd6UAuqxa7BpcQof9mmzd8zdsmadwGDO0x7-nyBjI"
    );

    async function refreshStatus(){
      const { data: { session } } = await supabase.auth.getSession();
      document.getElementById('status').textContent =
        session && session.user ? `Logged in: ${session.user.email}` : 'Not logged in.';
    }
    refreshStatus();
    supabase.auth.onAuthStateChange(() => refreshStatus());

    document.getElementById("signup").onsubmit = async (e) => {
      e.preventDefault();
      const { error } = await supabase.auth.signUp({
        email: document.getElementById("su-email").value,
        password: document.getElementById("su-pass").value
      });
      alert(error ? error.message : "Check your email to confirm.");
    };

    document.getElementById("login").onsubmit = async (e) => {
      e.preventDefault();
      const { error } = await supabase.auth.signInWithPassword({
        email: document.getElementById("li-email").value,
        password: document.getElementById("li-pass").value
      });
      alert(error ? error.message : "Logged in!");
    };

    document.getElementById("logout").onclick = async () => {
      await supabase.auth.signOut();
      alert("Logged out.");
      refreshStatus();
    };
  </script>
</body>
</html>
