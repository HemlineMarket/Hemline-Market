<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hemline Market ‚Äî List an Item</title>
<meta name="theme-color" content="#333333"/>
<style>
  :root{
    --hm-charcoal:#333333; --hm-rosewood:#65000b; --hm-hunter:#355e3b; --hm-black:#000;
    --hm-bg:#fff; --hm-surface:#fff; --hm-text:var(--hm-charcoal); --hm-muted:#6b7280;
    --hm-border:1px solid rgba(0,0,0,.12); --hm-shadow:0 6px 16px rgba(0,0,0,.08);
    --hm-radius:14px; --hm-gap:14px; --hm-cta:#65000b;
  }
  *{box-sizing:border-box} html,body{margin:0;background:var(--hm-bg);color:var(--hm-text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  a{text-decoration:none;color:var(--hm-black)} a:hover{color:var(--hm-rosewood)}
  img{max-width:100%;display:block}

  /* Header (already approved) */
  .hm-header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:var(--hm-border)}
  .hm-header-inner{height:120px;max-width:1200px;margin:0 auto;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:18px;padding:0 16px}
  .hm-logo img{height:110px}
  .hm-nav{display:flex;gap:22px;align-items:center;justify-content:center}
  .hm-nav a{padding:8px 10px;border-radius:10px;font-weight:700}
  .hm-nav .cta{font-weight:900;padding:12px 18px;border-radius:999px;background:var(--hm-cta);color:#fff;border:1px solid var(--hm-black)}

  /* Layout */
  .wrap{max-width:1200px;margin:22px auto;padding:0 16px;display:grid;grid-template-columns:1.15fr .85fr;gap:22px}
  @media (max-width:980px){.wrap{grid-template-columns:1fr}}
  .card{background:#fff;border:var(--hm-border);border-radius:18px;box-shadow:var(--hm-shadow)}
  .card h2{margin:0;padding:16px 18px;border-bottom:var(--hm-border)}
  .card-body{padding:18px}

  /* Pretty ‚Äúfilter-style‚Äù sections */
  .section{border:var(--hm-border);border-radius:14px;padding:14px;margin-bottom:14px}
  .section-title{display:flex;align-items:center;justify-content:space-between;margin:0 0 10px 0;font-weight:800}
  .field{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .label{font-weight:700}
  .hint{font-size:12px;color:var(--hm-muted)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:640px){.row{grid-template-columns:1fr}}

  .input, .select, textarea{padding:12px 14px;border:var(--hm-border);border-radius:12px;font-size:14px;background:#fff}
  textarea{min-height:140px;resize:vertical}

  /* $ prefix input */
  .prefix{position:relative}
  .prefix .prefix-tag{position:absolute;inset:0 auto 0 10px;display:flex;align-items:center;color:#6b7280}
  .prefix input{padding-left:30px}

  /* Upload block */
  .uploader{border:2px dashed rgba(0,0,0,.15);border-radius:14px;padding:18px;text-align:center;background:#fafafa}
  .uploader.drag{background:#f1f7f3;border-color:var(--hm-hunter)}
  .uploader input[type=file]{display:none}
  .thumbs{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-top:12px}
  .t{position:relative;border:var(--hm-border);border-radius:12px;overflow:hidden;background:#fff}
  .t img{width:100%;height:120px;object-fit:cover}
  .t .remove{position:absolute;top:6px;right:6px;background:#fff;border:var(--hm-border);border-radius:999px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer}

  /* Color swatches */
  .swatches{display:grid;grid-template-columns:repeat(8, minmax(0,1fr));gap:10px}
  @media (max-width:720px){.swatches{grid-template-columns:repeat(5, minmax(0,1fr))}}
  .swatch{display:flex;align-items:center;gap:8px}
  .dot{width:18px;height:18px;border-radius:50%;border:1px solid rgba(0,0,0,.15)}
  .dot.black{background:#000}
  .dot.white{background:#fff}
  .dot.grey{background:#a1a1a1}
  .dot.cream{background:#f6f3e9}
  .dot.brown{background:#8a5a44}
  .dot.pink{background:#f6b6c6}
  .dot.red{background:#e21e2d}
  .dot.orange{background:#f59e0b}
  .dot.yellow{background:#f5d142}
  .dot.green{background:#2f8f2f}
  .dot.navy{background:#1b2a4a}
  .dot.blue{background:#2563eb}
  .dot.purple{background:#6d28d9}
  .dot.silver{background:linear-gradient(145deg,#bbb,#eee)}
  .dot.gold{background:linear-gradient(145deg,#d6b25e,#f7e7a2)}

  /* Buttons */
  .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .btn{border:var(--hm-border);background:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
  .btn-primary{background:var(--hm-cta);color:#fff;border-color:#000}
  .btn-primary[disabled]{opacity:.6;cursor:not-allowed}

  /* Preview */
  .preview .thumb{width:100%;height:200px;border-radius:12px;background:linear-gradient(0deg,#e9e9e9,#f5f5f5)}
  .meta{color:var(--hm-muted);font-size:13px}
  .price{font-weight:800}
</style>
</head>
<body>

<header class="hm-header">
  <div class="hm-header-inner">
    <a class="hm-logo" href="/" aria-label="Hemline Market home">
      <img src="/logo.png" alt="Hemline Market logo" onerror="this.style.display='none'">
    </a>
    <nav class="hm-nav">
      <a href="/new">New Arrivals</a>
      <a href="/atelier">My Atelier</a>
      <a href="/favorites">‚ù§ Favorites</a>
      <a href="/notifications">üîî Notifications</a>
      <a href="/account">My Account</a>
      <a class="cta" href="/list">List Item</a>
    </nav>
    <div style="width:36px;height:36px"></div>
  </div>
</header>

<main class="wrap">
  <!-- FORM SIDE -->
  <section class="card">
    <h2>List an Item</h2>
    <form id="sell-form" class="card-body" novalidate>
      <!-- Images -->
      <div class="section">
        <h3 class="section-title">Images</h3>
        <div class="hint" style="margin-bottom:10px">
          Please include: <strong>one close-up</strong> of weave/texture, <strong>one folded</strong> shot for thickness/hand, and <strong>one drape</strong> photo.
          Need a size reference? <a href="/ruler.pdf" download>Print this ruler</a>.
        </div>
        <div id="uploader" class="uploader">
          <input id="files" type="file" accept="image/*" multiple>
          <div>Drag & drop images here or</div>
          <button type="button" class="btn" id="pickFiles">Choose Images</button>
        </div>
        <div id="thumbs" class="thumbs"></div>
      </div>

      <!-- Description -->
      <div class="section">
        <h3 class="section-title">Description</h3>
        <div class="field">
          <label class="label" for="description">Details</label>
          <textarea id="description" class="input" placeholder="Mention drape, structure/hand, weave, care, defects, finish, stretch, end-use, etc."></textarea>
        </div>
        <div class="field" style="margin-top:10px">
          <label class="label" for="title">Title <span class="hint">(required)</span></label>
          <input id="title" class="input" placeholder="e.g., Italian Silk Twill ‚Äî Navy Chain" required>
        </div>
      </div>

      <!-- Pricing + Yards -->
      <div class="section">
        <h3 class="section-title">Price & Availability</h3>
        <div class="row">
          <div class="field">
            <label class="label" for="pricePerYd">Price (per yard) <span class="hint">(required)</span></label>
            <div class="prefix">
              <span class="prefix-tag">$</span>
              <input id="pricePerYd" type="number" min="0" step="0.01" class="input" placeholder="e.g., 48" required>
            </div>
          </div>
          <div class="field">
            <label class="label" for="yardsSelect">Yards Available <span class="hint">(0.5 increments, required)</span></label>
            <select id="yardsSelect" class="select"></select>
            <input type="hidden" id="yards">
          </div>
        </div>
        <div class="field" style="margin-top:10px">
          <label class="label">Selling Mode</label>
          <label><input type="radio" name="sellingMode" value="lot" checked> Sell all yardage together as one lot</label>
          <label style="margin-top:6px"><input type="radio" name="sellingMode" value="increments"> Sell in 0.5 yard increments (buyer chooses quantity)</label>
        </div>
      </div>

      <!-- Specs -->
      <div class="section">
        <h3 class="section-title">Specs</h3>
        <div class="row">
          <div class="field">
            <label class="label" for="widthIn">Width (inches)</label>
            <input id="widthIn" type="number" min="1" step="0.1" class="input" placeholder="e.g., 54">
            <div class="hint"><label><input type="checkbox" id="widthUnknown"> Unknown</label></div>
          </div>
          <div class="field">
            <label class="label" for="weightGsm">Weight (GSM)</label>
            <input id="weightGsm" type="number" min="0" step="1" class="input" placeholder="e.g., 95">
            <div class="hint"><label><input type="checkbox" id="weightUnknown"> Unknown</label></div>
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div class="field">
            <label class="label">Department</label>
            <div class="hint">Select at least one or mark Unknown</div>
            <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;margin-top:6px">
              <label><input type="checkbox" name="department" value="fashion"> Fashion</label>
              <label><input type="checkbox" name="department" value="home"> Home</label>
              <label><input type="checkbox" name="department" value="quilting"> Quilting</label>
              <label><input type="checkbox" name="department" value="notions"> Notions</label>
              <label><input type="checkbox" name="department" value="unknown"> Unknown</label>
            </div>
          </div>
          <div class="field">
            <label class="label">Country Made</label>
            <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;margin-top:6px">
              <label><input type="checkbox" name="country" value="france"> France</label>
              <label><input type="checkbox" name="country" value="italy"> Italy</label>
              <label><input type="checkbox" name="country" value="japan"> Japan</label>
              <label><input type="checkbox" name="country" value="uk"> UK</label>
              <label><input type="checkbox" name="country" value="usa"> USA</label>
              <label><input type="checkbox" name="country" value="other"> Other</label>
              <label><input type="checkbox" name="country" value="unknown"> Unknown</label>
            </div>
          </div>
        </div>

        <!-- Content -->
        <div class="field" style="margin-top:10px">
          <label class="label">Fabric Content (multi-select)</label>
          <div class="hint">Choose all that apply (Unknown and Other supported)</div>
          <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;max-height:260px;overflow:auto;margin-top:6px" id="content-list">
            <label><input type="checkbox" id="contentUnknown" value="unknown"> Unknown</label>
            <label><input type="checkbox" value="acetate"> Acetate</label>
            <label><input type="checkbox" value="acrylic"> Acrylic</label>
            <label><input type="checkbox" value="alpaca"> Alpaca</label>
            <label><input type="checkbox" value="bamboo"> Bamboo</label>
            <label><input type="checkbox" value="cashmere"> Cashmere</label>
            <label><input type="checkbox" value="cotton"> Cotton</label>
            <label><input type="checkbox" value="cupro"> Cupro</label>
            <label><input type="checkbox" value="elastane"> Elastane/Spandex</label>
            <label><input type="checkbox" value="hemp"> Hemp</label>
            <label><input type="checkbox" value="leather"> Leather</label>
            <label><input type="checkbox" value="linen"> Linen</label>
            <label><input type="checkbox" value="modal"> Modal</label>
            <label><input type="checkbox" value="mohair"> Mohair</label>
            <label><input type="checkbox" value="nylon"> Nylon</label>
            <label><input type="checkbox" value="polyamide"> Polyamide</label>
            <label><input type="checkbox" value="polyester"> Polyester</label>
            <label><input type="checkbox" value="polyurethane"> Polyurethane</label>
            <label><input type="checkbox" value="rayon"> Rayon/Viscose</label>
            <label><input type="checkbox" value="silk"> Silk</label>
            <label><input type="checkbox" value="tencel"> Tencel</label>
            <label><input type="checkbox" value="triacetate"> Triacetate</label>
            <label><input type="checkbox" value="wool"> Wool</label>
          </div>
          <div class="row" style="margin-top:6px">
            <div class="field">
              <label class="label">Other (content)</label>
              <input class="input" id="contentOther" placeholder="e.g., ramie blend">
            </div>
          </div>
        </div>

        <!-- Type -->
        <div class="field" style="margin-top:10px">
          <label class="label">Fabric Type (multi-select)</label>
          <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;max-height:260px;overflow:auto;margin-top:6px" id="type-list">
            <label><input type="checkbox" id="typeUnknown" value="unknown"> Unknown</label>
            <label><input type="checkbox" value="boucle"> Boucl√©</label>
            <label><input type="checkbox" value="canvas"> Canvas</label>
            <label><input type="checkbox" value="chiffon"> Chiffon</label>
            <label><input type="checkbox" value="corduroy"> Corduroy</label>
            <label><input type="checkbox" value="crepe"> Crepe</label>
            <label><input type="checkbox" value="denim"> Denim</label>
            <label><input type="checkbox" value="gabardine"> Gabardine</label>
            <label><input type="checkbox" value="georgette"> Georgette</label>
            <label><input type="checkbox" value="jersey"> Jersey</label>
            <label><input type="checkbox" value="lace"> Lace</label>
            <label><input type="checkbox" value="leather"> Leather</label>
            <label><input type="checkbox" value="organza"> Organza</label>
            <label><input type="checkbox" value="poplin"> Poplin</label>
            <label><input type="checkbox" value="sateen"> Sateen</label>
            <label><input type="checkbox" value="satin"> Satin</label>
            <label><input type="checkbox" value="tulle"> Tulle</label>
            <label><input type="checkbox" value="tweed"> Tweed</label>
            <label><input type="checkbox" value="twill"> Twill</label>
            <label><input type="checkbox" value="velvet"> Velvet</label>
            <label><input type="checkbox" value="voile"> Voile</label>
          </div>
          <div class="row" style="margin-top:6px">
            <div class="field">
              <label class="label">Other (type)</label>
              <input class="input" id="typeOther" placeholder="e.g., ottoman weave">
            </div>
          </div>
        </div>

        <!-- Color -->
        <div class="section">
          <h3 class="section-title">Color</h3>
          <div class="swatches" id="color-swatches">
            <!-- Unknown -->
            <label class="swatch"><input type="checkbox" value="unknown"> <span>Unknown</span></label>
            <label class="swatch"><input type="checkbox" value="black"><span class="dot black"></span><span>Black</span></label>
            <label class="swatch"><input type="checkbox" value="white"><span class="dot white"></span><span>White</span></label>
            <label class="swatch"><input type="checkbox" value="grey"><span class="dot grey"></span><span>Grey</span></label>
            <label class="swatch"><input type="checkbox" value="cream"><span class="dot cream"></span><span>Cream</span></label>
            <label class="swatch"><input type="checkbox" value="brown"><span class="dot brown"></span><span>Brown</span></label>
            <label class="swatch"><input type="checkbox" value="pink"><span class="dot pink"></span><span>Pink</span></label>
            <label class="swatch"><input type="checkbox" value="red"><span class="dot red"></span><span>Red</span></label>
            <label class="swatch"><input type="checkbox" value="orange"><span class="dot orange"></span><span>Orange</span></label>
            <label class="swatch"><input type="checkbox" value="yellow"><span class="dot yellow"></span><span>Yellow</span></label>
            <label class="swatch"><input type="checkbox" value="green"><span class="dot green"></span><span>Green</span></label>
            <label class="swatch"><input type="checkbox" value="navy"><span class="dot navy"></span><span>Navy</span></label>
            <label class="swatch"><input type="checkbox" value="blue"><span class="dot blue"></span><span>Blue</span></label>
            <label class="swatch"><input type="checkbox" value="purple"><span class="dot purple"></span><span>Purple</span></label>
            <label class="swatch"><input type="checkbox" value="silver"><span class="dot silver"></span><span>Silver</span></label>
            <label class="swatch"><input type="checkbox" value="gold"><span class="dot gold"></span><span>Gold</span></label>
          </div>
        </div>

        <!-- Condition & Pattern -->
        <div class="section">
          <h3 class="section-title">Condition & Pattern</h3>
          <div class="row">
            <div class="field">
              <label class="label">Condition</label>
              <label><input type="radio" name="condition" value="new" checked> New</label>
              <label><input type="radio" name="condition" value="washed"> Washed</label>
              <label><input type="radio" name="condition" value="used"> Used</label>
              <label><input type="radio" name="condition" value="unknown"> Unknown</label>
            </div>
            <div class="field">
              <label class="label">Pattern</label>
              <label><input type="radio" name="pattern" value="solid" checked> Solid</label>
              <label><input type="radio" name="pattern" value="pattern"> Pattern</label>
              <label><input type="radio" name="pattern" value="unknown"> Unknown</label>
            </div>
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn" id="preview-btn">Preview</button>
          <button type="submit" class="btn btn-primary" id="publish-btn" disabled>Publish Listing</button>
        </div>
      </div>
    </form>
  </section>

  <!-- PREVIEW SIDE -->
  <aside class="card preview">
    <h2>Preview</h2>
    <div class="card-body">
      <div class="thumb" id="preview-thumb"></div>
      <h3 id="p-title" style="margin:12px 0 6px">Your Title</h3>
      <div class="meta" id="p-meta">0 yd ‚Ä¢ 0‚Ä≥ ‚Ä¢ ‚Äî</div>
      <div class="price" id="p-price">$0 / yd</div>
      <div class="meta" id="p-tags" style="margin-top:6px"></div>
      <p class="meta" id="p-desc" style="margin-top:8px"></p>
    </div>
  </aside>
</main>

<script>
(function(){
  const $=(s,r=document)=>r.querySelector(s);
  const $$=(s,r=document)=>Array.from(r.querySelectorAll(s));

  // Fill 0.5-step yards
  const yardsSelect = $('#yardsSelect'); const yardsHidden = $('#yards');
  if (yardsSelect) {
    const frag = document.createDocumentFragment();
    for (let v=0.5; v<=100; v+=0.5){ const o=document.createElement('option'); o.value=v.toFixed(1); o.textContent=v.toFixed(1); frag.appendChild(o); }
    yardsSelect.appendChild(frag); yardsSelect.value='0.5'; yardsHidden.value='0.5';
    yardsSelect.addEventListener('change',()=>yardsHidden.value=yardsSelect.value);
  }

  // Unknown toggles
  $('#widthUnknown')?.addEventListener('change',e=>{const i=$('#widthIn'); i.disabled=e.target.checked; if(e.target.checked) i.value='';});
  $('#weightUnknown')?.addEventListener('change',e=>{const i=$('#weightGsm'); i.disabled=e.target.checked; if(e.target.checked) i.value='';});
  function wireUnknown(id, containerSel){
    const unk=$(id); if(!unk) return;
    unk.addEventListener('change',()=>{
      $$(containerSel+' input[type="checkbox"]').forEach(cb=>{ if(cb!==unk){cb.disabled=unk.checked; if(unk.checked) cb.checked=false;} });
    });
  }
  wireUnknown('#contentUnknown','#content-list');
  wireUnknown('#typeUnknown','#type-list');

  // Uploader
  const uploader=$('#uploader'); const fileInput=$('#files'); const pickBtn=$('#pickFiles'); const thumbs=$('#thumbs'); let images=[];
  pickBtn?.addEventListener('click',()=>fileInput?.click());
  fileInput?.addEventListener('change',e=>addFiles(e.target.files));
  ['dragenter','dragover'].forEach(ev=>uploader?.addEventListener(ev,e=>{e.preventDefault();uploader.classList.add('drag');}));
  ['dragleave','drop'].forEach(ev=>uploader?.addEventListener(ev,e=>{e.preventDefault();uploader.classList.remove('drag');}));
  uploader?.addEventListener('drop',e=>addFiles(e.dataTransfer.files));

  function addFiles(list){ Array.from(list||[]).slice(0,12).forEach(f=>{const url=URL.createObjectURL(f); images.push({url});}); renderThumbs(); updatePreview(); }
  function renderThumbs(){
    thumbs.innerHTML=''; images.forEach((img,idx)=>{ const t=document.createElement('div'); t.className='t';
      const im=document.createElement('img'); im.src=img.url; const rm=document.createElement('button'); rm.className='remove'; rm.type='button'; rm.textContent='√ó';
      rm.addEventListener('click',()=>{images.splice(idx,1); renderThumbs(); updatePreview();}); t.appendChild(im); t.appendChild(rm); thumbs.appendChild(t);
    });
  }

  // Preview + validation
  function values(){
    const v={};
    v.title=$('#title')?.value?.trim()||'';
    v.pricePerYd=Number($('#pricePerYd')?.value||0);
    v.yards=Number($('#yards')?.value||0);
    v.widthIn=Number($('#widthIn')?.value||0);
    v.weightGsm=Number($('#weightGsm')?.value||0);
    v.department=$$('input[name="department"]:checked').map(i=>i.value);
    v.country=$$('input[name="country"]:checked').map(i=>i.value);
    v.content=$$('#content-list input[type="checkbox"]:checked').map(i=>i.value);
    v.type=$$('#type-list input[type="checkbox"]:checked').map(i=>i.value);
    v.colors=$$('#color-swatches input[type="checkbox"]:checked').map(i=>i.value);
    v.sellingMode=$('input[name="sellingMode"]:checked')?.value||'lot';
    v.desc=$('#description')?.value?.trim()||'';
    v.images=images.map(m=>m.url);
    v.contentOther=$('#contentOther')?.value?.trim()||'';
    v.typeOther=$('#typeOther')?.value?.trim()||'';
    return v;
  }
  function updatePreview(){
    const v=values();
    $('#p-title').textContent=v.title||'Your Title';
    $('#p-meta').textContent=`${v.yards||0} yd ‚Ä¢ ${v.widthIn||0}‚Ä≥ ‚Ä¢ ${(v.country[0]||'‚Äî').toUpperCase()}`;
    $('#p-price').textContent=`$${v.pricePerYd||0} / yd`;
    $('#p-tags').textContent=[v.type.join(', '), v.content.join(', '), v.colors.join(', '), v.sellingMode==='increments'?'0.5 yd increments':'sold as one lot'].filter(Boolean).join(' ‚Ä¢ ');
    $('#p-desc').textContent=v.desc||'';
    const th=$('#preview-thumb');
    if(v.images?.length){ th.style.background=`url('${v.images[0]}') center/cover no-repeat`; } else { th.style.background='linear-gradient(0deg,#e9e9e9,#f5f5f5)'; }
  }
  function validate(){
    const v=values(); const errs=[];
    if(!v.title) errs.push('title');
    if(isNaN(v.pricePerYd)||v.pricePerYd<0) errs.push('price');
    if(isNaN(v.yards)||v.yards<0.5) errs.push('yards');
    $('#publish-btn').disabled=errs.length>0;
    return !errs.length;
  }
  $('#sell-form')?.addEventListener('input',()=>{updatePreview(); validate();});
  $('#preview-btn')?.addEventListener('click',()=>{updatePreview(); validate();});
  $('#sell-form')?.addEventListener('submit',e=>{
    e.preventDefault(); updatePreview(); if(!validate()) return;
    const v=values();
    const payload={ ...v, content:[...v.content, ...(v.contentOther?[v.contentOther]:[])], type:[...v.type, ...(v.typeOther?[v.typeOther]:[])] };
    console.log('SELLER_PAYLOAD', payload);
    alert('‚úÖ Listing looks good. (Demo) Check console for payload.');
  });

  // init
  (function initYards(){ if(!yardsSelect) return; })();
  updatePreview(); validate();
})();
</script>

</body>
</html>
