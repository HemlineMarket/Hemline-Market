<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Stitch School — Hemline Market</title>
<link rel="icon" href="/favicon.ico"/>

<!-- shared styles -->
<link rel="stylesheet" href="styles/hm-modern.css"/>
<link rel="stylesheet" href="styles/hem-header.css"/>
<link rel="stylesheet" href="styles/hm-typography.css"/>
<link rel="stylesheet" href="styles/hm-footer.css"/>

<style>
:root{--ink:#3f2f2a;--muted:#7a6e68;--border:#e8e0d9;--bg:#fdfbf9}

body{
  background:
    radial-gradient(1200px 420px at 50% -240px, rgba(153,27,27,.06) 0%, rgba(253,251,249,0) 60%),
    linear-gradient(180deg, var(--bg) 0%, #fff 100%);
  color:var(--ink);
}
.wrap-1200{max-width:1200px;margin:0 auto;padding:0 16px}
.hm-header{min-height:56px;background:#fff;border-bottom:1px solid var(--border)}
.hm-footer{background:#fff;border-top:1px solid var(--border);margin-top:28px}

/* hero */
.hero{
  border:1px solid var(--border);
  border-radius:20px;
  box-shadow:0 10px 20px rgba(50,38,31,.07);
  background:radial-gradient(120% 150% at 50% 0%, #fff 0%, rgba(153,27,27,.05) 55%, #fff 100%);
  padding:20px;
}
.hero h1{
  font-family:ui-serif,"Cormorant Garamond",Georgia,serif;
  font-size:clamp(30px,4.5vw,48px);
  text-align:center;
  margin:6px 0 8px;
}
.sub{color:var(--muted);text-align:center;margin:0 0 10px}

/* compact composer (same as Tailoring) */
.bar{display:flex;gap:10px;align-items:center;max-width:980px;margin:0 auto}
.badge{
  height:44px;display:inline-grid;place-items:center;padding:0 16px;
  border:1px solid var(--border);border-radius:14px;background:#fff;font-weight:700
}
.bar input{
  flex:1;min-width:0;height:44px;border:1px solid var(--border);
  border-radius:14px;padding:0 12px;font:inherit
}
.icon-btn{
  display:inline-grid;place-items:center;width:44px;height:44px;
  border:1px solid var(--border);border-radius:14px;background:#fff;overflow:hidden
}
.icon-btn svg{width:20px;height:20px}     /* <- keeps camera/video small */
.post{
  height:44px;border-radius:14px;border:1px solid #2d2d2d;background:#2d2d2d;
  color:#fff;padding:0 16px;font-weight:700
}
.back{
  display:inline-block;margin:10px auto 0;padding:8px 12px;border-radius:10px;
  border:1px solid #1e293b;background:#1e293b;color:#fff
}

/* feed */
.section-title{font-weight:800;margin:22px 0 10px}
.cards{display:flex;flex-direction:column;gap:14px;max-width:980px;margin:0 auto}
.card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px 16px}
.meta{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:13px;margin-bottom:4px}
.avatar{width:26px;height:26px;border-radius:50%;border:1px solid var(--border);display:inline-grid;place-items:center;font-size:12px;font-weight:700}
.post-img,.post-video{width:100%;height:auto;border-radius:12px;margin:8px 0;border:1px solid var(--border)}
</style>
</head>
<body>

<!-- header -->
<header class="hm-header">
  <div class="wrap-1200" style="display:flex;align-items:center;justify-content:space-between;padding:0 12px">
    <a class="hm-brand" href="index.html" style="font-size:24px;font-weight:800;text-decoration:none;color:#991b1b">Hemline Market</a>
    <a class="hm-btn-primary" href="sell.html" style="text-decoration:none;background:#2d2d2d;color:#fff;padding:8px 12px;border-radius:10px;border:1px solid #2d2d2d">Sell</a>
  </div>
</header>

<main class="wrap-1200" style="margin:22px auto 44px">
  <section class="hero" aria-labelledby="title">
    <h1 id="title">Stitch School</h1>
    <p class="sub">Ask and teach—techniques, tools, and tips.</p>

    <div class="bar" role="form" aria-label="Create a post">
      <span class="badge" aria-hidden="true">Stitch School</span>
      <input id="text" type="text" autocomplete="off" placeholder="Ask a how-to or share a quick tip…"/>
      <label class="icon-btn" title="Add photo">
        <input id="photo" type="file" accept="image/*" hidden>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <rect x="3" y="7" width="18" height="14" rx="2"></rect>
          <path d="M3 10h18M8 7l2-2h4l2 2"></path>
          <circle cx="12" cy="14" r="3"></circle>
        </svg>
      </label>
      <label class="icon-btn" title="Add video">
        <input id="video" type="file" accept="video/*" hidden>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <rect x="3" y="5" width="14" height="14" rx="2"></rect>
          <path d="M17 8l4-2v12l-4-2z"></path>
        </svg>
      </label>
      <button id="postBtn" class="post">Post</button>
    </div>

    <a class="back" href="ThreadTalk.html">Back to ThreadTalk</a>
  </section>

  <h2 class="section-title">Latest Stitch School Posts</h2>
  <div id="cards" class="cards" aria-live="polite"></div>
  <div id="empty" style="color:#7a6e68;font-size:14px">No posts yet. Be the first to share!</div>
</main>

<!-- footer -->
<footer class="hm-footer">
  <div class="wrap-1200" style="display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;padding:12px 16px">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a><a href="faq.html">FAQ</a><a href="contact.html">Contact</a><a href="terms.html">Terms</a><a href="privacy.html">Privacy</a>
    </nav>
  </div>
</footer>

<script>
(function(){
  const cards = document.getElementById('cards');
  const empty = document.getElementById('empty');
  const text  = document.getElementById('text');
  const photo = document.getElementById('photo');
  const video = document.getElementById('video');
  const btn   = document.getElementById('postBtn');
  const KEY = 'tt_posts_stitchschool';

  function initials(s){ return (s||'AA').slice(0,2).toUpperCase(); }

  function render(p, toTop){
    const el = document.createElement('article');
    el.className='card';
    let media='';
    if(p.media){
      media = p.media.type==='image'
        ? `<img class="post-img" src="${p.media.url}" alt="post image"/>`
        : `<video class="post-video" controls src="${p.media.url}"></video>`;
    }
    el.innerHTML = `
      <div class="meta"><div class="avatar">${initials(p.user)}</div><span>${p.user||'You'}</span> • <span>just now</span></div>
      <div>${p.text}</div>
      ${media}
    `;
    if(toTop && cards.firstChild) cards.insertBefore(el, cards.firstChild);
    else cards.appendChild(el);
  }

  function load(){
    try{
      const arr = JSON.parse(localStorage.getItem(KEY)||'[]');
      if(arr.length){ empty.style.display='none'; arr.forEach(p=>render(p)); }
    }catch(e){}
  }

  function save(post){
    try{
      const arr = JSON.parse(localStorage.getItem(KEY)||'[]');
      arr.unshift(post);
      localStorage.setItem(KEY, JSON.stringify(arr));
    }catch(e){}
  }

  btn.addEventListener('click', () => {
    const val = (text.value||'').trim();
    if(!val) { text.focus(); return; }
    let media=null;
    if(photo.files && photo.files[0]) media = {type:'image', url: URL.createObjectURL(photo.files[0])};
    else if(video.files && video.files[0]) media = {type:'video', url: URL.createObjectURL(video.files[0])};

    const post = { text: val, media, user: localStorage.getItem('tt_user')||'You', ts: Date.now() };
    empty.style.display='none';
    render(post, true);
    save(post);
    text.value=''; photo.value=''; video.value='';
  });

  load();
})();
</script>
</body>
</html>
