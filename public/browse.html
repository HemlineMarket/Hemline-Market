<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Browse — Hemline Market</title>

<style>
  :root{
    --hm-accent:#991b1b;
    --hm-text:#111827;
    --hm-muted:#6b7280;
    --hm-border:#e5e7eb;
    --hm-chip:#ffffff;
    --hm-bg:#fafafa;
  }

  html,body{height:100%}
  body{
    margin:0;
    background:#fff;
    color:var(--hm-text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    -webkit-font-smoothing:antialiased;
  }

  /* Header */
  .hm-header{min-height:56px;background:#fff;border-bottom:1px solid var(--hm-border)}
  .hm-header .wrap{max-width:1200px;margin:0 auto;padding:0 12px;display:flex;align-items:center;justify-content:space-between}
  .left{display:flex;align-items:center;gap:10px}
  .hm-brand{font-size:20px;font-weight:800;color:var(--hm-accent);text-decoration:none}
  .hamburger{display:inline-grid;place-items:center;width:36px;height:36px;border:1px solid var(--hm-border);border-radius:10px;background:#fff;color:#374151}
  .hamburger svg{width:22px;height:22px;stroke-width:2}
  .right{display:flex;align-items:center;gap:14px}
  .hm-icon{color:#444;display:inline-grid;place-items:center}
  .hm-icon svg{width:22px;height:22px;stroke-width:2}
  .hm-avatar{width:28px;height:28px;border-radius:50%;border:1px solid var(--hm-border);background:#fff;color:#334155;display:inline-grid;place-items:center;font-weight:700;font-size:12px;text-decoration:none}

  /* Layout */
  .page{min-height:calc(100% - 56px - 56px); /* header+footer */}
  .wrap{max-width:1200px;margin:12px auto;padding:0 12px}
  .grid-2{display:grid;grid-template-columns:280px 1fr;gap:12px}
  @media (max-width:900px){ .grid-2{grid-template-columns:1fr} }

  /* Sidebar */
  .filters{background:#fff;border:1px solid var(--hm-border);border-radius:12px;padding:8px}
  .filters h3{margin:6px 8px 8px;font-size:13px;color:#374151}
  details{border:1px solid var(--hm-border);border-radius:10px;background:#fff;margin:8px 0}
  summary{list-style:none;padding:10px 12px;cursor:pointer;font-weight:700;font-size:13px;display:flex;align-items:center;justify-content:space-between}
  summary::marker, summary::-webkit-details-marker{display:none}
  summary .plus{font-weight:800;color:#6b7280}
  details[open] summary .plus{transform:rotate(45deg)}
  .pane{padding:8px 12px;border-top:1px solid var(--hm-border)}
  .check{display:flex;align-items:center;gap:8px;margin:6px 0;font-size:13px}
  .two-col{columns:2; column-gap:16px}
  .two-col .check{break-inside:avoid}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .field{display:flex;flex-direction:column;gap:4px;min-width:120px}
  .field input,.field select{padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px;background:#fff;font-size:13px}
  .actions{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
  .btn{padding:8px 12px;border-radius:10px;border:1px solid var(--hm-border);background:#fff;color:#374151;cursor:pointer;font-size:13px}
  .btn-primary{border-color:var(--hm-accent);background:var(--hm-accent);color:#fff}

  /* Color swatches */
  .swatches{display:flex;flex-wrap:wrap;gap:8px}
  .sw{position:relative;width:22px;height:22px;border-radius:6px;border:1px solid #d1d5db;box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);cursor:pointer}
  .sw[data-selected="true"]{outline:2px solid var(--hm-accent);outline-offset:2px}
  .sw .tip{position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:2px 6px;border-radius:4px;font-size:11px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .15s ease;z-index:10}
  .sw:hover .tip{opacity:1}

  /* Results */
  .results{background:#fff;border:1px solid var(--hm-border);border-radius:12px;padding:8px}
  .results h2{margin:6px 8px 8px;font-size:16px}
  .cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}
  @media (max-width:900px){ .cards{grid-template-columns:repeat(2,minmax(0,1fr))} }
  @media (max-width:560px){ .cards{grid-template-columns:1fr} }
  .card{border:1px solid var(--hm-border);border-radius:10px;overflow:hidden;background:#fff;text-decoration:none;color:#111827}
  .thumb{aspect-ratio:4/3;background:linear-gradient(180deg,#f8fafc,#eef2f7);display:grid;place-items:center;color:#6b7280}
  .info{padding:8px 10px}
  .title{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .meta{display:flex;justify-content:space-between;color:#6b7280;font-size:12px;margin-top:4px}

  /* Footer */
  .hm-footer{height:56px;background:#fff;border-top:1px solid var(--hm-border);display:flex;align-items:center}
  .hm-footer .footer-wrap{max-width:1200px;margin:0 auto;padding:0 12px;display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;width:100%}
  .hm-footer .footer-links a{color:#4b5563;text-decoration:none;margin-right:10px}
</style>
</head>
<body>

<header class="hm-header" role="banner">
  <div class="wrap">
    <div class="left">
      <button class="hamburger" id="openMenu" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6" x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
      <a class="hm-brand" href="index.html">Hemline Market</a>
    </div>
    <div class="right">
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/>
        </svg>
      </a>
      <a class="hm-icon" href="notifications.html" aria-label="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
      </a>
      <a class="hm-avatar" href="account.html">AA</a>
      <a class="hm-icon" style="border:1px solid var(--hm-accent);padding:6px 10px;border-radius:999px;background:var(--hm-accent);color:#fff;text-decoration:none" href="seller/index.html?list=new">Sell</a>
    </div>
  </div>
</header>

<div class="page">
  <div class="wrap grid-2">
    <!-- Sidebar -->
    <aside class="filters" aria-label="Filters">
      <h3>Filters</h3>

      <details>
        <summary>Department <span class="plus">+</span></summary>
        <div class="pane">
          <div class="check"><input type="radio" name="dept" value="" checked> Any</div>
          <div class="check"><input type="radio" name="dept" value="Fashion"> Fashion</div>
          <div class="check"><input type="radio" name="dept" value="Home"> Home</div>
          <div class="check"><input type="radio" name="dept" value="Quilting"> Quilting</div>
          <div class="check"><input type="radio" name="dept" value="Notions"> Notions</div>
        </div>
      </details>

      <details>
        <summary>Content <span class="plus">+</span></summary>
        <div class="pane two-col" id="contentChecks">
          <!-- populated by JS -->
        </div>
      </details>

      <details>
        <summary>Color Family <span class="plus">+</span></summary>
        <div class="pane">
          <div class="swatches" id="colorSwatches"></div>
        </div>
      </details>

      <details>
        <summary>$/yard <span class="plus">+</span></summary>
        <div class="pane row">
          <div class="field"><label>Min</label><input id="minPrice" type="number" min="0" step="1" placeholder="10"></div>
          <div class="field"><label>Max</label><input id="maxPrice" type="number" min="0" step="1" placeholder="100"></div>
        </div>
      </details>

      <details>
        <summary>Yards <span class="plus">+</span></summary>
        <div class="pane row">
          <div class="field" style="min-width:180px"><label>Min yards</label><input id="minYards" type="number" min="0" step="1" placeholder="e.g., 3"></div>
        </div>
      </details>

      <details>
        <summary>Width (in) <span class="plus">+</span></summary>
        <div class="pane row">
          <div class="field"><label>Min</label><input id="minWidth" type="number" min="0" step="1" placeholder="44"></div>
          <div class="field"><label>Max</label><input id="maxWidth" type="number" min="0" step="1" placeholder="60"></div>
        </div>
      </details>

      <details>
        <summary>Weight (GSM) <span class="plus">+</span></summary>
        <div class="pane row">
          <div class="field"><label>Min</label><input id="minGsm" type="number" min="0" step="1" placeholder="80"></div>
          <div class="field"><label>Max</label><input id="maxGsm" type="number" min="0" step="1" placeholder="400"></div>
        </div>
      </details>

      <details>
        <summary>Fabric Type <span class="plus">+</span></summary>
        <div class="pane">
          <select id="fabricType" style="width:100%;padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px">
            <option value="">Any</option>
            <option>Canvas</option><option>Chiffon</option><option>Corduroy</option>
            <option>Crepe</option><option>Denim</option><option>Flannel</option>
            <option>Georgette</option><option>Jersey</option><option>Lace</option>
            <option>Lawn</option><option>Organza</option><option>Poplin</option>
            <option>Sateen</option><option>Satin</option><option>Tulle</option>
            <option>Twill</option><option>Velvet</option><option>Voile</option>
          </select>
        </div>
      </details>

      <details>
        <summary>Fiber Type <span class="plus">+</span></summary>
        <div class="pane">
          <select id="fiberType" style="width:100%;padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px">
            <option value="">Any</option>
            <option>Natural</option><option>Modified Natural</option><option>Synthetic</option><option>Blend</option>
          </select>
        </div>
      </details>

      <details>
        <summary>Designer <span class="plus">+</span></summary>
        <div class="pane">
          <input id="designer" placeholder="e.g., Loro Piana" style="width:100%;padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px">
        </div>
      </details>

      <details>
        <summary>Country / Origin <span class="plus">+</span></summary>
        <div class="pane">
          <select id="origin" style="width:100%;padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px">
            <option value="">Any</option>
            <option>Italy</option><option>France</option><option>Japan</option><option>UK</option>
            <option>USA</option><option>India</option><option>China</option><option>Korea</option>
          </select>
        </div>
      </details>

      <details>
        <summary>Pattern <span class="plus">+</span></summary>
        <div class="pane">
          <select id="pattern" style="width:100%;padding:8px 10px;border:1px solid var(--hm-border);border-radius:10px">
            <option value="">Any</option>
            <option>Solid</option>
            <option>Printed</option>
          </select>
        </div>
      </details>

      <div class="actions">
        <button class="btn" id="clearFilters">Clear</button>
        <button class="btn btn-primary" id="applyFilters">Apply</button>
      </div>
    </aside>

    <!-- Results -->
    <section class="results">
      <h2>Browse <span id="count" style="color:var(--hm-muted);font-weight:600;font-size:13px"></span></h2>
      <div class="cards" id="cards"></div>
    </section>
  </div>
</div>

<footer class="hm-footer" role="contentinfo">
  <div class="footer-wrap">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="faq.html">FAQ</a>
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Terms</a>
      <a href="shipping.html">Shipping & Returns</a>
    </nav>
  </div>
</footer>

<script>
/* ---------- demo data (same three cards) ---------- */
const ITEMS = [
  {
    id:1,
    title:"Sample Wool Crepe",
    price:45,
    yards:8,
    width:54,
    gsm:210,
    content:["Wool"],
    color:"Brown",
    dept:"Fashion",
    fabricType:"Crepe",
    fiberType:"Natural",
    designer:"",
    origin:"Italy",
    pattern:"Solid"
  },
  {
    id:2,
    title:"Italian Silk Twill",
    price:68,
    yards:6,
    width:54,
    gsm:120,
    content:["Silk"],
    color:"Blue",
    dept:"Fashion",
    fabricType:"Twill",
    fiberType:"Natural",
    designer:"",
    origin:"Italy",
    pattern:"Printed"
  },
  {
    id:3,
    title:"Cotton Sateen",
    price:22,
    yards:12,
    width:58,
    gsm:160,
    content:["Cotton"],
    color:"White",
    dept:"Quilting",
    fabricType:"Sateen",
    fiberType:"Natural",
    designer:"",
    origin:"USA",
    pattern:"Solid"
  }
];

/* ---------- build sidebar controls ---------- */
const contentValues=[
  "Any","Acetate","Acrylic","Alpaca","Angora","Bamboo","Cashmere","Cotton","Cupro",
  "Hemp","Leather","Linen","Lurex","Modal","Mohair","Nylon","Polyester",
  "Rayon / Viscose","Silk","Spandex / Elastane","Tencel / Lyocell","Wool","Other Fibers"
];
const contentPane=document.getElementById('contentChecks');
contentValues.forEach(v=>{
  const id="ct_"+v.replace(/[^\w]/g,'_');
  const wrap=document.createElement('label');
  wrap.className='check';
  wrap.innerHTML=`<input type="checkbox" value="${v}" id="${id}"><span>${v}</span>`;
  contentPane.appendChild(wrap);
});

const colors=[
  {name:"Black",hex:"#000"},
  {name:"Grey",hex:"#9aa0a6"},
  {name:"White",hex:"#fff",border:"#d1d5db"},
  {name:"Cream",hex:"#f5efe4"},
  {name:"Brown",hex:"#7a4a2a"},
  {name:"Pink",hex:"#f4a4b6"},
  {name:"Red",hex:"#d21d2b"},
  {name:"Orange",hex:"#f27a22"},
  {name:"Yellow",hex:"#f3c321"},
  {name:"Green",hex:"#2f7d32"},
  {name:"Blue",hex:"#2166d1"},
  {name:"Purple",hex:"#6b2da8"},
  {name:"Gold",hex:"#e2c46d"},
  {name:"Silver",hex:"#d5d8de"}
];
const swRow=document.getElementById('colorSwatches');
colors.forEach(c=>{
  const sw=document.createElement('div');
  sw.className='sw';
  sw.style.background=c.hex;
  if(c.border) sw.style.borderColor=c.border;
  const tip=document.createElement('span');
  tip.className='tip'; tip.textContent=c.name;
  sw.appendChild(tip);
  sw.dataset.name=c.name;
  sw.addEventListener('click',()=>{ sw.dataset.selected = sw.dataset.selected ? '' : 'true'; });
  swRow.appendChild(sw);
});

/* ---------- parse filters from URL ---------- */
function getFiltersFromURL(){
  const u=new URL(location.href);
  const raw=u.searchParams.get('filters');
  if(!raw) return {};
  try{
    return JSON.parse(decodeURIComponent(raw));
  }catch(e){
    return {};
  }
}

/* ---------- set controls from incoming filters ---------- */
function applyIncomingFilters(f){
  if(!f) return;

  // Content (array of strings)
  if(Array.isArray(f.content)){
    f.content.forEach(v=>{
      const id="ct_"+String(v).replace(/[^\w]/g,'_');
      const el=document.getElementById(id);
      if(el) el.checked=true;
    });
  }

  // Colors
  if(Array.isArray(f.colors)){
    [...document.querySelectorAll('.sw')].forEach(sw=>{
      if(f.colors.includes(sw.dataset.name)) sw.dataset.selected='true';
    });
  }

  // Simple fields
  const map = {
    minPrice:'minPrice', maxPrice:'maxPrice', minYards:'minYards',
    minWidth:'minWidth', maxWidth:'maxWidth',
    minGsm:'minGsm', maxGsm:'maxGsm',
    fabricType:'fabricType', fiberType:'fiberType',
    designer:'designer', origin:'origin', pattern:'pattern'
  };
  Object.entries(map).forEach(([k,id])=>{
    if(f[k]!=null){
      const el=document.getElementById(id);
      if(el) el.value = f[k];
    }
  });

  // Department (radio)
  if(f.dept!=null){
    const radio = [...document.querySelectorAll('input[name="dept"]')]
      .find(r=>r.value===f.dept);
    if(radio) radio.checked=true;
  }
}

/* ---------- collect current filters from UI ---------- */
function collectFilters(){
  const selContent=[...document.querySelectorAll('#contentChecks input:checked')]
    .map(i=>i.value).filter(v=>v!=="Any");

  const selColors=[...document.querySelectorAll('.sw[data-selected="true"]')]
    .map(sw=>sw.dataset.name);

  const getVal=id=>{const el=document.getElementById(id); return el?el.value.trim():""};
  const getNum=id=>{const v=getVal(id); return v===""?null:Number(v)};

  const dept=([...document.querySelectorAll('input[name="dept"]')].find(r=>r.checked)||{value:""}).value;

  return {
    content: selContent,
    colors: selColors,
    minPrice: getNum('minPrice'),
    maxPrice: getNum('maxPrice'),
    minYards: getNum('minYards'),
    minWidth: getNum('minWidth'),
    maxWidth: getNum('maxWidth'),
    minGsm: getNum('minGsm'),
    maxGsm: getNum('maxGsm'),
    dept,
    fabricType: getVal('fabricType'),
    fiberType: getVal('fiberType'),
    designer: getVal('designer'),
    origin: getVal('origin'),
    pattern: getVal('pattern')
  };
}

/* ---------- filter logic ---------- */
function matches(item,f){
  // Content (all selected must be present)
  if(f.content && f.content.length){
    const has = f.content.some(v=>item.content.includes(v));
    if(!has) return false;
  }
  // Color
  if(f.colors && f.colors.length){
    if(!f.colors.includes(item.color)) return false;
  }
  // Numbers
  const within=(n,min,max)=> (min==null || n>=min) && (max==null || n<=max);
  if(!within(item.price,f.minPrice,f.maxPrice)) return false;
  if(f.minYards!=null && item.yards < f.minYards) return false;
  if(!within(item.width,f.minWidth,f.maxWidth)) return false;
  if(!within(item.gsm,f.minGsm,f.maxGsm)) return false;

  // Strings
  if(f.dept && item.dept!==f.dept) return false;
  if(f.fabricType && item.fabricType!==f.fabricType) return false;
  if(f.fiberType && item.fiberType!==f.fiberType) return false;
  if(f.origin && item.origin!==f.origin) return false;
  if(f.pattern && item.pattern!==f.pattern) return false;
  if(f.designer && !item.designer.toLowerCase().includes(f.designer.toLowerCase())) return false;

  return true;
}

/* ---------- render cards ---------- */
function render(items){
  const cards=document.getElementById('cards');
  cards.innerHTML='';
  if(!items.length){
    cards.innerHTML='<div style="padding:12px;color:#6b7280">No matches.</div>';
  }else{
    items.forEach(it=>{
      const a=document.createElement('a');
      a.href="item.html?id="+it.id;
      a.className='card';
      a.innerHTML=`
        <div class="thumb">photo</div>
        <div class="info">
          <div class="title">${it.title}</div>
          <div class="meta"><span>$${it.price}/yd</span><span>${it.width}″</span></div>
        </div>`;
      cards.appendChild(a);
    });
  }
  document.getElementById('count').textContent = ` · ${items.length} result${items.length===1?'':'s'}`;
}

/* ---------- wire up ---------- */
const incoming = getFiltersFromURL();
applyIncomingFilters(incoming);
render(ITEMS.filter(i=>matches(i, collectFilters())));

document.getElementById('applyFilters').addEventListener('click',()=>{
  const f=collectFilters();
  render(ITEMS.filter(i=>matches(i,f)));
});

document.getElementById('clearFilters').addEventListener('click',()=>{
  // clear content
  document.querySelectorAll('#contentChecks input[type="checkbox"]').forEach(c=>c.checked=false);
  // colors
  document.querySelectorAll('.sw').forEach(sw=>sw.removeAttribute('data-selected'));
  // radios
  const any=[...document.querySelectorAll('input[name="dept"]')][0]; if(any) any.checked=true;
  // text/selects
  ['minPrice','maxPrice','minYards','minWidth','maxWidth','minGsm','maxGsm','designer'].forEach(id=>{
    const el=document.getElementById(id); if(el) el.value='';
  });
  ['fabricType','fiberType','origin','pattern'].forEach(id=>{
    const el=document.getElementById(id); if(el) el.selectedIndex=0;
  });
  render(ITEMS);
});

/* open the panels if filters came in (nice touch) */
const anyIncoming = Object.values(incoming||{}).some(v=> (Array.isArray(v)?v.length:v));
if(anyIncoming){
  document.querySelectorAll('.filters details').forEach(d=>{
    d.open = false; // keep collapsed by default as requested
  });
}
</script>
</body>
</html>
