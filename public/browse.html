<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Browse Fabrics ‚Ä¢ Hemline Market</title>
  <style>
    :root{
      --container:1200px; --pad:20px; --brand:#800000;
      --ink:#111; --muted:#555; --card:#fff; --border:#e5e7eb; --radius:12px
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#f7f7f8}

    /* Header */
    header{
      position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid #eee;
      height:56px;display:flex;align-items:center
    }
    .container{max-width:var(--container);margin-inline:auto;padding-inline:var(--pad);width:100%}
    .nav-row{display:flex;align-items:center;justify-content:space-between}
    .brand{color:var(--brand);font-weight:800;text-decoration:none}
    .nav-right{display:flex;gap:14px;align-items:center}
    .icon-link{font-size:18px;text-decoration:none;color:var(--ink)}
    .cta-outline{color:var(--brand);border:2px solid var(--brand);padding:6px 12px;border-radius:8px;font-weight:800;text-decoration:none;background:#fff}

    /* Layout */
    .wrap{max-width:var(--container);margin-inline:auto;padding:24px var(--pad);display:grid;grid-template-columns:300px 1fr;gap:22px}
    @media (max-width:980px){.wrap{grid-template-columns:1fr}}
    .page-title{font-size:28px;font-weight:800;margin-bottom:10px}
    .subtitle{color:var(--muted);margin-bottom:18px}

    /* Sidebar filters */
    .filters{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:16px;position:sticky;top:72px;height:max-content}
    .f-head{font-weight:800;margin-bottom:10px}
    .f-group{border-top:1px solid var(--border);padding-top:12px;margin-top:12px}
    .f-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .chip{border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:13px;background:#fff;cursor:pointer}
    .chip.active{background:#111;color:#fff;border-color:#111}
    .range{display:flex;gap:8px}
    .range input{width:100%;padding:8px;border:1px solid var(--border);border-radius:8px}
    .apply{margin-top:12px;width:100%;background:var(--brand);color:#fff;border:0;border-radius:8px;padding:10px;font-weight:800;cursor:pointer}
    .clear{margin-top:8px;width:100%;background:#fff;color:#111;border:1px solid var(--border);border-radius:8px;padding:9px;font-weight:700;cursor:pointer}

    /* Results */
    .results-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;gap:12px}
    .searchbox{display:flex;gap:8px;align-items:center;flex:1;max-width:460px}
    .searchbox input{flex:1;border:1px solid var(--border);border-radius:999px;padding:10px 12px}
    .searchbox button{background:#000;color:#fff;border:0;border-radius:999px;padding:10px 14px;font-weight:700;cursor:pointer}
    .sort{border:1px solid var(--border);border-radius:8px;padding:9px 10px;background:#fff}

    .grid{display:grid;gap:16px;grid-template-columns:repeat(3,1fr)}
    @media (max-width:1080px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px}
    .thumb{width:100%;aspect-ratio:1/1;border:1px solid var(--border);border-radius:10px;background:#fafafa;display:block;object-fit:cover}
    .title{font-weight:800}
    .meta{font-size:12px;color:#777}
    .price{font-weight:800;margin-top:auto}
    .add{margin-top:6px;background:#5b21b6;color:#fff;border:0;border-radius:8px;padding:10px;font-weight:800;cursor:pointer}

    footer{margin-top:36px;border-top:1px solid #eee;background:#fff}
    .footer-links{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;padding:16px;color:#666}
    .footer-links a{color:#666;text-decoration:none}
    .copy{color:#777;text-align:center;padding:0 0 16px 0;font-size:13px}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav-row">
      <a class="brand" href="/">Hemline Market</a>
      <div class="nav-right">
        <a class="icon-link" href="/favorites.html" title="Favorites" aria-label="Favorites">‚ù§Ô∏è</a>
        <a class="icon-link" href="/notifications.html" title="Notifications" aria-label="Notifications">üîî</a>
        <a class="icon-link" href="/account.html" title="My Account" aria-label="My Account">üë§</a>
        <a class="cta-outline" href="/seller/list.html">List Item</a>
      </div>
    </div>
  </header>

  <div class="wrap">
    <!-- Sidebar -->
    <aside class="filters" id="filters">
      <div class="f-head">Filters</div>

      <div class="f-group">
        <div class="label"><strong>Material</strong></div>
        <div class="f-row" data-filter="material">
          <button class="chip">Silk</button>
          <button class="chip">Wool</button>
          <button class="chip">Cotton</button>
          <button class="chip">Linen</button>
          <button class="chip">Blend</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Color</strong></div>
        <div class="f-row" data-filter="color">
          <button class="chip">Black</button>
          <button class="chip">White</button>
          <button class="chip">Charcoal</button>
          <button class="chip">Red</button>
          <button class="chip">Green</button>
          <button class="chip">Blue</button>
          <button class="chip">Neutral</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Pattern</strong></div>
        <div class="f-row" data-filter="pattern">
          <button class="chip">Solid</button>
          <button class="chip">Stripe</button>
          <button class="chip">Check</button>
          <button class="chip">Floral</button>
          <button class="chip">Abstract</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Stretch</strong></div>
        <div class="f-row" data-filter="stretch">
          <button class="chip">No-stretch</button>
          <button class="chip">1-way</button>
          <button class="chip">2-way</button>
          <button class="chip">4-way</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Finish</strong></div>
        <div class="f-row" data-filter="finish">
          <button class="chip">Matte</button>
          <button class="chip">Satin</button>
          <button class="chip">Sheen</button>
          <button class="chip">Textured</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Country</strong></div>
        <div class="f-row" data-filter="country">
          <button class="chip">USA</button>
          <button class="chip">Italy</button>
          <button class="chip">Japan</button>
          <button class="chip">India</button>
          <button class="chip">UK</button>
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Width (in)</strong></div>
        <div class="range">
          <input type="number" id="wMin" placeholder="min">
          <input type="number" id="wMax" placeholder="max">
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Weight (gsm)</strong></div>
        <div class="range">
          <input type="number" id="gMin" placeholder="min">
          <input type="number" id="gMax" placeholder="max">
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Price ($)</strong></div>
        <div class="range">
          <input type="number" id="pMin" placeholder="min">
          <input type="number" id="pMax" placeholder="max">
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Yardage (min)</strong></div>
        <div class="range">
          <input type="number" id="yMin" placeholder="yards">
        </div>
      </div>

      <div class="f-group">
        <div class="label"><strong>Availability</strong></div>
        <div class="f-row" data-filter="availability">
          <button class="chip">In stock</button>
          <button class="chip">Made to order</button>
        </div>
      </div>

      <button class="apply" id="applyBtn">Apply Filters</button>
      <button class="clear" id="clearBtn">Clear All</button>
    </aside>

    <!-- Results -->
    <main>
      <div class="results-head">
        <div>
          <div class="page-title">Browse Fabrics</div>
          <div class="subtitle">Explore curated fabrics and handmade sewing items.</div>
        </div>
        <form class="searchbox" action="/browse.html" method="get">
          <input type="text" name="q" id="q" placeholder="Search‚Ä¶" />
          <button type="submit">Search</button>
        </form>
        <select id="sort" class="sort" aria-label="Sort results">
          <option value="relevance">Sort: Relevance</option>
          <option value="price-asc">Price: Low ‚Üí High</option>
          <option value="price-desc">Price: High ‚Üí Low</option>
          <option value="newest">Newest</option>
        </select>
      </div>

      <!-- Grid -->
      <div class="grid" id="product-grid">
        <!-- EXAMPLE CARDS (include data- attributes so filters work).
             Your backend can output real ones with the same attributes. -->
        <div class="card listing-card"
             data-material="Silk" data-color="Neutral" data-pattern="Solid" data-stretch="No-stretch"
             data-finish="Satin" data-country="Italy" data-width="44" data-weight="80"
             data-price="60" data-yards="3" data-availability="In stock" data-created="2025-08-15">
          <img class="thumb" src="/images/placeholder.png" alt="">
          <div class="title">Silk Charmeuse</div>
          <div class="meta">Italy ‚Ä¢ 44" ‚Ä¢ 80 gsm ‚Ä¢ Satin</div>
          <div class="price">$60.00</div>
          <button class="add">Add to Cart</button>
        </div>

        <div class="card listing-card"
             data-material="Cotton" data-color="Neutral" data-pattern="Solid" data-stretch="No-stretch"
             data-finish="Matte" data-country="Japan" data-width="45" data-weight="120"
             data-price="22" data-yards="6" data-availability="In stock" data-created="2025-08-11">
          <img class="thumb" src="/images/placeholder.png" alt="">
          <div class="title">Japanese Cotton Lawn</div>
          <div class="meta">Japan ‚Ä¢ 45" ‚Ä¢ 120 gsm ‚Ä¢ Matte</div>
          <div class="price">$22.00</div>
          <button class="add">Add to Cart</button>
        </div>

        <div class="card listing-card"
             data-material="Wool" data-color="Charcoal" data-pattern="Solid" data-stretch="No-stretch"
             data-finish="Sheen" data-country="Italy" data-width="58" data-weight="280"
             data-price="45" data-yards="4" data-availability="In stock" data-created="2025-08-10">
          <img class="thumb" src="/images/placeholder.png" alt="">
          <div class="title">Italian Wool Crepe</div>
          <div class="meta">Italy ‚Ä¢ 58" ‚Ä¢ 280 gsm ‚Ä¢ Sheen</div>
          <div class="price">$45.00</div>
          <button class="add">Add to Cart</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="/about.html">About</a> ‚Ä¢
        <a href="/contact.html">Contact</a> ‚Ä¢
        <a href="/faq.html">FAQ</a> ‚Ä¢
        <a href="/privacy.html">Privacy</a> ‚Ä¢
        <a href="/terms.html">Terms</a> ‚Ä¢
        <a href="/shipping.html">Shipping</a> ‚Ä¢
        <a href="/returns.html">Returns</a>
      </div>
      <div class="copy">¬© 2025 Hemline Market</div>
    </div>
  </footer>

  <script>
    // Prefill search from ?q=
    const params = new URLSearchParams(location.search);
    const q = params.get('q') || '';
    document.getElementById('q').value = q;

    // Chip toggles
    document.querySelectorAll('.chip').forEach(chip=>{
      chip.addEventListener('click', ()=> chip.classList.toggle('active'));
    });

    function getActive(filter){
      return [...document.querySelectorAll(`[data-filter="${filter}"] .chip.active`)]
             .map(c=>c.textContent.trim().toLowerCase());
    }

    function applyFilters(){
      const mats = getActive('material');
      const cols = getActive('color');
      const pats = getActive('pattern');
      const stre = getActive('stretch');
      const fini = getActive('finish');
      const cntr = getActive('country');
      const avai = getActive('availability');

      const wMin = parseFloat(document.getElementById('wMin').value)||-Infinity;
      const wMax = parseFloat(document.getElementById('wMax').value)||Infinity;
      const gMin = parseFloat(document.getElementById('gMin').value)||-Infinity;
      const gMax = parseFloat(document.getElementById('gMax').value)||Infinity;
      const pMin = parseFloat(document.getElementById('pMin').value)||-Infinity;
      const pMax = parseFloat(document.getElementById('pMax').value)||Infinity;
      const yMin = parseFloat(document.getElementById('yMin').value)||-Infinity;

      const query = document.getElementById('q').value.trim().toLowerCase();

      document.querySelectorAll('.listing-card').forEach(card=>{
        const v = (k)=> (card.dataset[k]||'').toLowerCase();
        const width  = parseFloat(card.dataset.width||'NaN');
        const weight = parseFloat(card.dataset.weight||'NaN');
        const price  = parseFloat(card.dataset.price||'NaN');
        const yards  = parseFloat(card.dataset.yards||'NaN');
        const title  = (card.querySelector('.title')?.textContent||'').toLowerCase();

        let show = true;
        if (mats.length && !mats.includes(v('material'))) show=false;
        if (cols.length && !cols.includes(v('color'))) show=false;
        if (pats.length && !pats.includes(v('pattern'))) show=false;
        if (stre.length && !stre.includes(v('stretch'))) show=false;
        if (fini.length && !fini.includes(v('finish'))) show=false;
        if (cntr.length && !cntr.includes(v('country'))) show=false;
        if (avai.length && !avai.includes(v('availability'))) show=false;

        if (!(width>=wMin && width<=wMax)) show=false;
        if (!(weight>=gMin && weight<=gMax)) show=false;
        if (!(price>=pMin && price<=pMax)) show=false;
        if (!(yards>=yMin)) show=false;

        if (query && !title.includes(query)) show=false;

        card.style.display = show ? '' : 'none';
      });

      sortGrid(); // keep sorted after filters
    }

    function sortGrid(){
      const sort = document.getElementById('sort').value;
      const grid = document.getElementById('product-grid');
      const cards = [...grid.children];

      const byNum = (el, key) => parseFloat(el.dataset[key]||'NaN')||0;
      const byDate = (el) => new Date(el.dataset.created||'1970-01-01').getTime();

      if (sort === 'price-asc')   cards.sort((a,b)=> byNum(a,'price') - byNum(b,'price'));
      if (sort === 'price-desc')  cards.sort((a,b)=> byNum(b,'price') - byNum(a,'price'));
      if (sort === 'newest')      cards.sort((a,b)=> byDate(b) - byDate(a));
      // relevance = DOM order (no-op)

      cards.forEach(c=>grid.appendChild(c));
    }

    document.getElementById('applyBtn').addEventListener('click', applyFilters);
    document.getElementById('clearBtn').addEventListener('click', ()=>{
      document.querySelectorAll('.chip.active').forEach(c=>c.classList.remove('active'));
      ['wMin','wMax','gMin','gMax','pMin','pMax','yMin'].forEach(id=>document.getElementById(id).value='');
      document.getElementById('q').value='';
      document.getElementById('sort').value='relevance';
      applyFilters();
    });

    document.getElementById('sort').addEventListener('change', sortGrid);

    // Apply on load if q present; keeps grid consistent
    if (q) applyFilters(); else sortGrid();
  </script>
</body>
</html>
