<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Hemline Market — Browse</title>

<link rel="stylesheet" href="styles/hm-modern.css"/>
<link rel="stylesheet" href="styles/hem-header.css"/>
<link rel="stylesheet" href="styles/hm-typography.css"/>
<link rel="stylesheet" href="styles/hm-footer.css"/>

<style>
  :root{
    --hm-accent:#991b1b;
    --hm-text:#111827;
    --hm-muted:#6b7280;
    --hm-border:#e5e7eb;
  }

  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--hm-text);-webkit-font-smoothing:antialiased}

  /* header (same style you’re using) */
  .hm-header{min-height:56px;background:#fff;border-bottom:1px solid var(--hm-border)}
  .hm-header .wrap{max-width:1200px;margin:0 auto;padding:0 12px;display:flex;align-items:center;justify-content:space-between}
  .hm-header .left{display:flex;align-items:center;gap:10px}
  .hm-brand{font-size:24px;font-weight:800;color:var(--hm-accent);text-decoration:none}
  .hamburger{display:inline-grid;place-items:center;width:36px;height:36px;border:1px solid var(--hm-border);border-radius:10px;background:#fff;color:#374151}
  .hamburger svg{width:22px;height:22px;stroke-width:2}
  .right{display:flex;align-items:center;gap:14px}
  .hm-icon svg{width:26px;height:26px;stroke-width:2}
  .hm-avatar{width:28px;height:28px;border-radius:50%;border:1px solid var(--hm-border);display:grid;place-items:center;font-weight:700;font-size:12px;text-decoration:none;background:#fff;color:#334155}

  /* slide-out menu */
  .sheet{position:fixed;inset:0 auto 0 0;width:min(84vw,340px);background:#fff;border-right:1px solid var(--hm-border);transform:translateX(-100%);transition:transform .25s ease;z-index:100;display:flex;flex-direction:column}
  .sheet.open{transform:translateX(0)}
  .sheet header{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--hm-border)}
  .sheet nav{display:grid;padding:10px}
  .sheet nav a{padding:10px;border:1px solid var(--hm-border);border-radius:10px;text-decoration:none;color:#1f2937}
  .sheet nav a + a{margin-top:8px}
  .sheet .close{display:inline-grid;place-items:center;width:30px;height:30px;border:1px solid var(--hm-border);border-radius:8px;background:#fff;color:#444}

  /* page chrome */
  .page{max-width:1200px;margin:12px auto;padding:0 12px}
  .topbar{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;margin-bottom:8px}
  .searchbox{display:flex;gap:8px}
  .searchbox input{flex:1;padding:10px;border:1px solid var(--hm-border);border-radius:10px;background:#fff}
  .searchbox button{padding:10px 14px;border-radius:10px;border:1px solid var(--hm-accent);background:var(--hm-accent);color:#fff;font-weight:700}

  .selected-row{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 10px}
  .pill{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--hm-border);background:#fff;border-radius:999px;padding:6px 10px;font-size:13px}
  .pill button{border:0;background:transparent;cursor:pointer;font-weight:700;color:#6b7280}

  .main{display:grid;grid-template-columns:280px 1fr;gap:14px}
  @media (max-width:900px){ .main{grid-template-columns:1fr} }

  /* sidebar filters */
  .filters{border:1px solid var(--hm-border);border-radius:12px;background:#fff}
  .filters header{padding:10px 12px;border-bottom:1px solid var(--hm-border);font-weight:800}
  .group{border-top:1px solid var(--hm-border)}
  .group:first-of-type{border-top:0}
  .group h4{margin:0;padding:10px 12px;font-size:14px;display:flex;align-items:center;justify-content:space-between}
  .group .body{padding:8px 12px;padding-top:0}
  .group .row{display:flex;gap:8px}
  .group label{display:flex;align-items:center;gap:8px;font-size:14px;margin:6px 0}
  .swatches{display:flex;flex-wrap:wrap;gap:6px}
  .sw{width:22px;height:22px;border-radius:6px;border:1px solid #d1d5db;cursor:pointer;position:relative}
  .sw input{display:none}
  .sw.selected{outline:2px solid var(--hm-accent);outline-offset:2px}
  .sw .tip{position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:2px 6px;border-radius:4px;font-size:11px;white-space:nowrap;opacity:0;pointer-events:none}
  .sw:hover .tip{opacity:1}

  .filters .actions{display:flex;justify-content:space-between;gap:8px;padding:10px;border-top:1px solid var(--hm-border)}
  .btn{padding:8px 12px;border-radius:10px;border:1px solid var(--hm-border);background:#fff}
  .btn-primary{border-color:var(--hm-accent);background:var(--hm-accent);color:#fff;font-weight:700}
  input[type="number"]{width:100%;min-width:0;box-sizing:border-box;padding:8px;border:1px solid var(--hm-border);border-radius:10px}

  /* results grid */
  .cards{border:1px solid var(--hm-border);border-radius:12px;background:#fff;min-height:420px}
  .cards .wrap{padding:12px}
  .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}
  @media (max-width:900px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
  @media (max-width:560px){ .grid{grid-template-columns:1fr} }
  .card{border:1px solid var(--hm-border);border-radius:12px;overflow:hidden;text-decoration:none;color:#1f2937;background:#fff}
  .thumb{aspect-ratio:4/3;background:linear-gradient(180deg,#f8fafc,#eef2f7);display:grid;place-items:center;color:#6b7280}
  .info{padding:8px 10px}
  .title{font-weight:700}
  .price{font-weight:800}
  .meta{font-size:12px;color:#6b7280}

  /* footer */
  .hm-footer{background:#fff;border-top:1px solid var(--hm-border);margin-top:18px}
  .hm-footer .footer-wrap{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between}
  .hm-footer .footer-links a{color:#4b5563}
</style>
</head>
<body>

<!-- HEADER -->
<header class="hm-header" role="banner">
  <div class="wrap">
    <div class="left">
      <button class="hamburger" id="openMenu" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6" x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
      <a class="hm-brand" href="index.html">Hemline Market</a>
    </div>
    <div class="right">
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/></svg>
      </a>
      <a class="hm-icon" href="notifications.html" aria-label="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
      </a>
      <a class="hm-avatar" id="avatar" href="account.html" title="Your profile">AA</a>
      <a class="hm-btn-primary" href="seller/index.html?list=new">Sell</a>
    </div>
  </div>
</header>

<!-- LEFT MENU -->
<aside class="sheet" id="menuSheet" aria-hidden="true">
  <header>
    <strong>Menu</strong>
    <button class="close" id="closeMenu" aria-label="Close menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y="18"></line>
        <line x1="6" y1="6" x2="18" y="18"></line>
      </svg>
    </button>
  </header>
  <nav>
    <a href="browse.html">Browse</a>
    <a href="about.html">About</a>
    <a href="atelier.html">My Atelier</a>
    <a href="favorites.html">Favorites</a>
    <a href="orders.html">Orders</a>
    <a href="settings.html">Settings</a>
    <a href="help.html">Help</a>
  </nav>
</aside>

<div class="page">

  <!-- Selected filter chips -->
  <div id="selectedRow" class="selected-row" aria-live="polite"></div>

  <!-- Search bar -->
  <div class="topbar">
    <div class="searchbox">
      <input id="searchInput" placeholder="Search fabrics…"/>
      <button id="searchBtn">Search</button>
    </div>
  </div>

  <div class="main">
    <!-- SIDEBAR FILTERS -->
    <aside class="filters" id="filters">
      <header>Filters</header>

      <section class="group" data-key="content">
        <h4>Content <span>+</span></h4>
        <div class="body">
          <div style="max-height:240px;overflow:auto;border:1px solid var(--hm-border);border-radius:10px;padding:6px">
            <div class="list" id="contentList"></div>
          </div>
        </div>
      </section>

      <section class="group" data-key="colors">
        <h4>Color Family <span>+</span></h4>
        <div class="body">
          <div class="swatches" id="colorSwatches"></div>
        </div>
      </section>

      <section class="group" data-key="price">
        <h4>$/yard <span>+</span></h4>
        <div class="body">
          <div class="row">
            <input type="number" id="minPrice" placeholder="Min">
            <input type="number" id="maxPrice" placeholder="Max">
          </div>
        </div>
      </section>

      <section class="group" data-key="yards">
        <h4>Yards <span>+</span></h4>
        <div class="body">
          <input type="number" id="minYards" placeholder="Min yards">
        </div>
      </section>

      <section class="group" data-key="width">
        <h4>Width (in) <span>+</span></h4>
        <div class="body">
          <div class="row">
            <input type="number" id="minWidth" placeholder="Min">
            <input type="number" id="maxWidth" placeholder="Max">
          </div>
        </div>
      </section>

      <section class="group" data-key="gsm">
        <h4>Weight (GSM) <span>+</span></h4>
        <div class="body">
          <div class="row">
            <input type="number" id="minGsm" placeholder="Min GSM">
            <input type="number" id="maxGsm" placeholder="Max GSM">
          </div>
        </div>
      </section>

      <section class="group" data-key="dropdowns">
        <h4>More <span>+</span></h4>
        <div class="body">
          <div class="row"><select id="dept">
            <option value="">Department (Any)</option><option>Fashion</option><option>Home</option><option>Quilting</option><option>Notions</option>
          </select></div>
          <div class="row"><select id="fabricType">
            <option value="">Fabric Type (Any)</option>
            <option>Canvas</option><option>Chiffon</option><option>Corduroy</option>
            <option>Crepe</option><option>Denim</option><option>Flannel</option>
            <option>Georgette</option><option>Jersey</option><option>Lace</option>
            <option>Lawn</option><option>Organza</option><option>Poplin</option>
            <option>Sateen</option><option>Satin</option><option>Tulle</option>
            <option>Twill</option><option>Velvet</option><option>Voile</option>
          </select></div>
          <div class="row"><select id="fiberType">
            <option value="">Fiber Type (Any)</option>
            <option>Natural</option><option>Modified Natural</option><option>Synthetic</option><option>Blend</option>
          </select></div>
          <div class="row"><input id="designer" placeholder="Designer (e.g., Loro Piana)"></div>
          <div class="row"><select id="origin">
            <option value="">Country / Origin (Any)</option>
            <option>Italy</option><option>France</option><option>Japan</option><option>UK</option>
            <option>USA</option><option>India</option><option>China</option><option>Korea</option>
          </select></div>
          <div class="row"><select id="pattern">
            <option value="">Pattern (Any)</option><option>Solid</option><option>Printed</option>
          </select></div>
        </div>
      </section>

      <div class="actions">
        <button class="btn" id="clearBtn">Clear</button>
        <button class="btn btn-primary" id="applyBtn">Apply</button>
      </div>
    </aside>

    <!-- RESULTS -->
    <section class="cards" aria-label="Browse results">
      <div class="wrap">
        <div class="grid">
          <a class="card" href="item.html?id=1">
            <div class="thumb">photo</div>
            <div class="info">
              <div class="title">Sample Wool Crepe</div>
              <div class="price">$45/yd</div>
            </div>
          </a>
          <a class="card" href="item.html?id=2">
            <div class="thumb">photo</div>
            <div class="info">
              <div class="title">Italian Silk Twill</div>
              <div class="price">$68/yd</div>
            </div>
          </a>
          <a class="card" href="item.html?id=3">
            <div class="thumb">photo</div>
            <div class="info">
              <div class="title">Cotton Sateen</div>
              <div class="price">$22/yd</div>
            </div>
          </a>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- FOOTER -->
<footer class="hm-footer" role="contentinfo">
  <div class="footer-wrap">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="faq.html">FAQ</a>
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Terms</a>
      <a href="shipping.html">Shipping & Returns</a>
    </nav>
  </div>
</footer>

<script>
(function(){
  /* ====== Hamburger / sheet ====== */
  const sheet=document.getElementById("menuSheet");
  const openBtn=document.getElementById("openMenu");
  const closeBtn=document.getElementById("closeMenu");
  function openSheet(){ sheet.classList.add("open"); sheet.setAttribute("aria-hidden","false"); }
  function closeSheet(){ sheet.classList.remove("open"); sheet.setAttribute("aria-hidden","true"); }
  openBtn.addEventListener("click",e=>{e.preventDefault();openSheet();});
  closeBtn.addEventListener("click",e=>{e.preventDefault();closeSheet();});
  document.addEventListener("keydown",e=>{ if(e.key==="Escape") closeSheet(); });

  /* ====== Data for filters ====== */
  const CONTENT = [
    "Any","Acetate","Acrylic","Alpaca","Angora","Bamboo","Cashmere","Cotton","Cupro",
    "Hemp","Leather","Linen","Lurex","Modal","Mohair","Nylon","Polyester",
    "Rayon / Viscose","Silk","Spandex / Elastane","Tencel / Lyocell","Wool","Other Fibers"
  ];
  const COLORS = [
    "Black","Grey","White","Cream","Brown","Pink","Red","Orange","Yellow",
    "Green","Blue","Purple","Gold","Silver"
  ];

  /* ====== Build UI ====== */
  const contentList = document.getElementById('contentList');
  CONTENT.forEach(name=>{
    const id = 'c_'+name.replace(/[^a-z0-9]+/ig,'_');
    const row = document.createElement('label');
    row.innerHTML = `<input type="checkbox" id="${id}" value="${name}"><span>${name}</span>`;
    contentList.appendChild(row);
  });

  const colorWrap = document.getElementById('colorSwatches');
  COLORS.forEach(name=>{
    const id='col_'+name.toLowerCase();
    const sw=document.createElement('label');
    sw.className='sw';
    sw.title=name;
    sw.innerHTML=`<input type="checkbox" id="${id}" value="${name}"><span class="tip">${name}</span>`;
    // color fills
    const colMap={
      Black:'#000',Grey:'#9aa0a6',White:'#fff',Cream:'#f5efe4',Brown:'#7a4a2a',Pink:'#f4a4b6',
      Red:'#d21d2b',Orange:'#f27a22',Yellow:'#f3c321',Green:'#2f7d32',Blue:'#2166d1',
      Purple:'#6b2da8',Gold:'#e2c46d',Silver:'#d5d8de'
    };
    sw.style.background = colMap[name]||'#eee';
    if(name==='White') sw.style.borderColor='#d1d5db';
    sw.addEventListener('change',()=>{ sw.classList.toggle('selected', sw.querySelector('input').checked); });
    colorWrap.appendChild(sw);
  });

  /* ====== Helpers ====== */
  function getQP(name){
    const u=new URL(location.href); return u.searchParams.get(name)||'';
  }
  function safeParse(json){ try{return JSON.parse(json)}catch(_){return null} }
  function setVal(id,v){ const el=document.getElementById(id); if(el!=null && v!==undefined && v!==""){ el.value=v; } }
  function setSelect(id,v){ const el=document.getElementById(id); if(el && v!==undefined){ el.value=v; } }
  function checkMany(listSel, values){
    if(!Array.isArray(values)) return;
    values.forEach(v=>{
      const input = document.querySelector(`${listSel} [value="${CSS.escape(v)}"]`);
      if(input){ input.checked = true; input.dispatchEvent(new Event('change')); }
    });
  }

  /* ====== Selected chips row ====== */
  const selectedRow=document.getElementById('selectedRow');
  function refreshPills(){
    selectedRow.innerHTML='';
    const picks = collectFilters();
    const add=(label,value,removeFn)=>{
      if(!value || (Array.isArray(value)&&!value.length)) return;
      const arr = Array.isArray(value)? value : [value];
      arr.forEach(val=>{
        const pill=document.createElement('span');
        pill.className='pill';
        pill.innerHTML=`<span><strong>${label}:</strong> ${val}</span><button aria-label="Remove ${label} ${val}">×</button>`;
        pill.querySelector('button').onclick=()=>{ removeFn(val); refreshPills(); };
        selectedRow.appendChild(pill);
      });
    };
    add('Content', picks.content, (val)=>{ const el=[...document.querySelectorAll('#contentList input')].find(i=>i.value===val); if(el){el.checked=false;} });
    add('Color', picks.colors, (val)=>{ const el=[...document.querySelectorAll('#colorSwatches input')].find(i=>i.value===val); if(el){el.checked=false; el.dispatchEvent(new Event('change'));} });
    add('$/yd', picks.minPrice && picks.maxPrice ? [`${picks.minPrice}–${picks.maxPrice}`] : (picks.minPrice? [`${picks.minPrice}+`]: (picks.maxPrice? [`0–${picks.maxPrice}`]:[])), ()=>{ setVal('minPrice',''); setVal('maxPrice',''); });
    add('Yards', picks.minYards, ()=>{ setVal('minYards',''); });
    add('Width', (picks.minWidth||picks.maxWidth)? [`${picks.minWidth||'–'}–${picks.maxWidth||'–'}`]:[], ()=>{ setVal('minWidth',''); setVal('maxWidth',''); });
    add('GSM',   (picks.minGsm||picks.maxGsm)?   [`${picks.minGsm||'–'}–${picks.maxGsm||'–'}`]:[],   ()=>{ setVal('minGsm',''); setVal('maxGsm',''); });
    add('Dept', picks.dept, ()=>{ setSelect('dept',''); });
    add('Fabric', picks.fabricType, ()=>{ setSelect('fabricType',''); });
    add('Fiber', picks.fiberType, ()=>{ setSelect('fiberType',''); });
    add('Designer', picks.designer, ()=>{ setVal('designer',''); });
    add('Origin', picks.origin, ()=>{ setSelect('origin',''); });
    add('Pattern', picks.pattern, ()=>{ setSelect('pattern',''); });
  }

  /* ====== Collect filters → object ====== */
  function collectFilters(){
    const pick = (sel)=>[...document.querySelectorAll(sel)].filter(i=>i.checked).map(i=>i.value);
    const val  = (id)=>{ const el=document.getElementById(id); return el && el.value.trim()? el.value.trim(): ""; };
    return {
      content: pick('#contentList input[type="checkbox"]').filter(v=>v!=='Any'),
      colors:  pick('#colorSwatches input[type="checkbox"]'),
      minPrice: val('minPrice'), maxPrice: val('maxPrice'),
      minYards: val('minYards'),
      minWidth: val('minWidth'), maxWidth: val('maxWidth'),
      minGsm: val('minGsm'),     maxGsm: val('maxGsm'),
      dept:       document.getElementById('dept')?.value || "",
      fabricType: document.getElementById('fabricType')?.value || "",
      fiberType:  document.getElementById('fiberType')?.value || "",
      designer:   val('designer'),
      origin:     document.getElementById('origin')?.value || "",
      pattern:    document.getElementById('pattern')?.value || ""
    };
  }

  /* ====== Preload from URL (q & f) ====== */
  const q   = getQP('q');
  const f   = safeParse(decodeURIComponent(getQP('f')||''));
  if(q) document.getElementById('searchInput').value = q;

  if(f){
    checkMany('#contentList', f.content);
    checkMany('#colorSwatches', f.colors);
    setVal('minPrice', f.minPrice); setVal('maxPrice', f.maxPrice);
    setVal('minYards', f.minYards);
    setVal('minWidth', f.minWidth); setVal('maxWidth', f.maxWidth);
    setVal('minGsm',  f.minGsm);    setVal('maxGsm',  f.maxGsm);
    setSelect('dept', f.dept);
    setSelect('fabricType', f.fabricType);
    setSelect('fiberType', f.fiberType);
    setVal('designer', f.designer);
    setSelect('origin', f.origin);
    setSelect('pattern', f.pattern);
  }
  refreshPills();

  /* ====== Search button preserves filters ====== */
  document.getElementById('searchBtn').addEventListener('click', ()=>{
    const q=encodeURIComponent(document.getElementById('searchInput').value.trim());
    const f=encodeURIComponent(JSON.stringify(collectFilters()));
    const url=new URL(location.href);
    url.searchParams.set('q', q);
    url.searchParams.set('f', f);
    location.href=url.toString();
  });

  /* ====== Apply / Clear ====== */
  document.getElementById('applyBtn').addEventListener('click', ()=>{
    const url=new URL(location.href);
    url.searchParams.set('f', encodeURIComponent(JSON.stringify(collectFilters())));
    history.replaceState(null,'',url.toString());
    refreshPills();
  });

  document.getElementById('clearBtn').addEventListener('click', ()=>{
    document.querySelectorAll('#contentList input[type="checkbox"]').forEach(i=>i.checked=false);
    document.querySelectorAll('#colorSwatches input[type="checkbox"]').forEach(i=>{
      i.checked=false; i.dispatchEvent(new Event('change'));
    });
    ['minPrice','maxPrice','minYards','minWidth','maxWidth','minGsm','maxGsm','designer'].forEach(id=>{ const el=document.getElementById(id); if(el) el.value=''; });
    ['dept','fabricType','fiberType','origin','pattern'].forEach(id=>{ const el=document.getElementById(id); if(el) el.value=''; });
    const url=new URL(location.href);
    url.searchParams.delete('f');
    history.replaceState(null,'',url.toString());
    refreshPills();
  });

})();
</script>
</body>
</html>
