<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Browse — Hemline Market</title>

<!-- Canonical shared styles -->
<link rel="stylesheet" href="styles/hm-modern.css"/>
<link rel="stylesheet" href="styles/hem-header.css"/>
<link rel="stylesheet" href="styles/hm-typography.css"/>
<link rel="stylesheet" href="styles/hm-footer.css"/>

<style>
  :root{--ink:#111827;--muted:#6b7280;--border:#e5e7eb;--accent:#991b1b;--bg:#fafafa}
  body{margin:0;background:var(--bg);color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;-webkit-font-smoothing:antialiased}

  /* ——— Header safety: prevent oversized SVGs from global rules ——— */
  .hm-header .hamburger svg,
  .hm-header .hm-icon svg{width:22px;height:22px;stroke-width:2;max-width:none;max-height:none}

  /* ——— Footer: keep canonical layout ——— */
  .hm-footer{background:#fff;border-top:1px solid var(--border)}
  .hm-footer .footer-wrap{
    max-width:1200px;margin:0 auto;padding:10px 12px;
    display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
  }
  .hm-footer .footer-links a{text-decoration:none;color:#1f2937}

  /* ——— Page layout ——— */
  .wrap{max-width:1200px;margin:12px auto;padding:0 12px}
  .topbar{display:flex;gap:10px;align-items:center;margin-bottom:12px}
  .topbar input[type="search"]{flex:1;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}
  .topbar button{padding:9px 12px;border-radius:10px;border:1px solid var(--accent);background:var(--accent);color:#fff;font-weight:700}

  .layout{display:grid;grid-template-columns:280px 1fr;gap:14px}
  @media (max-width:900px){ .layout{grid-template-columns:1fr} }

  /* ——— Filters ——— */
  .filters{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px;position:sticky;top:70px;height:max-content}
  .filters h3{margin:0 0 8px}
  .section{border-top:1px solid var(--border);padding-top:8px;margin-top:8px}
  .section:first-of-type{border-top:0;padding-top:0;margin-top:0}
  .title{font-weight:700;font-size:13px;color:#374151;margin:0 0 6px}
  .listbox{max-height:230px;overflow:auto;border:1px solid var(--border);border-radius:10px;padding:6px;background:#fff}
  .row{display:flex;align-items:center;gap:8px;padding:6px 4px;border-bottom:1px dashed #f3f4f6}
  .row:last-child{border-bottom:0}
  .row input{width:14px;height:14px}
  .row label{font-size:12px;color:#374151}
  .mini{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .mini .field{display:flex;flex-direction:column;gap:4px}
  .mini label{font-size:12px;color:#374151}
  .mini input,.selects select,.selects input{
    padding:7px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;font-size:13px
  }
  .selects{display:grid;gap:8px}

  /* Color grid */
  #colorBox{--sw:22px;--gap:6px;display:grid;grid-template-columns:repeat(6,var(--sw));gap:var(--gap);
    border:1px solid var(--border);border-radius:10px;padding:8px;background:#fff}
  #colorBox .sw{width:var(--sw);height:var(--sw);border-radius:6px;border:1px solid #d1d5db;box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);cursor:pointer}
  #colorBox .sw[data-selected="true"]{outline:2px solid var(--accent);outline-offset:2px}

  /* ——— Results ——— */
  .results{background:#fff;border:1px solid var(--border);border-radius:12px;padding:12px;min-height:300px}
  .results-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .browse-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
  @media (max-width:900px){ .browse-grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
  @media (max-width:560px){ .browse-grid{grid-template-columns:1fr} }

  /* Cards */
  .card{display:block;background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden;text-decoration:none;color:inherit}
  .ph{aspect-ratio:4/3;display:grid;place-items:center;color:#6b7280;background:linear-gradient(180deg,#f8fafc,#eef2f7)}
  .meta{padding:8px 10px}
  .meta .title{font-weight:800;margin-bottom:4px;line-height:1.2}
  .meta .sub{display:flex;flex-wrap:wrap;gap:8px;justify-content:space-between;font-size:13px;color:#6b7280}
  .meta .sub span{white-space:nowrap}
  .add-btn{width:100%;margin-top:10px;padding:10px 12px;border-radius:10px;border:1px solid var(--accent);background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
  .add-btn[disabled]{opacity:.6;cursor:not-allowed}
</style>
</head>
<body>

<!-- HEADER -->
<header class="hm-header" role="banner">
  <div class="hm-wrap">
    <div class="left">
      <button id="openMenu" class="hamburger" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6"  x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
      <a class="hm-brand" href="index.html">Hemline Market</a>
    </div>
    <div class="right">
      <a class="hm-icon" href="browse.html" aria-label="Browse & search">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.3-4.3"></path></svg>
      </a>
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"></path></svg>
      </a>
      <a class="hm-icon" href="notifications.html" aria-label="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
      </a>
      <a class="hm-icon" href="cart.html" aria-label="Cart">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="9" cy="21" r="1"></circle><circle cx="18" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
        <span class="cart-badge" data-cart-badge></span>
      </a>
      <a class="hm-avatar" id="avatar" href="account.html" title="Your profile">AA</a>
      <a class="hm-btn-primary" href="sell.html">Sell</a>
    </div>
  </div>
</header>

<!-- Drawer -->
<aside class="sheet" id="menuSheet" aria-hidden="true">
  <header>
    <strong>Menu</strong>
    <button class="close" id="closeMenu" aria-label="Close menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </header>
  <nav>
    <a href="browse.html">Browse</a>
    <a href="sell.html">Sell Fabric</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="how.html">How It Works</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </nav>
</aside>

<!-- PAGE -->
<div class="wrap">
  <div class="topbar">
    <input id="q" type="search" placeholder="Search fabrics…"/>
    <button id="doSearch">Search</button>
  </div>

  <div class="layout">
    <!-- Filters -->
    <aside class="filters">
      <h3>Filters</h3>

      <section class="section">
        <div class="title">Content</div>
        <div class="listbox" id="contentBox"></div>
      </section>

      <section class="section">
        <div class="title">Color Family</div>
        <div id="colorBox"></div>
      </section>

      <section class="section">
        <div class="title">$/yard</div>
        <div class="mini">
          <div class="field"><label>Min</label><input id="minPrice" type="number" min="0" step="1"></div>
          <div class="field"><label>Max</label><input id="maxPrice" type="number" min="0" step="1"></div>
        </div>
      </section>

      <section class="section">
        <div class="title">Yards</div>
        <div class="mini">
          <div class="field" style="grid-column:1/-1"><label>Min yards</label><input id="minYards" type="number" min="0" step="1"></div>
        </div>
      </section>

      <section class="section">
        <div class="title">Width (in)</div>
        <div class="mini">
          <div class="field"><label>Min</label><input id="minWidth" type="number" min="0" step="1"></div>
          <div class="field"><label>Max</label><input id="maxWidth" type="number" min="0" step="1"></div>
        </div>
      </section>

      <section class="section">
        <div class="title">Weight (GSM)</div>
        <div class="mini">
          <div class="field"><label>Min GSM</label><input id="minGsm" type="number" min="0" step="1"></div>
          <div class="field"><label>Max GSM</label><input id="maxGsm" type="number" min="0" step="1"></div>
        </div>
      </section>

      <section class="section">
        <div class="title">Department</div>
        <div class="selects"><select id="dept"><option value="">Any</option><option>Fashion</option><option>Home</option><option>Quilting</option><option>Notions</option></select></div>
      </section>

      <section class="section">
        <div class="title">Fabric Type</div>
        <div class="selects"><select id="fabricType">
          <option value="">Any</option>
          <option>Canvas</option><option>Chiffon</option><option>Corduroy</option><option>Crepe</option><option>Denim</option><option>Flannel</option>
          <option>Georgette</option><option>Jersey</option><option>Lace</option><option>Lawn</option><option>Organza</option><option>Poplin</option>
          <option>Sateen</option><option>Satin</option><option>Tulle</option><option>Twill</option><option>Velvet</option><option>Voile</option>
        </select></div>
      </section>

      <section class="section">
        <div class="title">Fiber Type</div>
        <div class="selects"><select id="fiberType">
          <option value="">Any</option><option>Natural</option><option>Modified Natural</option><option>Synthetic</option><option>Blend</option>
        </select></div>
      </section>

      <section class="section">
        <div class="title">Designer / Mill</div>
        <div class="selects"><input id="designer" placeholder="e.g., Loro Piana"></div>
      </section>

      <section class="section">
        <div class="title">Country / Origin</div>
        <div class="selects"><select id="origin">
          <option value="">Any</option><option>Italy</option><option>France</option><option>Japan</option><option>UK</option>
          <option>USA</option><option>India</option><option>China</option><option>Korea</option>
        </select></div>
      </section>

      <section class="section">
        <div class="title">Pattern</div>
        <div class="selects"><select id="pattern"><option value="">Any</option><option>Solid</option><option>Printed</option></select></div>
      </section>

    </aside>

    <!-- Results -->
    <section class="results">
      <div class="results-head">
        <h2 style="margin:0;font-size:18px">Browse</h2>
        <div id="resultCount" style="color:#6b7280;font-size:13px">0 results</div>
      </div>

      <div id="grid" class="browse-grid"></div>
      <div id="empty" style="display:none;color:#6b7280">No results. Try relaxing a filter.</div>
    </section>
  </div>
</div>

<!-- FOOTER -->
<footer class="hm-footer" role="contentinfo">
  <div class="footer-wrap">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="faq.html">FAQ</a>
      <a href="contact.html">Contact</a>
      <a href="terms.html">Terms</a>
      <a href="privacy.html">Privacy</a>
    </nav>
  </div>
</footer>

<script>
/* Header sheet + avatar (canonical) */
(function(){
  const sheet=document.getElementById("menuSheet");
  const openBtn=document.getElementById("openMenu");
  const closeBtn=document.getElementById("closeMenu");
  function open(){sheet.classList.add("open");sheet.setAttribute("aria-hidden","false");}
  function close(){sheet.classList.remove("open");sheet.setAttribute("aria-hidden","true");}
  openBtn?.addEventListener("click",e=>{e.preventDefault();open();});
  closeBtn?.addEventListener("click",e=>{e.preventDefault();close();});
  document.addEventListener("keydown",e=>{if(e.key==="Escape") close();});
  const avatar=document.getElementById("avatar");
  try{ const url=localStorage.getItem("avatarUrl"); if(url){ avatar.textContent=''; avatar.style.backgroundImage="url('"+url+"')"; }}catch(e){}
})();
</script>

<script>
/* Demo dataset + renderer (links to listing.html?id=...) */
const DATA=[
  {id:1,title:"Italian Silk Twill — Midnight",price:68,width:54,gsm:75,yards:8,content:["Silk"],color:"Blue",dept:"Fashion",fabricType:"Twill",fiberType:"Natural",origin:"Italy",pattern:"Solid",designer:"Ratti",photo:""},
  {id:2,title:"Wool Crepe — Saffron",price:28,width:58,gsm:180,yards:12,content:["Wool"],color:"Yellow",dept:"Fashion",fabricType:"Crepe",fiberType:"Natural",origin:"Italy",pattern:"Solid",designer:"",photo:""},
  {id:3,title:"Cotton Poplin — Moss",price:14,width:44,gsm:120,yards:20,content:["Cotton"],color:"Green",dept:"Fashion",fabricType:"Poplin",fiberType:"Natural",origin:"India",pattern:"Solid",designer:"",photo:""}
];

const CONTENTS=["Any","Silk","Wool","Cotton","Linen","Rayon / Viscose","Polyester","Blend"];
const COLORS=[
  {name:"Black",hex:"#000"},{name:"Grey",hex:"#9aa0a6"},{name:"White",hex:"#fff",border:"#d1d5db"},
  {name:"Cream",hex:"#f5efe4"},{name:"Brown",hex:"#7a4a2a"},{name:"Pink",hex:"#f4a4b6"},
  {name:"Red",hex:"#d21d2b"},{name:"Orange",hex:"#f27a22"},{name:"Yellow",hex:"#f3c321"},
  {name:"Green",hex:"#2f7d32"},{name:"Blue",hex:"#2166d1"},{name:"Purple",hex:"#6b2da8"}
];

const $=id=>document.getElementById(id);

function el(tag,cls,text){ const n=document.createElement(tag); if(cls) n.className=cls; if(text!=null) n.textContent=text; return n; }

/* Build filters UI */
(function buildFilters(){
  const box=$('contentBox'); box.innerHTML='';
  CONTENTS.forEach(v=>{
    const id='c_'+v.replace(/[^a-z0-9]/gi,'_');
    const row=el('div','row');
    const cb=el('input'); cb.type='checkbox'; cb.id=id; cb.value=v;
    const lb=el('label','',v); lb.htmlFor=id;
    row.append(cb,lb); box.append(row);
  });

  const colorBox=$('colorBox'); colorBox.innerHTML='';
  COLORS.forEach(c=>{
    const sw=el('div','sw'); sw.title=c.name; sw.dataset.name=c.name;
    if(c.hex) sw.style.background=c.hex; if(c.border) sw.style.borderColor=c.border;
    sw.addEventListener('click',()=>{ sw.dataset.selected = sw.dataset.selected ? '' : 'true'; render(); });
    colorBox.append(sw);
  });
})();

/* Renderer */
function makeCard(it){
  const a=el('a','card'); a.href='listing.html?id='+encodeURIComponent(it.id); a.dataset.id=it.id;
  const ph=el('div','ph'); ph.textContent=it.title;
  const meta=el('div','meta');
  const t=el('div','title',it.title);
  const sub=el('div','sub');
  const left=el('span','','$'+it.price+'/yd');
  const right=el('span','', (it.width||'—')+'″ • '+(it.gsm||'—')+' GSM');
  sub.append(left,right);
  const btn=el('button','add-btn add-to-cart','Add to Cart – $'+it.price);
  meta.append(t,sub,btn); a.append(ph,meta);
  return a;
}

function readFilters(){
  const term=($('q').value||'').toLowerCase();

  const contents=[...$('contentBox').querySelectorAll('input[type="checkbox"]:checked')]
    .map(cb=>cb.value).filter(v=>v!=='Any');

  const colors=[...$('colorBox').querySelectorAll('.sw[data-selected="true"]')]
    .map(sw=>sw.dataset.name);

  const num=id=>{ const v=$(id)?.value; return v===''||v==null?null:Number(v); };

  return {
    term,
    contents,
    colors,
    minPrice:num('minPrice'), maxPrice:num('maxPrice'),
    minYards:num('minYards'),
    minWidth:num('minWidth'), maxWidth:num('maxWidth'),
    minGsm:num('minGsm'), maxGsm:num('maxGsm'),
    dept:($('dept').value||'').toLowerCase(),
    fabricType:($('fabricType').value||'').toLowerCase(),
    fiberType:($('fiberType').value||'').toLowerCase(),
    designer:($('designer').value||'').toLowerCase(),
    origin:($('origin').value||'').toLowerCase(),
    pattern:($('pattern').value||'').toLowerCase()
  };
}

function applyFilters(list,f){
  return list.filter(it=>{
    if(f.term){
      const hay=(it.title+' '+(it.designer||'')).toLowerCase();
      if(!hay.includes(f.term)) return false;
    }
    if(f.contents.length){
      const lc=(it.content||[]).map(s=>s.toLowerCase());
      if(!f.contents.some(c=>lc.includes(c.toLowerCase()))) return false;
    }
    if(f.colors.length && it.color && !f.colors.includes(it.color)) return false;
    if(f.minPrice!=null && it.price<f.minPrice) return false;
    if(f.maxPrice!=null && it.price>f.maxPrice) return false;
    if(f.minYards!=null && (it.yards??0)<f.minYards) return false;
    if(f.minWidth!=null && (it.width??0)<f.minWidth) return false;
    if(f.maxWidth!=null && (it.width??0)>f.maxWidth) return false;
    if(f.minGsm!=null && (it.gsm??0)<f.minGsm) return false;
    if(f.maxGsm!=null && (it.gsm??0)>f.maxGsm) return false;
    if(f.dept && (it.dept||'').toLowerCase()!==f.dept) return false;
    if(f.fabricType && (it.fabricType||'').toLowerCase()!==f.fabricType) return false;
    if(f.fiberType && (it.fiberType||'').toLowerCase()!==f.fiberType) return false;
    if(f.designer && !(it.designer||'').toLowerCase().includes(f.designer)) return false;
    if(f.origin && (it.origin||'').toLowerCase()!==f.origin) return false;
    if(f.pattern && (it.pattern||'').toLowerCase()!==f.pattern) return false;
    return true;
  });
}

function render(){
  const grid=$('grid'), empty=$('empty');
  const filtered=applyFilters(DATA, readFilters());
  grid.innerHTML='';
  if(!filtered.length){ empty.style.display='block'; $('resultCount').textContent='0 results'; return; }
  empty.style.display='none';
  filtered.forEach(it=>grid.append(makeCard(it)));
  $('resultCount').textContent=filtered.length+(filtered.length===1?' result':' results');
}
render();

/* Wire up inputs (simple live filter) */
['q','minPrice','maxPrice','minYards','minWidth','maxWidth','minGsm','maxGsm',
 'dept','fabricType','fiberType','designer','origin','pattern']
  .forEach(id=> $(id)?.addEventListener('input',render));
$('contentBox').addEventListener('change',render);

/* Search button duplicates typing behavior */
$('doSearch').addEventListener('click',render);

/* Prevent navigating to listing when add-to-cart is clicked */
$('grid').addEventListener('click',(e)=>{ if(e.target.closest('.add-to-cart')) e.preventDefault(); });
</script>
</body>
</html>
