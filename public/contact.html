<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact • Hemline Market</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="logo"><a href="/">Hemline Market</a></div>
    <nav class="nav">
      <a href="/browse.html">Browse</a>
      <a href="/sell.html">Sell</a>
      <a href="/atelier.html">Atelier</a>
      <a href="/account.html">Account</a>
    </nav>
  </header>

  <!-- LOCATION BAR -->
  <div class="location-bar">
    <span><a href="/">Home</a> › Contact</span>
  </div>

  <!-- MAIN CONTENT -->
  <main class="main wrap">
    <h1>Contact Hemline Market</h1>
    <p class="lead">Questions, ideas, or feedback? Send us a note — we read every message.</p>

    <form id="contactForm" class="contact-form" novalidate>
      <div class="row">
        <div>
          <label for="name">Your name</label>
          <input id="name" name="name" type="text" required autocomplete="name" />
        </div>
        <div>
          <label for="email">Your email</label>
          <input id="email" name="email" type="email" required autocomplete="email" />
        </div>
      </div>

      <div>
        <label for="message">Message</label>
        <textarea id="message" name="message" required></textarea>
      </div>

      <!-- Honeypot -->
      <div class="hp" aria-hidden="true">
        <input id="company" name="company" type="text" tabindex="-1" autocomplete="off" />
      </div>

      <div class="actions">
        <button id="sendBtn" type="submit">Send message</button>
        <span id="status" class="msg" role="status" aria-live="polite"></span>
      </div>
    </form>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-links">
      <a href="/privacy.html">Privacy</a>
      <a href="/terms.html">Terms</a>
      <a href="/shipping-returns.html">Shipping & Returns</a>
      <a href="/contact.html">Contact</a>
    </div>
    <p class="copyright">© 2025 Hemline Market</p>
  </footer>

  <script>
    (function() {
      const form = document.getElementById('contactForm');
      const status = document.getElementById('status');
      const btn = document.getElementById('sendBtn');

      function looksLikeEmail(s) {
        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(String(s || ''));
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        status.textContent = '';
        status.className = 'msg';

        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const message = form.message.value.trim();
        const honeypot = form.company.value.trim();

        if (!name || !email || !message) {
          status.textContent = 'Please fill in all required fields.';
          status.className = 'msg err';
          return;
        }
        if (!looksLikeEmail(email)) {
          status.textContent = 'Please enter a valid email address.';
          status.className = 'msg err';
          return;
        }

        btn.disabled = true;
        btn.textContent = 'Sending…';

        try {
          const r = await fetch('/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, message, honeypot })
          });

          const data = await r.json().catch(() => ({}));

          if (r.ok && data && data.ok) {
            form.reset();
            status.textContent = 'Message sent! We’ll get back to you soon.';
            status.className = 'msg ok';
          } else {
            status.textContent = 'Couldn’t send right now.';
            status.className = 'msg err';
          }
        } catch (err) {
          status.textContent = 'Network error — please try again.';
          status.className = 'msg err';
        } finally {
          btn.disabled = false;
          btn.textContent = 'Send message';
        }
      });
    })();
  </script>
</body>
</html>
