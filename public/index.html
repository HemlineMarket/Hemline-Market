<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hemline Market — Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#111111" />
  <style>
    /* --- Minimal reset --- */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    img{max-width:100%;display:block}
    button,input,select{font:inherit}
    a{color:inherit;text-decoration:none}

    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#666666;
      --line:#e9e9e9;
      --chip:#f5f5f5;
      --chip-border:#d9d9d9;
      --brand:#111111; /* neutral dark for high contrast */
      --accent:#0b72ff; /* for links & subtle cues */
      --danger:#e44343;
      --radius:14px;
      --safe-bottom:env(safe-area-inset-bottom,0px);
      --safe-top:env(safe-area-inset-top,0px);
    }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:var(--bg);
      min-height:100dvh;
      display:flex;
      flex-direction:column;
    }

    /* --- Sticky mobile header like big marketplaces --- */
    .header{
      position:sticky; top:0; z-index:20;
      background:var(--bg);
      border-bottom:1px solid var(--line);
      padding: calc(8px + var(--safe-top)) 12px 8px 12px;
    }
    .row{display:flex;align-items:center;gap:10px}
    .grow{flex:1}
    .logo{font-weight:700;letter-spacing:.3px}
    .icon-btn{
      width:36px;height:36px;border-radius:12px;border:1px solid var(--line);
      display:inline-grid;place-items:center;background:#fff;
    }
    .icon{width:18px;height:18px;display:block}

    .search{
      display:flex;align-items:center;gap:8px;
      border:1px solid var(--line);border-radius:12px;padding:8px 10px;background:#fff;
    }
    .search input{
      border:0;outline:0;width:100%;
    }

    /* --- Horizontal icon filter rail (tappable chips) --- */
    .rail{
      display:flex;gap:8px;overflow:auto;padding:10px 12px;border-bottom:1px solid var(--line);
      scroll-snap-type:x proximity;
    }
    .chip{
      white-space:nowrap; padding:8px 12px; background:var(--chip);
      border:1px solid var(--chip-border); border-radius:999px; font-size:14px;
      scroll-snap-align:start;
    }
    .chip--dark{background:var(--text);color:#fff;border-color:var(--text)}
    .chip a{display:block}

    /* --- Sections --- */
    main{flex:1; display:flex; flex-direction:column}
    .section{padding:12px}
    .section h2{font-size:18px;margin:6px 0 10px 0}
    .grid{
      display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;
    }
    .card{
      border:1px solid var(--line);border-radius:16px;overflow:hidden;background:#fff;
    }
    .card .img{aspect-ratio:1/1;background:#f3f3f3}
    .card .meta{padding:8px}
    .price{font-weight:700}
    .sub{color:var(--muted);font-size:12px}
    .card-actions{display:flex;gap:8px;margin-top:8px}
    .btn{
      display:inline-grid;place-items:center;border:1px solid var(--line);
      border-radius:10px;padding:6px 8px;background:#fff
    }
    .btn--heart[aria-pressed="true"]{border-color:#ff7b7b;background:#ffecec}

    /* --- “View all” links row --- */
    .links{display:flex;gap:10px;flex-wrap:wrap}
    .link-pill{padding:8px 12px;border:1px solid var(--line);border-radius:999px}

    /* --- Bottom mobile nav (tabbar) --- */
    .tabbar{
      position:sticky;bottom:0;z-index:30;background:#fff;border-top:1px solid var(--line);
      padding:8px 10px calc(8px + var(--safe-bottom)) 10px;
    }
    .tabs{display:flex;justify-content:space-between}
    .tab{flex:1; text-align:center; font-size:12px; color:#333}
    .tab .icon{margin: 0 auto 4px auto}

    /* --- Desktop light enhancements --- */
    @media (min-width:768px){
      .header, .rail, .section, .tabbar{max-width:1100px;margin:0 auto}
      .search{max-width:560px;margin:0 auto}
      .grid{grid-template-columns:repeat(4,minmax(0,1fr))}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="row" style="justify-content:space-between">
      <div class="logo">Hemline</div>
      <div class="row">
        <button class="icon-btn" id="btn-bell" aria-label="Notifications" title="Notifications">
          <!-- bell -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 3a6 6 0 0 0-6 6v3.1l-1.6 2.9A1 1 0 0 0 5.3 17h13.4a1 1 0 0 0 .9-1.4L18 12.1V9a6 6 0 0 0-6-6Z"/><path d="M9 18a3 3 0 0 0 6 0"/></svg>
        </button>
        <a class="icon-btn" href="browse.html" aria-label="Cart" title="Cart">
          <!-- bag -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M6 7h12l1 12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2L6 7Z"/><path d="M9 7a3 3 0 1 1 6 0"/></svg>
        </a>
        <a class="icon-btn" href="#" aria-label="Account" title="Account">
          <!-- user -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="12" cy="7" r="4"/><path d="M4 20a8 8 0 0 1 16 0"/></svg>
        </a>
      </div>
    </div>
    <div class="row" style="margin-top:8px">
      <div class="search grow">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="11" cy="11" r="7"/><path d="M20 20l-3.5-3.5"/></svg>
        <input id="homeSearch" type="search" placeholder="Search fabrics, sellers, colors…" />
        <button class="icon-btn" id="goSearch" aria-label="Go">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Icon rail (primary shortcuts) -->
  <nav class="rail" aria-label="Quick filters">
    <div class="chip"><a href="browse.html?department=Fabric">Department</a></div>
    <div class="chip"><a href="browse.html?content=Cashmere">Content</a></div>
    <div class="chip"><a href="browse.html?color=Ivory">Color</a></div>
    <div class="chip"><a href="browse.html?width_min=54&width_max=60">Width</a></div>
    <div class="chip"><a href="browse.html?weight_min=150&weight_max=280">Weight</a></div>
    <div class="chip"><a href="browse.html?designer=Chlo%C3%A9">Designer</a></div>
    <div class="chip"><a href="browse.html?country=Italy">Country</a></div>
    <div class="chip"><a href="browse.html?pattern=Solid">Pattern</a></div>
    <div class="chip"><a href="browse.html?type=Wool%20Crepe">Fabric Type</a></div>
    <div class="chip chip--dark"><a href="browse.html">Browse All</a></div>
  </nav>

  <main>
    <!-- New Arrivals (sample) -->
    <section class="section">
      <h2>New Arrivals</h2>
      <div class="grid" id="newArrivals"></div>
    </section>

    <!-- Favorites -->
    <section class="section">
      <h2>Favorites</h2>
      <div class="grid" id="favoritesGrid"></div>
      <div class="links" id="favEmpty" style="display:none">
        <a class="link-pill" href="browse.html">Browse to add favorites →</a>
      </div>
    </section>

    <!-- Recently Viewed -->
    <section class="section" style="margin-bottom:90px">
      <h2>Recently Viewed</h2>
      <div class="grid" id="recentGrid"></div>
      <div class="links" id="recEmpty" style="display:none">
        <a class="link-pill" href="browse.html">Start exploring →</a>
      </div>
    </section>
  </main>

  <!-- Bottom Tabbar -->
  <nav class="tabbar" role="navigation" aria-label="Primary">
    <div class="tabs">
      <a class="tab" href="index.html" aria-current="page">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5Z"/></svg>
        Home
      </a>
      <a class="tab" href="browse.html">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        Browse
      </a>
      <a class="tab" href="seller.html">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M3 7h18l-2 12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2L3 7Z"/><path d="M16 7a4 4 0 0 0-8 0"/></svg>
        Sell
      </a>
      <a class="tab" href="browse.html#fav">
        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21s-7.5-4.2-9.5-8.6C1.2 8.8 3.5 6 6.6 6c1.9 0 3.1 1 3.9 2 0 0 .3.4.5.4s.5-.4.5-.4c.8-1 2-2 3.9-2 3.1 0 5.4 2.8 4.1 6.4C19.5 16.8 12 21 12 21Z"/></svg>
        Saved
      </a>
    </div>
  </nav>

  <script>
    // Minimal demo dataset (ids must match browse page so recents/favs sync)
    const DATA=[
      {id:'itm-1', name:'Italian Wool Crepe — Saffron', price:48, unit:'/yd', img:'', tags:['New','Solid'], content:'Wool', color:'Yellow'},
      {id:'itm-2', name:'Bamboo French Terry — Natural', price:22, unit:'/yd', img:'', tags:['New','Cozy'], content:'Bamboo', color:'Ivory'},
      {id:'itm-3', name:'Silk Habotai Lining — Blush', price:18, unit:'/yd', img:'', tags:['New','Lining'], content:'Silk', color:'Pink'},
      {id:'itm-4', name:'Japanese Denim — Indigo 11oz', price:32, unit:'/yd', img:'', tags:['New','Denim'], content:'Cotton', color:'Navy'}
    ];

    const $ = (sel,root=document)=>root.querySelector(sel);
    const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel));

    function cardHTML(item){
      return `
      <article class="card" data-id="${item.id}">
        <div class="img" role="img" aria-label="${item.name}"></div>
        <div class="meta">
          <div style="font-size:14px;line-height:1.2">${item.name}</div>
          <div class="row" style="justify-content:space-between;margin-top:6px">
            <div class="price">$${item.price}<span class="sub">${item.unit}</span></div>
            <div class="card-actions">
              <button class="btn btn--heart" data-heart aria-pressed="false" title="Save">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21s-7.5-4.2-9.5-8.6C1.2 8.8 3.5 6 6.6 6c1.9 0 3.1 1 3.9 2 0 0 .3.4.5.4s.5-.4.5-.4c.8-1 2-2 3.9-2 3.1 0 5.4 2.8 4.1 6.4C19.5 16.8 12 21 12 21Z"/></svg>
              </button>
              <a class="btn" href="browse.html#${item.id}" title="View">View</a>
            </div>
          </div>
        </div>
      </article>`;
    }

    function lsGet(k, fallback){ try{ return JSON.parse(localStorage.getItem(k)||JSON.stringify(fallback)); }catch{ return fallback; } }
    function lsSet(k,v){ localStorage.setItem(k, JSON.stringify(v)); }

    // Render New Arrivals
    $('#newArrivals').innerHTML = DATA.map(cardHTML).join('');

    // Favorites
    const favs = new Set(lsGet('hm_favs', []));
    $$('#newArrivals [data-heart]').forEach(btn=>{
      const id = btn.closest('.card').dataset.id;
      if(favs.has(id)) btn.setAttribute('aria-pressed','true');
      btn.addEventListener('click', ()=>{
        const pressed = btn.getAttribute('aria-pressed')==='true';
        if(pressed){ favs.delete(id); btn.setAttribute('aria-pressed','false'); }
        else{ favs.add(id); btn.setAttribute('aria-pressed','true'); }
        lsSet('hm_favs', Array.from(favs));
        paintFavs();
      });
    });

    function paintFavs(){
      const ids = Array.from(favs);
      const items = DATA.filter(x=>ids.includes(x.id));
      $('#favoritesGrid').innerHTML = items.length ? items.map(cardHTML).join('') : '';
      $('#favEmpty').style.display = items.length ? 'none':'flex';
    }
    paintFavs();

    function paintRecents(){
      const rec = lsGet('hm_recents', []).slice(0,8);
      const items = DATA.filter(x=>rec.includes(x.id));
      $('#recentGrid').innerHTML = items.length ? items.map(cardHTML).join('') : '';
      $('#recEmpty').style.display = items.length ? 'none':'flex';
    }
    paintRecents();

    // Search → sends to browse with ?q=
    $('#goSearch').addEventListener('click', ()=>{
      const q = ($('#homeSearch').value||'').trim();
      location.href = q ? `browse.html?q=${encodeURIComponent(q)}` : 'browse.html';
    });
    $('#homeSearch').addEventListener('keydown', (e)=>{ if(e.key==='Enter') $('#goSearch').click(); });
  </script>
</body>
</html>
