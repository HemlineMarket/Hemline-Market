<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Your Atelier — Hemline Market</title>

  <!-- Shared styles -->
  <link rel="stylesheet" href="styles/hm-modern.css"/>
  <link rel="stylesheet" href="styles/hm-header.css"/>
  <link rel="stylesheet" href="styles/hm-typography.css"/>
  <link rel="stylesheet" href="styles/hm-footer.css"/>
  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>

  <style>
    :root{
      --hm-accent:#991b1b;
      --hm-text:#111827;
      --hm-muted:#6b7280;
      --hm-border:#e5e7eb;
      --hm-bg:#f3f4f6;
    }
    body{
      margin:0;
      background:var(--hm-bg);
      color:var(--hm-text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
    }

    main.wrap{
      max-width:1200px;
      margin:18px auto 28px;
      padding:0 12px;
    }
    h1{
      margin:0 0 4px;
      font-size:28px;
      font-weight:800;
    }
    .subtle{
      margin:0 0 16px;
      font-size:14px;
      color:var(--hm-muted);
    }

    /* Layout: listings main, shop info sidebar */
    .atelier-layout{
      display:grid;
      grid-template-columns:minmax(0,3fr) minmax(280px,1.3fr);
      gap:16px;
      align-items:flex-start;
    }
    @media (max-width:960px){
      .atelier-layout{
        grid-template-columns:1fr;
      }
    }

    .card{
      background:#fff;
      border:1px solid var(--hm-border);
      border-radius:12px;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
    }
    .card .hd{
      padding:10px 12px;
      border-bottom:1px solid var(--hm-border);
      font-weight:800;
      font-size:15px;
    }
    .card .bd{
      padding:12px;
      font-size:14px;
    }

    /* Listings */
    .listings-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom:8px;
    }
    .listings-header h2{
      margin:0;
      font-size:15px;
      font-weight:800;
    }
    .pill-muted{
      font-size:12px;
      color:var(--hm-muted);
    }
    .btn{
      padding:8px 14px;
      border-radius:10px;
      border:1px solid var(--hm-border);
      background:#fff;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
    }
    .btn.primary{
      border-color:var(--hm-accent);
      background:var(--hm-accent);
      color:#fff;
      box-shadow:0 2px 8px rgba(153,27,27,.25);
    }

    .listing-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
      gap:12px;
      margin-top:4px;
    }
    .listing-card{
      border:1px solid var(--hm-border);
      border-radius:12px;
      overflow:hidden;
      background:#fff;
      display:flex;
      flex-direction:column;
    }
    .listing-thumb{
      background:#e5e7eb;
      height:160px;
    }
    .listing-content{
      padding:10px 10px 8px;
      font-size:13px;
    }
    .listing-title{
      font-weight:700;
      margin-bottom:2px;
    }
    .listing-meta{
      font-size:12px;
      color:var(--hm-muted);
    }
    .listing-price-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:6px;
      font-size:13px;
    }
    .listing-empty{
      grid-column:1 / -1;
      padding:16px 10px 8px;
      font-size:13px;
      color:var(--hm-muted);
    }

    /* Sidebar: profile + extras */
    .profile-card-main{
      display:flex;
      gap:12px;
      align-items:flex-start;
      margin-bottom:8px;
    }
    .profile-avatar{
      width:52px;
      height:52px;
      border-radius:999px;
      border:1px solid var(--hm-border);
      display:grid;
      place-items:center;
      font-weight:800;
      font-size:16px;
      color:#fbbf24;
      background:#fefce8;
    }
    .profile-text{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .profile-name{
      font-weight:800;
    }
    .profile-location{
      font-size:13px;
      color:var(--hm-muted);
    }
    .profile-bio{
      font-size:13px;
      color:var(--hm-muted);
    }
    .profile-handle{
      margin-top:6px;
      font-size:13px;
      font-weight:600;
    }
    .profile-tagline{
      font-size:13px;
      color:var(--hm-muted);
    }
    .profile-stats{
      margin-top:8px;
      font-size:12px;
      color:var(--hm-muted);
    }
    .profile-footer-note{
      margin-top:8px;
      font-size:11px;
      color:var(--hm-muted);
    }
    .profile-actions{
      margin-top:10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    .links-list{
      display:grid;
      gap:6px;
      font-size:13px;
    }
    .links-list dt{
      font-weight:700;
      font-size:12px;
      color:#374151;
    }
    .links-list dd{
      margin:0;
    }
    .links-list a{
      color:#1d4ed8;
      text-decoration:none;
    }
    .links-list a:hover{
      text-decoration:underline;
    }
    .links-note{
      margin-top:6px;
      font-size:11px;
      color:var(--hm-muted);
    }

    .copyrow{
      display:grid;
      grid-template-columns:1fr auto;
      gap:8px;
      align-items:center;
      margin-top:6px;
    }
    .copyrow input{
      width:100%;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--hm-border);
      font-size:12px;
    }
    .copy-msg{
      margin-top:4px;
      font-size:11px;
      color:var(--hm-muted);
      display:none;
    }

    .rating-wrap{
      display:flex;
      flex-direction:column;
      gap:8px;
      font-size:13px;
    }
    .rating-row{
      display:flex;
      justify-content:space-between;
      gap:8px;
    }
    .rating-stat{
      flex:1;
      border:1px solid var(--hm-border);
      border-radius:10px;
      padding:8px 10px;
      background:#f9fafb;
    }
    .rating-big{
      font-size:16px;
      font-weight:800;
    }
    .rating-label{
      font-size:11px;
      color:var(--hm-muted);
    }
    .rating-meter{
      height:6px;
      background:#f3f4f6;
      border-radius:999px;
      overflow:hidden;
      margin-top:6px;
    }
    .rating-meter span{
      display:block;
      height:100%;
      width:0;
      background:var(--hm-accent);
    }
    .rating-note{
      font-size:11px;
      color:var(--hm-muted);
    }

    @media (max-width:640px){
      main.wrap{
        padding:0 8px;
      }
      h1{
        font-size:24px;
      }
    }
  </style>
</head>
<body>

<!-- HEADER (same visual style as other pages) -->
<header class="hm-header" role="banner">
  <div class="wrap">
    <div class="left">
      <button class="hamburger" id="openMenu" type="button" aria-label="Open menu" aria-controls="menuSheet" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6"  x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
      <a class="hm-brand" href="index.html">Hemline Market</a>
    </div>

    <div class="right">
      <a class="hm-icon" href="browse.html" aria-label="Browse &amp; search">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="M21 21l-4.3-4.3"></path>
        </svg>
      </a>
      <a class="hm-icon" href="ThreadTalk.html" aria-label="ThreadTalk" title="ThreadTalk">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M4 6.5A4.5 4.5 0 0 1 8.5 2h7A4.5 4.5 0 0 1 20 6.5v5A4.5 4.5 0 0 1 15.5 16H12l-4 4v-4H8.5A4.5 4.5 0 0 1 4 11.5z"></path>
        </svg>
      </a>
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
      </a>
      <a class="hm-icon" href="notifications.html" aria-label="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
      </a>
      <a class="hm-icon" href="cart.html" aria-label="Cart">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="18" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </a>
      <!-- Static initials for now; wired per-user later -->
      <a class="hm-avatar" id="avatar" href="account.html" title="Your account">RK</a>
      <a class="hm-btn-primary" href="sell.html">Sell</a>
    </div>
  </div>
</header>

<!-- LEFT DRAWER / HAMBURGER MENU (match homepage options) -->
<aside class="sheet" id="menuSheet" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Site menu">
  <header>
    <strong>Menu</strong>
    <button class="close" id="closeMenu" aria-label="Close menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </header>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="atelier.html">My Atelier</a>
    <a href="how.html">How It Works</a>
    <a href="sell.html">Sell Fabric</a>
    <a href="ThreadTalk.html">ThreadTalk</a>
    <a href="contact.html">Contact</a>
  </nav>
</aside>

<main class="wrap" id="maincontent">
  <h1>Your Atelier</h1>
  <p class="subtle">
    Your public shop profile and listings. Buyers see this page when they tap your name on a listing.
  </p>

  <div class="atelier-layout">
    <!-- LEFT: LISTINGS MAIN AREA -->
    <section class="card">
      <div class="hd">Listings</div>
      <div class="bd">
        <div class="listings-header">
          <h2>Available fabric</h2>
          <button class="btn primary" type="button" onclick="location.href='sell.html'">
            List a fabric
          </button>
        </div>
        <div class="pill-muted">New listings appear here as soon as you publish them.</div>

        <div class="listing-grid" id="listingGrid">
          <!-- Empty state for now. When wired to Supabase, real tiles will be injected here. -->
          <div class="listing-empty">
            No active listings yet. List fabric from your <strong>Sell</strong> page and your cards will appear here with photos, yardage, and prices.
          </div>
        </div>
      </div>
    </section>

    <!-- RIGHT: SHOP PROFILE + EXTRAS -->
    <aside>
      <!-- Profile -->
      <section class="card">
        <div class="hd">Profile</div>
        <div class="bd">
          <div class="profile-card-main">
            <div class="profile-avatar" id="profileAvatarCircle">H</div>
            <div class="profile-text">
              <div class="profile-name" id="profileName">Roza Kalwar</div>
              <div class="profile-location" id="profileLocation">Location coming soon</div>
              <div class="profile-bio" id="profileBio">
                Add a short note about your sourcing, favorite textiles, or sewing style.
              </div>
            </div>
          </div>

          <div class="profile-handle" id="profileHandle">@your.shop</div>
          <div class="profile-tagline" id="profileTagline">
            Designer deadstock, atelier finds, and fabrics with a story.
          </div>

          <div class="profile-stats" id="profileStats">
            0 completed listings · 0% on-time shipping
          </div>

          <p class="profile-footer-note">
            Buyers only see this page — not your address or payout information.
            Edit your name, location, bio, and shop details on your <a href="account.html">Account</a> page.
          </p>

          <div class="profile-actions">
            <button class="btn" type="button" onclick="location.href='sell.html'">List a fabric</button>
            <button class="btn" type="button" onclick="location.href='account.html'">Edit shop details</button>
          </div>
        </div>
      </section>

      <!-- Share your shop -->
      <section class="card" style="margin-top:12px;">
        <div class="hd">Share your shop</div>
        <div class="bd">
          <label for="shopLink" style="font-size:12px;font-weight:700;color:#374151;">Public link</label>
          <div class="copyrow">
            <input id="shopLink" type="text" readonly value="">
            <button id="copyBtn" class="btn" type="button">Copy</button>
          </div>
          <div id="copyMsg" class="copy-msg">Link copied!</div>
          <p class="rating-note" style="margin-top:8px;">
            Tip: your link updates as you refine your shop name and story.
          </p>
        </div>
      </section>

      <!-- Links -->
      <section class="card" style="margin-top:12px;">
        <div class="hd">Links</div>
        <div class="bd">
          <dl class="links-list">
            <div>
              <dt>Website</dt>
              <dd id="shopWebsite"><span class="pill-muted">Add a link on your Account page.</span></dd>
            </div>
            <div>
              <dt>Instagram</dt>
              <dd id="shopInstagram"><span class="pill-muted">@yourhandle</span></dd>
            </div>
            <div>
              <dt>TikTok</dt>
              <dd id="shopTiktok"><span class="pill-muted">@yourhandle</span></dd>
            </div>
          </dl>
          <p class="links-note">
            You can share these in your listings or messages — we won’t show private contact details.
          </p>
        </div>
      </section>

      <!-- Shop rating -->
      <section class="card" style="margin-top:12px;">
        <div class="hd">Shop rating</div>
        <div class="bd">
          <div class="rating-wrap">
            <div class="rating-row">
              <div class="rating-stat">
                <div class="rating-big" id="completedCount">0</div>
                <div class="rating-label">Completed listings</div>
              </div>
              <div class="rating-stat">
                <div class="rating-big"><span id="onTimePct">0</span>%</div>
                <div class="rating-label">On-time shipments</div>
                <div class="rating-meter"><span id="meterFill"></span></div>
              </div>
            </div>
            <button class="btn" type="button" aria-disabled="true" style="opacity:.7;cursor:default;">
              Not yet rated
            </button>
            <p class="rating-note">
              Ratings appear after you’ve sold at least 5 listings. We show your on-time shipping percentage — no public comments.
            </p>
          </div>
        </div>
      </section>
    </aside>
  </div>
</main>

<footer class="hm-footer" role="contentinfo">
  <div class="footer-wrap">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="faq.html">FAQ</a>
      <a href="contact.html">Contact</a>
      <a href="terms.html">Terms</a>
      <a href="privacy.html">Privacy</a>
    </nav>
  </div>
</footer>

<script>
  // Hamburger / sheet
  (function(){
    const sheet   = document.getElementById('menuSheet');
    const openBtn = document.getElementById('openMenu');
    const closeBtn= document.getElementById('closeMenu');

    function openSheet(){
      if (!sheet) return;
      sheet.classList.add('open');
      sheet.setAttribute('aria-hidden','false');
      if (openBtn) openBtn.setAttribute('aria-expanded','true');
    }
    function closeSheet(){
      if (!sheet) return;
      sheet.classList.remove('open');
      sheet.setAttribute('aria-hidden','true');
      if (openBtn) openBtn.setAttribute('aria-expanded','false');
    }

    if (openBtn && closeBtn){
      openBtn.addEventListener('click', function(e){ e.preventDefault(); openSheet(); });
      closeBtn.addEventListener('click', function(e){ e.preventDefault(); closeSheet(); });
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape') closeSheet();
      });
    }
  })();

  // Public atelier link builder + copy
  (function(){
    const shopLink = document.getElementById('shopLink');
    const copyBtn  = document.getElementById('copyBtn');
    const copyMsg  = document.getElementById('copyMsg');

    if (shopLink){
      const base = window.location.origin || (location.protocol + '//' + location.host);
      shopLink.value = base + '/atelier.html';
    }

    if (copyBtn && shopLink && copyMsg){
      copyBtn.addEventListener('click', async ()=>{
        try{
          await navigator.clipboard.writeText(shopLink.value);
        }catch(e){
          shopLink.select();
          document.execCommand('copy');
        }
        copyMsg.style.display = 'block';
        setTimeout(()=>copyMsg.style.display='none', 1300);
      });
    }
  })();

  // Placeholder rating values from localStorage (optional)
  (function(){
    try{
      const completed = Number(localStorage.getItem('hm.seller.completed') || 0);
      const ontime    = Math.max(0, Math.min(100, Number(localStorage.getItem('hm.seller.ontime') || 0)));
      const completedEl = document.getElementById('completedCount');
      const onTimeEl    = document.getElementById('onTimePct');
      const meterFill   = document.getElementById('meterFill');
      if (completedEl) completedEl.textContent = completed;
      if (onTimeEl)    onTimeEl.textContent    = ontime;
      if (meterFill)   meterFill.style.width   = ontime + '%';
    }catch(e){}
  })();
</script>

</body>
</html>
