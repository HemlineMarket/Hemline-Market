<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Seller Profile — Hemline Market</title>

  <!-- Shared styles -->
  <link rel="stylesheet" href="styles/hm-modern.css"/>
  <link rel="stylesheet" href="styles/hm-header.css"/>
  <link rel="stylesheet" href="styles/hm-typography.css"/>
  <link rel="stylesheet" href="styles/hm-footer.css"/>
  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>

  <style>
    :root{
      --ink:#111827;
      --muted:#6b7280;
      --border:#e5e7eb;
      --accent:#991b1b;
      --bg:#fafafa;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
    }

    main.wrap{
      max-width:1100px;
      margin:18px auto 28px;
      padding:0 12px;
    }
    h1{
      margin:0 0 8px;
      font-size:26px;
      font-weight:800;
    }
    .subtle{
      color:var(--muted);
      margin:0 0 14px;
      font-size:14px;
    }

    /* Grid */
    .grid{
      display:grid;
      grid-template-columns:1fr 320px;
      gap:14px;
      align-items:flex-start;
    }
    @media (max-width:980px){
      .grid{
        grid-template-columns:1fr;
      }
    }

    /* Cards + fields */
    .card{
      background:#fff;
      border:1px solid var(--border);
      border-radius:12px;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
    }
    .card .hd{
      padding:10px 12px;
      border-bottom:1px solid var(--border);
      font-weight:800;
      font-size:14px;
    }
    .card .bd{
      padding:12px;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom:10px;
    }
    .field label{
      font-size:12px;
      color:#374151;
      font-weight:700;
    }
    .field input[type="text"],
    .field input[type="url"],
    .field textarea{
      padding:10px;
      border:1px solid var(--border);
      border-radius:10px;
      background:#fff;
      font-size:14px;
    }
    .field textarea{
      min-height:110px;
      resize:vertical;
    }

    .actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      padding:10px 14px;
      border:1px solid var(--border);
      border-radius:10px;
      background:#fff;
      font-weight:700;
      cursor:pointer;
      font-size:14px;
    }
    .btn.primary{
      background:var(--accent);
      border-color:var(--accent);
      color:#fff;
      box-shadow:0 2px 8px rgba(153,27,27,.25);
    }

    /* Avatar on sidebar */
    .avatar{
      width:84px;
      height:84px;
      border-radius:999px;
      border:1px solid var(--border);
      display:grid;
      place-items:center;
      font-weight:800;
      color:#334155;
      background:#fff;
      background-size:cover;
      background-position:center;
      font-size:24px;
    }

    /* Rating */
    .rating-wrap{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .meter{
      height:8px;
      background:#f3f4f6;
      border-radius:999px;
      overflow:hidden;
    }
    .meter > span{
      display:block;
      height:100%;
      background:var(--accent);
      width:0;
    }
    .stat{
      border:1px solid var(--border);
      border-radius:10px;
      padding:10px;
      background:#fff;
    }
    .stat .big{
      font-weight:800;
      font-size:18px;
    }
    .stat .label{
      color:var(--muted);
      font-size:12px;
    }

    /* Copy link row */
    .copyrow{
      display:grid;
      grid-template-columns:1fr auto;
      gap:8px;
    }
    .pill{
      border:1px solid var(--border);
      border-radius:999px;
      padding:6px 10px;
      font-weight:700;
      display:inline-block;
      font-size:12px;
      color:#374151;
    }

    @media (max-width:640px){
      main.wrap{
        padding:0 8px;
      }
    }
  </style>
</head>
<body>

<!-- HEADER: match account/header layout, includes ThreadTalk -->
<header class="hm-header" role="banner">
  <div class="wrap">
    <div class="left">
      <button class="hamburger" id="openMenu" type="button" aria-label="Open menu" aria-controls="menuSheet" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6"  x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
      <a class="hm-brand" href="index.html">Hemline Market</a>
    </div>

    <div class="right">
      <a class="hm-icon" href="browse.html" aria-label="Browse &amp; search">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="M21 21l-4.3-4.3"></path>
        </svg>
      </a>
      <a class="hm-icon" href="ThreadTalk.html" aria-label="ThreadTalk" title="ThreadTalk">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M4 6.5A4.5 4.5 0 0 1 8.5 2h7A4.5 4.5 0 0 1 20 6.5v5A4.5 4.5 0 0 1 15.5 16H12l-4 4v-4H8.5A4.5 4.5 0 0 1 4 11.5z"></path>
        </svg>
      </a>
      <a class="hm-icon" href="favorites.html" aria-label="Favorites">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
      </a>
      <a class="hm-icon" href="notifications.html" aria-label="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
      </a>
      <a class="hm-icon" href="cart.html" aria-label="Cart">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="9"  cy="21" r="1"></circle>
          <circle cx="18" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </a>

      <!-- Avatar pill in header (will be wired to Supabase later) -->
      <a class="hm-avatar" id="headerAvatar" href="account.html" title="Your account">RK</a>

      <a class="hm-btn-primary" href="sell.html">Sell</a>
    </div>
  </div>
</header>

<!-- OVERLAY + LEFT MENU -->
<div id="sheetOverlay" aria-hidden="true"></div>

<aside class="sheet" id="menuSheet" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Site menu">
  <header>
    <strong>Menu</strong>
    <button class="close" id="closeMenu" aria-label="Close menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </header>
  <nav>
    <a href="browse.html">Browse</a>
    <a href="atelier.html">My Atelier</a>
    <a href="orders.html">Orders</a>
    <a href="favorites.html">Favorites</a>
    <a href="ThreadTalk.html">ThreadTalk</a>
    <a href="account.html">Account</a>
    <a href="help.html">Help</a>
  </nav>
</aside>

<main class="wrap" id="maincontent">
  <h1>Seller Profile</h1>
  <p class="subtle">Set up the shop buyers see on your listings and Atelier page.</p>

  <div class="grid">
    <!-- LEFT COLUMN: shop details -->
    <section>
      <article class="card">
        <div class="hd">Shop info</div>
        <div class="bd">
          <div class="field">
            <label for="shopName">Shop name</label>
            <input id="shopName" type="text" placeholder="@e.g., LoomLab"/>
          </div>
          <div class="field">
            <label for="shopTagline">Tagline</label>
            <input id="shopTagline" type="text" placeholder="Designer deadstock &amp; luxury fabrics"/>
          </div>
          <div class="field">
            <label for="shopAbout">About</label>
            <textarea id="shopAbout" placeholder="Tell buyers about your sourcing, favorite textiles, or specialties…"></textarea>
          </div>
        </div>
      </article>

      <article class="card" style="margin-top:12px;">
        <div class="hd">Links</div>
        <div class="bd">
          <div class="field">
            <label for="shopWebsite">Website</label>
            <input id="shopWebsite" type="url" placeholder="https://example.com"/>
          </div>
          <div class="field">
            <label for="shopInstagram">Instagram</label>
            <input id="shopInstagram" type="text" placeholder="@yourhandle"/>
          </div>
          <div class="field">
            <label for="shopTiktok">TikTok</label>
            <input id="shopTiktok" type="text" placeholder="@yourhandle"/>
          </div>
          <div class="actions" style="margin-top:6px;">
            <button class="btn primary" type="button">Save profile</button>
            <button class="btn" type="button">Reset</button>
            <a class="btn" href="atelier.html">View My Atelier</a>
          </div>
        </div>
      </article>
    </section>

    <!-- RIGHT COLUMN: avatar, rating, share -->
    <aside>
      <article class="card">
        <div class="hd">Avatar</div>
        <div class="bd">
          <div class="avatar" id="sellerAvatar">RK</div>
          <p class="subtle" style="margin-top:10px;">
            Your avatar and initials come from your Account profile. We’ll reuse the same photo everywhere.
          </p>
          <a class="btn" href="account.html" style="margin-top:6px;display:inline-block;">Edit on Account page</a>
        </div>
      </article>

      <article class="card" style="margin-top:12px;">
        <div class="hd">Shop rating</div>
        <div class="bd">
          <div class="rating-wrap" style="margin-bottom:10px;">
            <div class="stat">
              <div class="big" id="completedCount">0</div>
              <div class="label">Completed listings</div>
            </div>
            <div class="stat">
              <div class="big"><span id="onTimePct">0</span>%</div>
              <div class="label">On-time shipments</div>
              <div class="meter" style="margin-top:8px;">
                <span id="meterFill" style="width:0%;"></span>
              </div>
            </div>
          </div>
          <button class="btn" type="button" aria-disabled="true" style="opacity:.7;cursor:default;">
            Not yet rated
          </button>
          <p class="subtle" style="margin-top:8px;">
            Ratings appear after you’ve sold at least 5 listings. We show your on-time shipping percentage—no public comments.
          </p>
        </div>
      </article>

      <article class="card" style="margin-top:12px;">
        <div class="hd">Share your shop</div>
        <div class="bd">
          <div class="field" style="margin-bottom:8px;">
            <label for="shopLink">Public link</label>
            <div class="copyrow">
              <input id="shopLink" type="text" readonly value=""/>
              <button id="copyBtn" class="btn" type="button">Copy</button>
            </div>
            <div id="copyMsg" class="subtle" style="margin-top:6px;display:none;">
              Link copied!
            </div>
          </div>
          <span class="pill">
            Tip: your link updates as you edit your shop name.
          </span>
        </div>
      </article>
    </aside>
  </div>
</main>

<footer class="hm-footer" role="contentinfo">
  <div class="footer-wrap">
    <div class="copy">© 2025 Hemline Market</div>
    <nav class="footer-links" aria-label="Footer">
      <a href="about.html">About</a>
      <a href="faq.html">FAQ</a>
      <a href="contact.html">Contact</a>
      <a href="terms.html">Terms</a>
      <a href="privacy.html">Privacy</a>
    </nav>
  </div>
</footer>

<script>
  // Hamburger + sheet (same pattern as account.html, no auth drawer here)
  (function(){
    const sheet   = document.getElementById('menuSheet');
    const openBtn = document.getElementById('openMenu');
    const closeBtn= document.getElementById('closeMenu');
    const overlay = document.getElementById('sheetOverlay');

    function lockScroll(lock){
      document.body.style.overflow = lock ? 'hidden' : '';
    }
    function openSheet(){
      if (!sheet) return;
      sheet.classList.add('open');
      sheet.setAttribute('aria-hidden','false');
      if (overlay){
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden','false');
      }
      if (openBtn) openBtn.setAttribute('aria-expanded','true');
      lockScroll(true);
    }
    function closeSheet(){
      if (!sheet) return;
      sheet.classList.remove('open');
      sheet.setAttribute('aria-hidden','true');
      if (overlay){
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
      }
      if (openBtn) openBtn.setAttribute('aria-expanded','false');
      lockScroll(false);
    }

    if (openBtn && closeBtn && sheet){
      openBtn.addEventListener('click', function(e){ e.preventDefault(); openSheet(); });
      closeBtn.addEventListener('click', function(e){ e.preventDefault(); closeSheet(); });
      if (overlay){
        overlay.addEventListener('click', closeSheet);
      }
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape') closeSheet();
      });
    }
  })();

  // Avatar + rating demo + share link slug
  (function(){
    const avatar = document.getElementById('sellerAvatar');
    const headerAvatar = document.getElementById('headerAvatar');

    // If we ever store an avatar URL in localStorage, reuse it here
    try {
      const url = localStorage.getItem('hm.avatarUrl');
      const initials = localStorage.getItem('hm.avatarInitials') || 'RK';

      if (avatar){
        if (url){
          avatar.textContent = '';
          avatar.style.backgroundImage = "url('" + url + "')";
        } else {
          avatar.textContent = initials;
        }
      }
      if (headerAvatar && !headerAvatar.style.backgroundImage){
        headerAvatar.textContent = initials;
      }
    } catch (e) {
      // ignore
    }

    // Demo rating values using localStorage (optional)
    try{
      const completed = Number(localStorage.getItem('hm.seller.completed') || 0);
      const ontime    = Number(localStorage.getItem('hm.seller.ontime') || 0);
      const pct       = Math.max(0, Math.min(100, ontime));

      const completedEl = document.getElementById('completedCount');
      const pctEl       = document.getElementById('onTimePct');
      const fillEl      = document.getElementById('meterFill');

      if (completedEl) completedEl.textContent = completed;
      if (pctEl)       pctEl.textContent = pct;
      if (fillEl)      fillEl.style.width = pct + '%';
    }catch(e){
      // ignore
    }

    // Public link that follows shop name
    const shopName = document.getElementById('shopName');
    const shopLink = document.getElementById('shopLink');
    const copyBtn  = document.getElementById('copyBtn');
    const copyMsg  = document.getElementById('copyMsg');

    function slugify(str){
      return (str || '')
        .toLowerCase()
        .trim()
        .replace(/&/g,' and ')
        .replace(/[^a-z0-9]+/g,'-')
        .replace(/^-+|-+$/g,'')
        .substring(0,60);
    }

    function updateLink(){
      if (!shopLink) return;
      const slug = slugify(shopName && shopName.value ? shopName.value : 'my-shop');
      const base = window.location.origin || (location.protocol + '//' + location.host);
      shopLink.value = base + '/atelier.html?shop=' + encodeURIComponent(slug);
    }

    if (shopName){
      updateLink();
      shopName.addEventListener('input', updateLink);
    }

    if (copyBtn && shopLink && copyMsg){
      copyBtn.addEventListener('click', async function(){
        try{
          await navigator.clipboard.writeText(shopLink.value);
          copyMsg.style.display='block';
          setTimeout(()=>copyMsg.style.display='none', 1200);
        }catch(e){
          // fallback
          shopLink.select();
          document.execCommand('copy');
          copyMsg.style.display='block';
          setTimeout(()=>copyMsg.style.display='none', 1200);
        }
      });
    }
  })();
</script>
</body>
</html>
