<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ThreadTalk ‚Äî Tailoring ‚Ä¢ Hemline Market</title>
  <link rel="icon" href="/favicon.ico"/>

  <!-- Shared site styles -->
  <link rel="stylesheet" href="styles/hm-modern.css"/>
  <link rel="stylesheet" href="styles/hem-header.css"/>
  <link rel="stylesheet" href="styles/hm-typography.css"/>
  <link rel="stylesheet" href="styles/hm-footer.css"/>

  <style>
    :root{
      --hm-brand:#991b1b;        /* maroon */
      --ink:#3f2f2a;             /* espresso */
      --muted:#7a6e68;           /* warm gray */
      --border:#e8e0d9;          /* parchment */
      --card:#ffffff;
      --bg:#fdfbf9;
      --accent:#2d2d2d;
    }
    body{
      background:
        radial-gradient(1200px 420px at 50% -240px, rgba(153,27,27,.06) 0%, rgba(253,251,249,0) 60%),
        linear-gradient(180deg, var(--bg) 0%, #fff 100%);
      color:var(--ink);
    }
    .wrap-1200{max-width:1200px;margin:0 auto;padding:0 16px}
    .hm-header{min-height:56px;background:#fff;border-bottom:1px solid var(--border);position:relative;z-index:300}
    .hm-footer{background:#fff;border-top:1px solid var(--border);margin-top:28px}
    .hm-header .hm-brand{color:var(--hm-brand)!important}

    /* Hero band */
    .hero{
      border:1px solid var(--border);border-radius:20px;padding:24px 18px;text-align:center;
      box-shadow:0 10px 20px rgba(50,38,31,.07);
      background:radial-gradient(120% 150% at 50% 0%, #fff 0%, rgba(153,27,27,.05) 55%, #fff 100%);
      margin:22px auto;
    }
    .hero h1{
      font-family:ui-serif,"Cormorant Garamond",Georgia,serif;
      font-size:clamp(28px,4.5vw,44px);
      margin:0 0 6px;
    }
    .hero .sub{color:var(--muted);margin:0 0 14px}

    /* Compact inline composer */
    .composer{
      display:flex;align-items:center;gap:10px;justify-content:center;
      max-width:960px;margin:10px auto 0;
    }
    .pill{
      background:#fff;border:1px solid var(--border);border-radius:999px;padding:8px 12px;font-weight:700;
      box-shadow:0 4px 10px rgba(50,38,31,.04);
    }
    .bubble{
      flex:1; min-height:44px; max-height:140px; overflow:auto;
      background:#fff;border:1px solid var(--border);border-radius:999px;padding:10px 14px;
      box-shadow:0 4px 10px rgba(50,38,31,.04);
    }
    /* contenteditable placeholder */
    .bubble[contenteditable="true"]:empty:before{
      content: attr(data-placeholder);
      color:#9a8f88;
    }

    .icon-btn{
      display:inline-grid; place-items:center; width:40px; height:40px; border-radius:10px;
      border:1px solid var(--border); background:#fff; cursor:pointer;
    }
    .icon-btn svg{width:20px;height:20px}
    .icon-btn.active .icon-photo{color:#dc2626}
    .icon-btn.active .icon-video{color:#2563eb}

    .tt-post{appearance:none;border:1px solid var(--accent);background:var(--accent);color:#fff;
      padding:10px 14px;border-radius:10px;font-weight:700}
    .tt-post:disabled{opacity:.5;cursor:not-allowed}

    .preview-wrap{max-width:960px;margin:8px auto 0;padding:0 6px;display:flex;gap:10px;justify-content:center}
    .preview-wrap img,.preview-wrap video{max-width:160px;max-height:120px;border-radius:10px;border:1px solid var(--border)}

    /* Feed */
    .feed{max-width:1100px;margin:18px auto 0;padding:0 8px}
    .feed h2{font-size:18px;margin:4px 0 12px 4px;color:#5a463d}
    .cards{display:flex;flex-direction:column;gap:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px 18px;box-shadow:0 12px 18px rgba(50,38,31,.07)}
    .meta{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px;margin-bottom:6px}
    .avatar{width:26px;height:26px;border-radius:50%;border:1px solid var(--border);background:#fff;display:inline-grid;place-items:center;font-weight:700;font-size:12px}
    .title{margin:4px 0 8px;line-height:1.35}
    .preview{color:#5e544d;font-size:14px;margin-bottom:8px;white-space:pre-wrap}
    .post-img,.post-video{width:100%;height:auto;border-radius:12px;margin:8px 0;border:1px solid var(--border);display:block;max-height:560px}
    .actions{display:flex;gap:14px;align-items:center;color:#7e6f66;font-size:13px;margin-top:8px}

    a:focus-visible, button:focus-visible{outline:3px solid rgba(153,27,27,.35);outline-offset:2px;border-radius:10px}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="hm-header" role="banner">
    <div class="wrap-1200" style="display:flex;align-items:center;justify-content:space-between;padding:0 12px">
      <div class="left" style="display:flex;align-items:center;gap:10px">
        <button class="hamburger" id="openMenu" aria-label="Open menu" aria-controls="menuSheet"
                style="display:inline-grid;place-items:center;width:36px;height:36px;border:1px solid var(--border);border-radius:10px;background:#fff;color:#4b3d35">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="width:22px;height:22px;stroke-width:2">
            <line x1="4" y1="6"  x2="20" y2="6"></line><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="18" x2="20" y2="18"></line>
          </svg>
        </button>
        <a class="hm-brand" href="index.html" style="font-size:24px;font-weight:800;text-decoration:none">Hemline Market</a>
      </div>
      <div class="right" style="display:flex;align-items:center;gap:14px">
        <a class="hm-icon" href="browse.html" aria-label="Browse & search" style="color:#4b3d35;display:inline-grid;place-items:center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:26px;height:26px;stroke-width:2">
            <circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.3-4.3"></path>
          </svg>
        </a>
        <a class="hm-icon" href="ThreadTalk.html" aria-label="ThreadTalk" title="ThreadTalk" style="color:#4b3d35;display:inline-grid;place-items:center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:26px;height:26px;stroke-width:2">
            <path d="M4 6.5A4.5 4.5 0 0 1 8.5 2h7A4.5 4.5 0 0 1 20 6.5v5A4.5 4.5 0 0 1 15.5 16H12l-4 4v-4H8.5A4.5 4.5 0 0 1 4 11.5z"/>
          </svg>
        </a>
        <a class="hm-icon" href="favorites.html" aria-label="Favorites" style="color:#4b3d35;display:inline-grid;place-items:center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:26px;height:26px;stroke-width:2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
        </a>
        <a class="hm-icon" href="notifications.html" aria-label="Notifications" style="color:#4b3d35;display:inline-grid;place-items:center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:26px;height:26px;stroke-width:2">
            <path d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
        </a>
        <a class="hm-icon" href="cart.html" aria-label="Cart" style="color:#4b3d35;display:inline-grid;place-items:center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" style="width:26px;height:26px;stroke-width:2">
            <circle cx="9" cy="21" r="1"></circle><circle cx="18" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
        </a>
        <a class="hm-avatar" id="avatar" href="account.html" title="Your profile"
           style="width:28px;height:28px;border-radius:50%;border:1px solid var(--border);background:#fff;color:#4b3d35;display:inline-grid;place-items:center;font-weight:700;font-size:12px;text-decoration:none;background-size:cover;background-position:center">AA</a>
        <a class="hm-btn-primary" href="sell.html" style="text-decoration:none;background:#2d2d2d;color:#fff;padding:8px 12px;border-radius:10px;border:1px solid #2d2d2d">Sell</a>
      </div>
    </div>
  </header>

  <main class="wrap-1200" role="main">
    <section class="hero">
      <h1>ThreadTalk ‚Äî Tailoring</h1>
      <p class="sub">Talk fit fixes, interfacing, zippers, pressing order‚Äîeverything tailoring.</p>
      <a href="ThreadTalk.html" class="hm-btn-primary" style="display:inline-block;text-decoration:none;padding:8px 12px;border-radius:10px;background:#2d2d2d;color:#fff;border:1px solid #2d2d2d">Back to ThreadTalk</a>

      <!-- Inline compact composer -->
      <form id="composer" class="composer" aria-label="Create a tailoring thread">
        <span class="pill">Tailoring</span>
        <div id="bubble"
             class="bubble"
             contenteditable="true"
             data-placeholder="Share a tailoring win, woe, or question‚Ä¶"
             aria-label="Write a tailoring post"></div>

        <label class="icon-btn" id="photoBtn" title="Add photo" aria-label="Add photo">
          <input type="file" id="photoInput" accept="image/*" hidden>
          <svg class="icon-photo" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm8 3a4 4 0 1 0 .001 8.001A4 4 0 0 0 12 8z"/>
          </svg>
        </label>
        <label class="icon-btn" id="videoBtn" title="Add video" aria-label="Add video">
          <input type="file" id="videoInput" accept="video/*" hidden>
          <svg class="icon-video" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M15 10.5v-2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-2l5 3v-9l-5 3z"/>
          </svg>
        </label>
        <button type="submit" class="tt-post" id="postBtn">Post</button>
      </form>

      <div class="preview-wrap" id="mediaPreview" hidden></div>
    </section>

    <!-- FEED -->
    <section class="feed" aria-labelledby="feed-title">
      <h2 id="feed-title">Latest Tailoring Threads</h2>
      <div class="cards" id="cards" aria-live="polite"></div>
      <div id="emptyState" style="color:#7a6e68;font-size:14px;margin:12px 4px">No posts yet. Be the first to post!</div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="hm-footer" role="contentinfo">
    <div class="wrap-1200" style="display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;padding:12px 16px">
      <div class="copy">¬© 2025 Hemline Market</div>
      <nav class="footer-links" aria-label="Footer">
        <a href="about.html">About</a>
        <a href="faq.html">FAQ</a>
        <a href="contact.html">Contact</a>
        <a href="terms.html">Terms</a>
        <a href="privacy.html">Privacy</a>
      </nav>
    </div>
  </footer>

  <script>
  (function(){
    /* Optional avatar image */
    try{
      var avatar=document.getElementById('avatar');
      var url=localStorage.getItem('avatarUrl');
      if(avatar && url){ avatar.textContent=''; avatar.style.backgroundImage="url('"+url+"')"; }
    }catch(e){}

    // Elements
    var composer = document.getElementById('composer');
    var bubble   = document.getElementById('bubble');
    var photoIn  = document.getElementById('photoInput');
    var videoIn  = document.getElementById('videoInput');
    var photoBtn = document.getElementById('photoBtn');
    var videoBtn = document.getElementById('videoBtn');
    var preview  = document.getElementById('mediaPreview');
    var cardsEl  = document.getElementById('cards');
    var emptyEl  = document.getElementById('emptyState');

    function initials(name){ return (name||'AA').slice(0,2).toUpperCase(); }

    function renderCard(post, prepend){
      var el = document.createElement('article');
      el.className='card';
      var mediaHTML = '';
      if(post.media && post.media.type==='image'){
        mediaHTML = '<img class="post-img" src="'+post.media.url+'" alt="post image"/>';
      }else if(post.media && post.media.type==='video'){
        mediaHTML = '<video class="post-video" controls src="'+post.media.url+'"></video>';
      }
      el.innerHTML =
        '<div class="meta"><div class="avatar">'+initials(post.user)+'</div><span>'+ (post.user||'You') +'</span> ‚Ä¢ <span>just now</span></div>'+
        '<div class="title"><strong>Tailoring</strong></div>'+
        mediaHTML+
        '<div class="preview">'+post.text+'</div>'+
        '<div class="actions"><span>‚ù§ '+(Math.floor(Math.random()*8)+3)+'</span><span>üí¨ '+(Math.floor(Math.random()*4)+1)+'</span></div>';
      if(prepend && cardsEl.firstChild){ cardsEl.insertBefore(el, cardsEl.firstChild); }
      else cardsEl.appendChild(el);
    }

    function savePost(post){
      try{
        var arr = JSON.parse(localStorage.getItem('tt_posts')||'[]');
        arr.unshift(post);
        localStorage.setItem('tt_posts', JSON.stringify(arr));
      }catch(e){}
    }

    function loadPosts(){
      try{
        var arr = JSON.parse(localStorage.getItem('tt_posts')||'[]');
        var tail = arr.filter(function(p){ return p.category==='Tailoring'; });
        if(tail.length){
          emptyEl.style.display='none';
          tail.forEach(function(p){ renderCard(p,false); });
        }
      }catch(e){}
    }

    function clearComposer(){
      bubble.textContent='';
      photoIn.value=''; videoIn.value='';
      photoBtn.classList.remove('active'); videoBtn.classList.remove('active');
      preview.hidden=true; preview.innerHTML='';
    }

    function showPreview(file, kind){
      if(!file) return;
      var url = URL.createObjectURL(file);
      preview.hidden=false;
      preview.innerHTML='';
      if(kind==='image'){
        photoBtn.classList.add('active');
        preview.innerHTML = '<img alt="preview image" src="'+url+'"/>';
      }else{
        videoBtn.classList.add('active');
        preview.innerHTML = '<video controls src="'+url+'"></video>';
      }
    }

    photoIn.addEventListener('change', function(){
      if(this.files && this.files[0]){ videoIn.value=''; videoBtn.classList.remove('active'); showPreview(this.files[0],'image'); }
    });
    videoIn.addEventListener('change', function(){
      if(this.files && this.files[0]){ photoIn.value=''; photoBtn.classList.remove('active'); showPreview(this.files[0],'video'); }
    });

    composer.addEventListener('submit', function(e){
      e.preventDefault();
      var text = (bubble.textContent || '').trim();
      if(!text){ bubble.focus(); return; }

      var media = null;
      if(photoIn.files && photoIn.files[0]){
        media = {type:'image', url: URL.createObjectURL(photoIn.files[0])};
      }else if(videoIn.files && videoIn.files[0]){
        media = {type:'video', url: URL.createObjectURL(videoIn.files[0])};
      }

      var post = {
        category: 'Tailoring',
        text: text,
        media: media,
        user: localStorage.getItem('tt_user') || 'You',
        ts: Date.now()
      };

      emptyEl.style.display='none';
      renderCard(post,true);
      savePost(post);
      clearComposer();
      window.scrollTo({top: document.querySelector('.feed').offsetTop - 8, behavior:'smooth'});
    });

    // Init
    loadPosts();
  })();
  </script>
</body>
</html>
