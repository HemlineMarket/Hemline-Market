<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catalog — Hemline Market</title>
  <style>
    :root{--ink:#111;--muted:#666;--line:#eee;--bg:#fff}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}

    /* Streamlined header */
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);z-index:10}
    .top{max-width:1200px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;gap:20px}
    .brand{font-weight:700;font-size:18px;color:#111;text-decoration:none;white-space:nowrap}
    .grow{flex:1}
    .pillnav{display:flex;gap:10px}
    .pillnav a{padding:8px 12px;border:1px solid var(--line);border-radius:999px;text-decoration:none;color:#111;background:#fff}
    .pillnav a:hover{background:#f7f7f7}
    .cta{padding:8px 12px;border-radius:999px;background:#111;color:#fff!important;text-decoration:none}
    .cta:hover{background:#000}

    /* Filters */
    .filters{max-width:1200px;margin:0 auto;padding:16px 20px;border-bottom:1px solid var(--line);display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
    .filters label{display:block;font-size:.9rem;font-weight:600;margin:0 0 6px}
    .filters select,.filters input{width:100%;padding:8px 10px;border:1px solid #ccc;border-radius:8px;background:#fff}
    .status{max-width:1200px;margin:14px auto -6px;padding:0 20px;color:var(--muted);text-align:center}

    /* Grid + cards */
    .grid{max-width:1200px;margin:0 auto;padding:24px 20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:24px}
    .card{border:1px solid var(--line);border-radius:12px;background:#fff;padding:16px;box-shadow:0 2px 6px rgba(0,0,0,.03)}
    .thumb{height:140px;border-radius:8px;margin-bottom:12px;background:repeating-linear-gradient(135deg,#f8f8f8,#f8f8f8 12px,#f1f1f1 12px,#f1f1f1 24px)}
    .title{margin:0 0 6px;font-size:1rem}
    .swatches{display:flex;gap:6px;margin:6px 0 10px}
    .swatch{width:14px;height:14px;border-radius:999px;border:1px solid rgba(0,0,0,.15)}
    .meta{margin:0 0 8px;color:#555;font-size:.9rem}
    .muted{color:var(--muted);font-size:.9rem}
    .price{margin:0;font-weight:600}
    .hm-card-actions{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
    .hm-add-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;background:#111;color:#fff;border:1px solid #111;border-radius:12px;cursor:pointer;font:14px/1.2 system-ui,-apple-system,Segoe UI,Inter,sans-serif;transition:.12s}
    .hm-add-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(0,0,0,.12)}
  </style>
</head>
<body>

<header>
  <div class="top">
    <a class="brand" href="index.html">hemlinemarket</a>
    <div class="grow"></div>
    <nav class="pillnav" aria-label="Primary">
      <a href="browse.html">Browse</a>
      <a href="likes.html">Likes</a>
      <a href="atelier.html">Atelier Stash</a>
      <a href="news.html">News</a>
      <a href="profile.html">Profile</a>
      <a class="cta" href="list.html">List an item</a>
    </nav>
  </div>
</header>

<!-- Boutique filters (no “unknown”; no Stretch) -->
<section class="filters" aria-label="Boutique filters">
  <div>
    <label for="fabric-content">Fabric content</label>
    <select id="fabric-content">
      <option value="">All</option>
      <!-- Natural -->
      <option value="cotton">Cotton</option>
      <option value="linen">Linen (Flax)</option>
      <option value="silk">Silk</option>
      <option value="wool">Wool</option>
      <option value="hemp">Hemp</option>
      <option value="ramie">Ramie</option>
      <option value="cashmere">Cashmere</option>
      <option value="alpaca">Alpaca</option>
      <option value="mohair">Mohair</option>
      <!-- Man-made -->
      <option value="rayon">Rayon</option>
      <option value="viscose">Viscose</option>
      <option value="lyocell">Lyocell</option>
      <option value="modal">Modal</option>
      <option value="tencel">Tencel</option>
      <option value="acetate">Acetate</option>
      <option value="polyester">Polyester</option>
      <option value="nylon">Nylon</option>
      <option value="acrylic">Acrylic</option>
      <option value="spandex">Spandex (Elastane)</option>
      <!-- Demo shortcut -->
      <option value="wool-silk">Wool-Silk</option>
    </select>
  </div>

  <div>
    <label for="fabric-type">Fabric type</label>
    <select id="fabric-type">
      <option value="">All</option>
      <!-- TYPES ONLY -->
      <option value="crepe">Crepe</option>
      <option value="dobby">Dobby</option>
      <option value="jersey">Jersey</option>
      <option value="satin">Satin</option>
      <option value="sateen">Sateen</option>
      <option value="twill">Twill</option>
      <option value="chiffon">Chiffon</option>
      <option value="georgette">Georgette</option>
      <option value="organza">Organza</option>
      <option value="faille">Faille</option>
      <option value="taffeta">Taffeta</option>
      <option value="brocade">Brocade</option>
      <option value="seersucker">Seersucker</option>
      <option value="poplin">Poplin</option>
      <option value="gabardine">Gabardine</option>
      <option value="flannel">Flannel</option>
      <option value="herringbone">Herringbone</option>
      <option value="denim">Denim</option>
      <option value="canvas">Canvas</option>
      <option value="velvet">Velvet</option>
      <option value="lace">Lace</option>
      <option value="mesh">Mesh</option>
    </select>
  </div>

  <div>
    <label for="fabric-category">Fabric category</label>
    <select id="fabric-category">
      <option value="">All</option>
      <option value="natural">Natural</option>
      <option value="synthetic">Synthetic</option>
      <option value="blend">Blend</option>
    </select>
  </div>

  <div>
    <label for="fabric-condition">Condition</label>
    <select id="fabric-condition">
      <option value="">Any</option>
      <option value="new">New</option>
      <option value="like-new">Like New</option>
      <option value="used">Used</option>
    </select>
  </div>

  <div>
    <label for="fabric-transparency">Transparency</label>
    <select id="fabric-transparency">
      <option value="">Any</option>
      <option value="opaque">Opaque</option>
      <option value="semi-sheer">Semi-sheer</option>
      <option value="sheer">Sheer</option>
    </select>
  </div>
</section>

<!-- Advanced filters -->
<section class="filters" aria-label="Advanced filters" style="margin-top:-8px;border-top:none">
  <div>
    <label>Weight (gsm)</label>
    <div style="display:flex;gap:8px">
      <input id="gsm-min" type="number" placeholder="min">
      <input id="gsm-max" type="number" placeholder="max">
    </div>
  </div>

  <div>
    <label>Width (in)</label>
    <div style="display:flex;gap:8px">
      <input id="width-min" type="number" placeholder="min">
      <input id="width-max" type="number" placeholder="max">
    </div>
  </div>

  <div>
    <label>Price (USD)</label>
    <div style="display:flex;gap:8px">
      <input id="price-min" type="number" placeholder="min">
      <input id="price-max" type="number" placeholder="max">
    </div>
  </div>

  <div>
    <label for="fabric-designer">Designer</label>
    <input id="fabric-designer" type="text" placeholder="e.g. Liberty, Mood, Joann">
  </div>
</section>

<p id="catalog-status" class="status">Showing all fabrics</p>

<main class="grid" id="catalog-grid">
  <!-- Silk Crepe -->
  <article class="card"
    data-content="silk" data-type="crepe" data-category="natural" data-condition="new"
    data-transparency="semi-sheer"
    data-gsm="90" data-width="54" data-price="45" data-designer="Liberty">
    <div class="thumb" role="img" aria-label="Silk Crepe"></div>
    <h3 class="title">Silk Crepe</h3>
    <div class="swatches"><span class="swatch" style="background:#e45050"></span><span class="swatch" style="background:#f2b3c2"></span><span class="swatch" style="background:#f2efe7"></span></div>
    <p class="meta">Content: Silk · Type: Crepe · Category: Natural · Condition: New</p>
    <p class="muted">Transparency: Semi-sheer · GSM: 90 · Width: 54" · Designer: Liberty</p>
    <p class="price">$45.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Silk Crepe" type="button">Add to cart</button></div>
  </article>

  <!-- Wool Dobby -->
  <article class="card"
    data-content="wool" data-type="dobby" data-category="natural" data-condition="used"
    data-transparency="opaque"
    data-gsm="240" data-width="58" data-price="60" data-designer="Mood">
    <div class="thumb" role="img" aria-label="Wool Dobby"></div>
    <h3 class="title">Wool Dobby</h3>
    <div class="swatches"><span class="swatch" style="background:#1b1b1c"></span><span class="swatch" style="background:#4a4f57"></span></div>
    <p class="meta">Content: Wool · Type: Dobby · Category: Natural · Condition: Used</p>
    <p class="muted">Transparency: Opaque · GSM: 240 · Width: 58" · Designer: Mood</p>
    <p class="price">$60.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Wool Dobby" type="button">Add to cart</button></div>
  </article>

  <!-- Cotton Sateen -->
  <article class="card"
    data-content="cotton" data-type="sateen" data-category="natural" data-condition="like-new"
    data-transparency="opaque"
    data-gsm="150" data-width="55" data-price="28" data-designer="Joann">
    <div class="thumb" role="img" aria-label="Cotton Sateen"></div>
    <h3 class="title">Cotton Sateen</h3>
    <div class="swatches"><span class="swatch" style="background:#ffffff"></span><span class="swatch" style="background:#1d2a44"></span></div>
    <p class="meta">Content: Cotton · Type: Sateen · Category: Natural · Condition: Like New</p>
    <p class="muted">Transparency: Opaque · GSM: 150 · Width: 55" · Designer: Joann</p>
    <p class="price">$28.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Cotton Sateen" type="button">Add to cart</button></div>
  </article>

  <!-- Linen Twill -->
  <article class="card"
    data-content="linen" data-type="twill" data-category="natural" data-condition="new"
    data-transparency="opaque"
    data-gsm="175" data-width="55" data-price="35" data-designer="Liberty">
    <div class="thumb" role="img" aria-label="Linen Twill"></div>
    <h3 class="title">Linen Twill</h3>
    <div class="swatches"><span class="swatch" style="background:#d8cbb5"></span><span class="swatch" style="background:#b08a5b"></span></div>
    <p class="meta">Content: Linen · Type: Twill · Category: Natural · Condition: New</p>
    <p class="muted">Transparency: Opaque · GSM: 175 · Width: 55" · Designer: Liberty</p>
    <p class="price">$35.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Linen Twill" type="button">Add to cart</button></div>
  </article>

  <!-- Poly Jersey -->
  <article class="card"
    data-content="polyester" data-type="jersey" data-category="synthetic" data-condition="used"
    data-transparency="opaque"
    data-gsm="180" data-width="60" data-price="12" data-designer="Mood">
    <div class="thumb" role="img" aria-label="Poly Jersey"></div>
    <h3 class="title">Poly Jersey</h3>
    <div class="swatches"><span class="swatch" style="background:#b7b9be"></span><span class="swatch" style="background:#111111"></span></div>
    <p class="meta">Content: Polyester · Type: Jersey · Category: Synthetic · Condition: Used</p>
    <p class="muted">Transparency: Opaque · GSM: 180 · Width: 60" · Designer: Mood</p>
    <p class="price">$12.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Poly Jersey" type="button">Add to cart</button></div>
  </article>

  <!-- Wool-Silk Crepe Blend -->
  <article class="card"
    data-content="wool-silk" data-type="crepe" data-category="blend" data-condition="like-new"
    data-transparency="semi-sheer"
    data-gsm="160" data-width="57" data-price="70" data-designer="Joann">
    <div class="thumb" role="img" aria-label="Wool-Silk Crepe Blend"></div>
    <h3 class="title">Wool-Silk Crepe Blend</h3>
    <div class="swatches"><span class="swatch" style="background:#101726"></span><span class="swatch" style="background:#f4e4c7"></span></div>
    <p class="meta">Content: Wool/Silk · Type: Crepe · Category: Blend · Condition: Like New</p>
    <p class="muted">Transparency: Semi-sheer · GSM: 160 · Width: 57" · Designer: Joann</p>
    <p class="price">$70.00 / yd</p>
    <div class="hm-card-actions"><button class="hm-add-btn" data-add-to-cart data-item="Wool-Silk Crepe Blend" type="button">Add to cart</button></div>
  </article>
</main>

<script>
(function(){
  function qs(id){return document.getElementById(id)}
  function all(sel){return Array.from(document.querySelectorAll(sel))}
  function num(v){if(v===''||v==null||isNaN(+v))return null; return +v}
  function within(val,min,max){if(val==null)return false; if(min!=null&&val<min)return false; if(max!=null&&val>max)return false; return true;}
  function updateStatus(n){const s=qs('catalog-status'); if(!s) return; s.textContent=(n===0)?'No fabrics match these filters':'Showing '+n+' fabric'+(n>1?'s':'');}

  function apply(){
    const content=(qs('fabric-content')?.value||'').trim();
    const type=(qs('fabric-type')?.value||'').trim();
    const category=(qs('fabric-category')?.value||'').trim();
    const condition=(qs('fabric-condition')?.value||'').trim();
    const transparency=(qs('fabric-transparency')?.value||'').trim();

    const gsmMin=num(qs('gsm-min')?.value||'');
    const gsmMax=num(qs('gsm-max')?.value||'');
    const widthMin=num(qs('width-min')?.value||'');
    const widthMax=num(qs('width-max')?.value||'');
    const priceMin=num(qs('price-min')?.value||'');
    const priceMax=num(qs('price-max')?.value||'');
    const designer=(qs('fabric-designer')?.value||'').trim().toLowerCase();

    let count=0;
    all('.card').forEach(card=>{
      const c=card.dataset.content||'';
      const t=card.dataset.type||'';
      const cat=card.dataset.category||'';
      const cond=card.dataset.condition||'';
      const tr=(card.dataset.transparency||'').trim();
      const gsm=num(card.dataset.gsm);
      const w=num(card.dataset.width);
      const p=num(card.dataset.price);
      const d=(card.dataset.designer||'').toLowerCase();

      const simple = (!content||c===content)&&(!type||t===type)&&(!category||cat===category)&&(!condition||cond===condition)&&(!transparency||tr===transparency);
      const adv = (!designer||d.includes(designer)) &&
                  (!gsmMin&&!gsmMax?true:within(gsm,gsmMin,gsmMax)) &&
                  (!widthMin&&!widthMax?true:within(w,widthMin,widthMax)) &&
                  (!priceMin&&!priceMax?true:within(p,priceMin,priceMax));

      const show = simple && adv;
      card.style.display = show ? 'block' : 'none';
      if (show) count++;
    });
    updateStatus(count);
  }

  function init(){
    ['fabric-content','fabric-type','fabric-category','fabric-condition','fabric-transparency',
     'gsm-min','gsm-max','width-min','width-max','price-min','price-max','fabric-designer'
    ].forEach(id=>{
      const el=qs(id); if(!el) return;
      el.addEventListener('change',apply);
      if(el.tagName==='INPUT'){ el.addEventListener('keyup',e=>{ if(e.key==='Enter') apply(); }); }
    });
    apply();
  }

  if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init,{once:true});} else {init();}
})();
</script>

<!-- Add-to-cart micro-toast -->
<script>
(function(){
  const style = document.createElement('style');
  style.textContent = `
    .hm-toast-host{position:fixed;top:16px;right:16px;display:flex;flex-direction:column;gap:12px;z-index:9999}
    .hm-toast{display:flex;align-items:center;gap:10px;min-width:220px;max-width:320px;padding:10px 12px;border-radius:12px;background:#111;color:#fff;box-shadow:0 8px 28px rgba(0,0,0,.18);opacity:0;transform:translateY(-6px) scale(.98);animation:hm-in .18s ease forwards}
    .hm-toast svg{width:18px;height:18px;flex:0 0 auto}
    .hm-toast .tx{font-size:.95rem;line-height:1.25}
    @keyframes hm-in{to{opacity:1;transform:translateY(0) scale(1)}}
    @keyframes hm-out{to{opacity:0;transform:translateY(-6px) scale(.98)}}
  `;
  document.head.appendChild(style);
  const host = document.createElement('div');
  host.className = 'hm-toast-host';
  document.body.appendChild(host);

  function showToast(label){
    const el = document.createElement('div');
    el.className = 'hm-toast';
    el.setAttribute('role','status');
    el.setAttribute('aria-live','polite');
    el.innerHTML = `
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 6L9 17l-5-5"/>
      </svg>
      <div class="tx">Added to cart — <strong>${label}</strong></div>
    `;
    host.appendChild(el);
    const ttl = 1800;
    setTimeout(()=>{ el.style.animation = 'hm-out .18s ease forwards';}, ttl-250);
    setTimeout(()=>{ el.remove(); }, ttl);
  }
  function wire(){
    document.querySelectorAll('[data-add-to-cart]').forEach(btn=>{
      if(btn.__hm_wired) return;
      btn.__hm_wired = true;
      btn.addEventListener('click', ()=>{
        const label = btn.getAttribute('data-item') || 'Item';
        showToast(label);
      });
    });
  }
  wire();
  const mo = new MutationObserver(wire);
  mo.observe(document.body, {childList:true,subtree:true});
})();
</script>

<!-- Cart systems (safe if cached) -->
<script id="hm-cart-store" src="/assets/js/cart-store.js" defer></script>
<script id="hm-autoinit" src="/assets/js/add-to-cart-autoinit.js" defer></script>
<script id="hm-cart-badge" src="/assets/js/cart-badge.js" defer></script>

</body>
</html>
